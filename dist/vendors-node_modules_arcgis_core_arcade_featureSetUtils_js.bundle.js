"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkarcgis_starter"] = self["webpackChunkarcgis_starter"] || []).push([["vendors-node_modules_arcgis_core_arcade_featureSetUtils_js"],{

/***/ "./node_modules/@arcgis/core/arcade/featureSetCollection.js":
/*!******************************************************************!*\
  !*** ./node_modules/@arcgis/core/arcade/featureSetCollection.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ e)\n/* harmony export */ });\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nclass e{constructor(){this.declaredRootClass=\"esri.arcade.featureSetCollection\",this._layerById={},this._layerByName={}}add(e,t,a){this._layerById[t]=a,this._layerByName[e]=a}async featureSetByName(e,t=!0,a=[\"*\"]){return void 0===this._layerByName[e]?null:this._layerByName[e]}async featureSetById(e,t=!0,a=[\"*\"]){return void 0===this._layerById[e]?null:this._layerById[e]}castToText(e=!1){return\"object, FeatureSetCollection\"}}\n\n\n//# sourceURL=webpack://arcgis-starter/./node_modules/@arcgis/core/arcade/featureSetCollection.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/arcade/featureSetUtils.js":
/*!*************************************************************!*\
  !*** ./node_modules/@arcgis/core/arcade/featureSetUtils.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"constructAssociationMetaDataFeatureSetFromUrl\": () => (/* binding */ A),\n/* harmony export */   \"constructFeatureSet\": () => (/* binding */ S),\n/* harmony export */   \"constructFeatureSetFromPortalItem\": () => (/* binding */ j),\n/* harmony export */   \"constructFeatureSetFromRelationship\": () => (/* binding */ C),\n/* harmony export */   \"constructFeatureSetFromUrl\": () => (/* binding */ I),\n/* harmony export */   \"convertToFeatureSet\": () => (/* binding */ E),\n/* harmony export */   \"createFeatureSetCollectionFromMap\": () => (/* binding */ O),\n/* harmony export */   \"createFeatureSetCollectionFromService\": () => (/* binding */ b),\n/* harmony export */   \"initialiseMetaDataCache\": () => (/* binding */ L)\n/* harmony export */ });\n/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../request.js */ \"./node_modules/@arcgis/core/request.js\");\n/* harmony import */ var _featureSetCollection_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./featureSetCollection.js */ \"./node_modules/@arcgis/core/arcade/featureSetCollection.js\");\n/* harmony import */ var _featureset_actions_AttributeFilter_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./featureset/actions/AttributeFilter.js */ \"./node_modules/@arcgis/core/arcade/featureset/actions/AttributeFilter.js\");\n/* harmony import */ var _featureset_actions_GroupBy_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./featureset/actions/GroupBy.js */ \"./node_modules/@arcgis/core/arcade/featureset/actions/GroupBy.js\");\n/* harmony import */ var _featureset_actions_OrderBy_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./featureset/actions/OrderBy.js */ \"./node_modules/@arcgis/core/arcade/featureset/actions/OrderBy.js\");\n/* harmony import */ var _featureset_actions_SpatialFilter_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./featureset/actions/SpatialFilter.js */ \"./node_modules/@arcgis/core/arcade/featureset/actions/SpatialFilter.js\");\n/* harmony import */ var _featureset_actions_Top_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./featureset/actions/Top.js */ \"./node_modules/@arcgis/core/arcade/featureset/actions/Top.js\");\n/* harmony import */ var _featureset_sources_FeatureLayerDynamic_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./featureset/sources/FeatureLayerDynamic.js */ \"./node_modules/@arcgis/core/arcade/featureset/sources/FeatureLayerDynamic.js\");\n/* harmony import */ var _featureset_sources_FeatureLayerMemory_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./featureset/sources/FeatureLayerMemory.js */ \"./node_modules/@arcgis/core/arcade/featureset/sources/FeatureLayerMemory.js\");\n/* harmony import */ var _featureset_sources_FeatureLayerRelated_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./featureset/sources/FeatureLayerRelated.js */ \"./node_modules/@arcgis/core/arcade/featureset/sources/FeatureLayerRelated.js\");\n/* harmony import */ var _featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./featureset/support/cache.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/cache.js\");\n/* harmony import */ var _featureset_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./featureset/support/errorsupport.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/errorsupport.js\");\n/* harmony import */ var _featureset_support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./featureset/support/FeatureSet.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/FeatureSet.js\");\n/* harmony import */ var _featureset_support_shared_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./featureset/support/shared.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/shared.js\");\n/* harmony import */ var _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../core/sql/WhereClause.js */ \"./node_modules/@arcgis/core/core/sql/WhereClause.js\");\n/* harmony import */ var _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../layers/FeatureLayer.js */ \"./node_modules/@arcgis/core/layers/FeatureLayer.js\");\n/* harmony import */ var _portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../portal/PortalItem.js */ \"./node_modules/@arcgis/core/portal/PortalItem.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nfunction L(){null===_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].applicationCache&&(_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].applicationCache=new _featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"])}async function w(e,t){if(_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].applicationCache){const r=_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].applicationCache.getLayerInfo(e);if(r){const a=await r;return new _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_15__[\"default\"]({url:e,outFields:t,sourceJSON:a})}const n=new _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_15__[\"default\"]({url:e,outFields:t}),i=(async()=>(await n.load(),n.sourceJSON))();if(_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].applicationCache){_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].applicationCache.setLayerInfo(e,i);try{return await i,n}catch(a){throw _featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].applicationCache.clearLayerInfo(e),a}}return await i,n}return new _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_15__[\"default\"]({url:e,outFields:t})}async function I(e,t,a,r,n,i=null){return S(await w(e,[\"*\"]),t,a,r,n,i)}function S(e,t=null,a=null,r=!0,n=null,i=null){const s={layer:e,spatialReference:t,outFields:a,includeGeometry:r,lrucache:n,interceptor:i};return!0===e._hasMemorySource()?new _featureset_sources_FeatureLayerMemory_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"](s):new _featureset_sources_FeatureLayerDynamic_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"](s)}async function N(t){if(null!==_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].applicationCache){const e=_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].applicationCache.getLayerInfo(t);if(null!==e)return e}const a=(async()=>{const a=await (0,_request_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(t,{responseType:\"json\",query:{f:\"json\"}});return a.data?a.data:null})();if(null!==_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].applicationCache){_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].applicationCache.setLayerInfo(t,a);try{return await a}catch(r){throw _featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].applicationCache.clearLayerInfo(t),r}}return a}async function F(t,a){const r=\"QUERYDATAELEMTS:\"+a.toString()+\":\"+t;if(null!==_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].applicationCache){const e=_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].applicationCache.getLayerInfo(r);if(null!==e)return e}const n=(async()=>{const r=await (0,_request_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(t+\"/queryDataElements\",{method:\"post\",responseType:\"json\",query:{layers:JSON.stringify([a.toString()]),f:\"json\"}});if(r.data){const e=r.data;if(e.layerDataElements&&e.layerDataElements[0])return e.layerDataElements[0]}throw new _featureset_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_11__.FeatureSetError(_featureset_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_11__.FeatureSetErrorCodes.DataElementsNotFound)})();if(null!==_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].applicationCache){_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].applicationCache.setLayerInfo(r,n);try{return await n}catch(i){throw _featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].applicationCache.clearLayerInfo(r),i}}return n}async function g(t){if(null!==_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].applicationCache){const e=_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].applicationCache.getLayerInfo(t);if(null!==e)return e}const a=(async()=>{const a=await (0,_request_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(t,{responseType:\"json\",query:{f:\"json\"}});if(a.data){const e=a.data;return e.layers||(e.layers=[]),e.tables||(e.tables=[]),e}return{layers:[],tables:[]}})();if(null!==_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].applicationCache){_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].applicationCache.setLayerInfo(t,a);try{return await a}catch(r){throw _featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].applicationCache.clearLayerInfo(t),r}}return a}async function A(e,t){const a={metadata:null,networkId:-1,unVersion:3,terminals:[],queryelem:null,layerNameLkp:{},lkp:null},r=await g(e);if(a.metadata=r,r.controllerDatasetLayers&&void 0!==r.controllerDatasetLayers.utilityNetworkLayerId&&null!==r.controllerDatasetLayers.utilityNetworkLayerId){if(r.layers)for(const e of r.layers)a.layerNameLkp[e.id]=e.name;if(r.tables)for(const e of r.tables)a.layerNameLkp[e.id]=e.name;const n=r.controllerDatasetLayers.utilityNetworkLayerId;a.networkId=n;const i=await F(e,n);if(i){a.queryelem=i,a.queryelem&&a.queryelem.dataElement&&void 0!==a.queryelem.dataElement.schemaGeneration&&(a.unVersion=a.queryelem.dataElement.schemaGeneration),a.lkp={},a.queryelem.dataElement.domainNetworks||(a.queryelem.dataElement.domainNetworks=[]);for(const e of a.queryelem.dataElement.domainNetworks){for(const t of e.edgeSources?e.edgeSources:[]){const e={layerId:t.layerId,sourceId:t.sourceId,className:a.layerNameLkp[t.layerId]?a.layerNameLkp[t.layerId]:null};e.className&&(a.lkp[e.className]=e)}for(const t of e.junctionSources?e.junctionSources:[]){const e={layerId:t.layerId,sourceId:t.sourceId,className:a.layerNameLkp[t.layerId]?a.layerNameLkp[t.layerId]:null};e.className&&(a.lkp[e.className]=e)}}if(a.queryelem.dataElement.terminalConfigurations)for(const e of a.queryelem.dataElement.terminalConfigurations)for(const t of e.terminals)a.terminals.push({terminalId:t.terminalId,terminalName:t.terminalName});const r=await N(e+\"/\"+n);if(r.systemLayers&&void 0!==r.systemLayers.associationsTableId&&null!==r.systemLayers.associationsTableId){const n=[];a.unVersion>=4&&(n.push(\"STATUS\"),n.push(\"PERCENTALONG\"));let i=await I(e+\"/\"+r.systemLayers.associationsTableId.toString(),t,[\"OBJECTID\",\"FROMNETWORKSOURCEID\",\"TONETWORKSOURCEID\",\"FROMGLOBALID\",\"TOGLOBALID\",\"TOTERMINALID\",\"FROMTERMINALID\",\"ASSOCIATIONTYPE\",\"ISCONTENTVISIBLE\",\"GLOBALID\",...n],!1,null,null);return await i.load(),a.unVersion>=4&&(i=i.filter(_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_14__.WhereClause.create(\"STATUS NOT IN (1, 2, 3, 4, 5, 6, 7, 9, 10, 11, 12, 13, 14, 15, 17, 18, 19, 20, 21, 22, 23, 25, 26, 27, 28, 29, 30, 31, 33, 34, 35, 36, 37, 38, 39, 41, 42, 43, 44, 45, 46, 47, 49, 50, 51, 52, 53, 54, 55, 57, 58, 59, 60, 61, 62,63)\",i.getFieldsIndex())),await i.load()),{lkp:a.lkp,associations:i,unVersion:a.unVersion,terminals:a.terminals}}return{associations:null,unVersion:a.unVersion,lkp:null,terminals:[]}}return{associations:null,unVersion:a.unVersion,lkp:null,terminals:[]}}return{associations:null,unVersion:a.unVersion,lkp:null,terminals:[]}}async function C(e,t,a,r=null,n=null,i=!0,s=null,l=null){let o=e.serviceUrl();if(!o)return null;o=\"/\"===o.charAt(o.length-1)?o+t.relatedTableId.toString():o+\"/\"+t.relatedTableId.toString();const c=await I(o,r,n,i,s,l);return new _featureset_sources_FeatureLayerRelated_js__WEBPACK_IMPORTED_MODULE_9__[\"default\"]({layer:e,relatedLayer:c,relationship:t,objectId:a,spatialReference:r,outFields:n,includeGeometry:i,lrucache:s,interceptor:l})}_featureset_actions_AttributeFilter_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].registerAction(),_featureset_actions_GroupBy_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].registerAction(),_featureset_actions_OrderBy_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].registerAction(),_featureset_actions_SpatialFilter_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].registerAction(),_featureset_actions_Top_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].registerAction();class T extends _featureSetCollection_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]{constructor(e,t=null,a=null,r=null){super(),this._map=e,this._overridespref=t,this._lrucache=a,this._interceptor=r,this._instantLayers=[]}_makeAndAddFeatureSet(e,t=!0,a=null){const r=S(e,this._overridespref,null===a?[\"*\"]:a,t,this._lrucache,this._interceptor);return this._instantLayers.push({featureset:r,opitem:e,includeGeometry:t,outFields:JSON.stringify(a)}),r}async featureSetByName(e,t=!0,a=null){if(void 0!==this._map.loaded&&void 0!==this._map.load&&!1===this._map.loaded)return await this._map.load(),this.featureSetByName(e,t,a);null===a&&(a=[\"*\"]),a=(a=a.slice(0)).sort();const r=JSON.stringify(a);for(let i=0;i<this._instantLayers.length;i++){const a=this._instantLayers[i];if(a.opitem.title===e&&a.includeGeometry===t&&a.outFields===r)return this._instantLayers[i].featureset}const n=this._map.allLayers.find((t=>t instanceof _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_15__[\"default\"]&&t.title===e));if(n)return this._makeAndAddFeatureSet(n,t,a);if(this._map.tables){const r=this._map.tables.find((t=>!!(t.title&&t.title===e||t.title&&t.title===e)));if(r){if(r instanceof _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_15__[\"default\"])return this._makeAndAddFeatureSet(r,t,a);if(r._materializedTable);else{const e=r.outFields?r:{...r,outFields:[\"*\"]};r._materializedTable=new _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_15__[\"default\"](e)}return await r._materializedTable.load(),this._makeAndAddFeatureSet(r._materializedTable,t,a)}}return null}async featureSetById(e,t=!0,a=[\"*\"]){if(void 0!==this._map.loaded&&void 0!==this._map.load&&!1===this._map.loaded)return await this._map.load(),this.featureSetById(e,t,a);null===a&&(a=[\"*\"]),a=(a=a.slice(0)).sort();const r=JSON.stringify(a);for(let i=0;i<this._instantLayers.length;i++){const a=this._instantLayers[i];if(a.opitem.id===e&&a.includeGeometry===t&&a.outFields===r)return this._instantLayers[i].featureset}const n=this._map.allLayers.find((t=>t instanceof _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_15__[\"default\"]&&t.id===e));if(n)return this._makeAndAddFeatureSet(n,t,a);if(this._map.tables){const r=this._map.tables.find((t=>t.id===e));if(r){if(r instanceof _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_15__[\"default\"])return this._makeAndAddFeatureSet(r,t,a);if(r._materializedTable);else{const e={...r,outFields:[\"*\"]};r._materializedTable=new _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_15__[\"default\"](e)}return await r._materializedTable.load(),this._makeAndAddFeatureSet(r._materializedTable,t,a)}}return null}}class k extends _featureSetCollection_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]{constructor(e,t=null,a=null,r=null){super(),this._url=e,this._overridespref=t,this._lrucache=a,this._interceptor=r,this.metadata=null,this._instantLayers=[]}get url(){return this._url}_makeAndAddFeatureSet(e,t=!0,a=null){const r=S(e,this._overridespref,null===a?[\"*\"]:a,t,this._lrucache);return this._instantLayers.push({featureset:r,opitem:e,includeGeometry:t,outFields:JSON.stringify(a)}),r}async _loadMetaData(){const e=await g(this._url);return this.metadata=e,e}load(){return this._loadMetaData()}clone(){return new k(this._url,this._overridespref,this._lrucache,this._interceptor)}async featureSetByName(e,t=!0,a=null){null===a&&(a=[\"*\"]),a=(a=a.slice(0)).sort();const r=JSON.stringify(a);for(let s=0;s<this._instantLayers.length;s++){const a=this._instantLayers[s];if(a.opitem.title===e&&a.includeGeometry===t&&a.outFields===r)return this._instantLayers[s].featureset}const n=await this._loadMetaData();let i=null;for(const s of n.layers?n.layers:[])s.name===e&&(i=s);if(!i)for(const s of n.tables?n.tables:[])s.name===e&&(i=s);if(i){const e=await w(this._url+\"/\"+i.id,[\"*\"]);return this._makeAndAddFeatureSet(e,t,a)}return null}async featureSetById(e,t=!0,a=[\"*\"]){null===a&&(a=[\"*\"]),a=(a=a.slice(0)).sort();const r=JSON.stringify(a);e=null!=e?e.toString():\"\";for(let s=0;s<this._instantLayers.length;s++){const a=this._instantLayers[s];if(a.opitem.id===e&&a.includeGeometry===t&&a.outFields===r)return this._instantLayers[s].featureset}const n=await this._loadMetaData();let i=null;for(const s of n.layers?n.layers:[])null!==s.id&&void 0!==s.id&&s.id.toString()===e&&(i=s);if(!i)for(const s of n.tables?n.tables:[])null!==s.id&&void 0!==s.id&&s.id.toString()===e&&(i=s);if(i){const e=await w(this._url+\"/\"+i.id,[\"*\"]);return this._makeAndAddFeatureSet(e,t,a)}return null}}function O(e,t,a=null,r=null){return new T(e,t,a,r)}function b(e,t,a=null,r=null){return new k(e,t,a,r)}function E(e,t,a,r,n){if(null===e)return null;if(e instanceof _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_15__[\"default\"]){switch(t){case\"datasource\":return S(e,n,e.outFields,!0,a,r).getDataSourceFeatureSet();case\"parent\":case\"root\":return S(e,n,e.outFields,!0,a,r)}return null}if(e instanceof _featureset_support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_12__[\"default\"])switch(t){case\"datasource\":return e.getDataSourceFeatureSet();case\"parent\":return e;case\"root\":return e.getRootFeatureSet()}return null}async function j(e,t,a,r,n,i,s,l=null){if(_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].applicationCache){const o=_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].applicationCache.getLayerInfo(e+\":\"+i.url);if(o){const e=await o;return S(new _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_15__[\"default\"]({url:(0,_featureset_support_shared_js__WEBPACK_IMPORTED_MODULE_13__.extractServiceUrl)(e.url)+\"/\"+t,outFields:[\"*\"]}),a,r,n,s,l)}}const o=new _portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_16__[\"default\"]({id:e,portal:i}).load();_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].applicationCache&&_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].applicationCache.setLayerInfo(e+\":\"+i.url,o);try{const e=await o;return S(new _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_15__[\"default\"]({url:(0,_featureset_support_shared_js__WEBPACK_IMPORTED_MODULE_13__.extractServiceUrl)(e.url??\"\")+\"/\"+t,outFields:[\"*\"]}),a,r,n,s,l)}catch(u){throw _featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].applicationCache&&_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].applicationCache.clearLayerInfo(e+\":\"+i.url),u}}\n\n\n//# sourceURL=webpack://arcgis-starter/./node_modules/@arcgis/core/arcade/featureSetUtils.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/arcade/featureset/actions/Adapted.js":
/*!************************************************************************!*\
  !*** ./node_modules/@arcgis/core/arcade/featureset/actions/Adapted.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"AdaptedFeatureSet\": () => (/* binding */ D),\n/* harmony export */   \"AdaptedField\": () => (/* binding */ W),\n/* harmony export */   \"FieldRename\": () => (/* binding */ x),\n/* harmony export */   \"OriginalField\": () => (/* binding */ E),\n/* harmony export */   \"SqlExpressionAdapted\": () => (/* binding */ y),\n/* harmony export */   \"StringToCodeAdapted\": () => (/* binding */ A)\n/* harmony export */ });\n/* harmony import */ var _Graphic_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../Graphic.js */ \"./node_modules/@arcgis/core/Graphic.js\");\n/* harmony import */ var _ArcadeDate_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../ArcadeDate.js */ \"./node_modules/@arcgis/core/arcade/ArcadeDate.js\");\n/* harmony import */ var _kernel_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../kernel.js */ \"./node_modules/@arcgis/core/arcade/kernel.js\");\n/* harmony import */ var _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../support/errorsupport.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/errorsupport.js\");\n/* harmony import */ var _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../support/FeatureSet.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/FeatureSet.js\");\n/* harmony import */ var _support_IdSet_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../support/IdSet.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/IdSet.js\");\n/* harmony import */ var _support_shared_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../support/shared.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/shared.js\");\n/* harmony import */ var _support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../support/sqlUtils.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/sqlUtils.js\");\n/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../core/maybe.js */ \"./node_modules/@arcgis/core/core/maybe.js\");\n/* harmony import */ var _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../core/sql/WhereClause.js */ \"./node_modules/@arcgis/core/core/sql/WhereClause.js\");\n/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../geometry/SpatialReference.js */ \"./node_modules/@arcgis/core/geometry/SpatialReference.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nclass W{constructor(e){this.field=e,this.sqlRewritable=!1}postInitialization(e,t){}}class E extends W{constructor(e){super(e),this.sqlRewritable=!0}extractValue(e){return e.attributes[this.field.name]}rewriteSql(e){return{rewritten:this.sqlRewritable,where:e}}}class x extends W{constructor(e,t,r){super((0,_support_shared_js__WEBPACK_IMPORTED_MODULE_6__.cloneField)(e)),this.originalField=e,this.sqlRewritable=!0,this.field.name=t,this.field.alias=r}rewriteSql(e,t){return{rewritten:this.sqlRewritable,where:(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.reformulateWithoutField)(e,this.field.name,this.originalField.name,t.getFieldsIndex())}}extractValue(e){return e.attributes[this.originalField.name]}}class A extends W{constructor(e,t,r){super(e),this.codefield=t,this.lkp=r,this.reverseLkp={};for(const s in r)this.reverseLkp[r[s]]=s;this.sqlRewritable=!0}rewriteSql(e,t){const r=this.evaluateNodeToWhereClause(e.parseTree,_support_shared_js__WEBPACK_IMPORTED_MODULE_6__.FeatureServiceDatabaseType.Standardised,this.field.name,this.codefield instanceof _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_9__.WhereClause?(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.toWhereClause)(this.codefield,_support_shared_js__WEBPACK_IMPORTED_MODULE_6__.FeatureServiceDatabaseType.Standardised):this.codefield,e.parameters);return r.includes(A.BADNESS)?{rewritten:!1,where:e}:{rewritten:this.sqlRewritable,where:_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_9__.WhereClause.create(r,(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_8__.unwrapOrThrow)(t._parent).getFieldsIndex())}}evaluateNodeToWhereClause(e,r,i=null,l=null,n){let o,h,u,c;switch(e.type){case\"interval\":return (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.convertIntervalToSql)(this.evaluateNodeToWhereClause(e.value,r,i,l,n),e.qualifier,e.op);case\"case-expression\":{let t=\" CASE \";\"simple\"===e.format&&(t+=this.evaluateNodeToWhereClause(e.operand,r,i,A.BADNESS,n));for(let s=0;s<e.clauses.length;s++)t+=\" WHEN \"+this.evaluateNodeToWhereClause(e.clauses[s].operand,r,i,A.BADNESS,n)+\" THEN \"+this.evaluateNodeToWhereClause(e.clauses[s].value,r,i,A.BADNESS,n);return null!==e.else&&(t+=\" ELSE \"+this.evaluateNodeToWhereClause(e.else,r,i,A.BADNESS,n)),t+=\" END \",t}case\"parameter\":{const s=n[e.value.toLowerCase()];if(\"string\"==typeof s)return\"'\"+s.toString().replace(/'/g,\"''\")+\"'\";if(s instanceof Date)return (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.makeDateString)(s,r,null);if(s instanceof _ArcadeDate_js__WEBPACK_IMPORTED_MODULE_1__.ArcadeDate)return (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.arcadeDateToSqlString)(s,r,null);if(s instanceof Array){const e=[];for(let a=0;a<s.length;a++)\"string\"==typeof s[a]?e.push(\"'\"+s[a].toString().replace(/'/g,\"''\")+\"'\"):s[a]instanceof Date?e.push((0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.makeDateString)(s[a],r,null)):s[a]instanceof _ArcadeDate_js__WEBPACK_IMPORTED_MODULE_1__.ArcadeDate?e.push((0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.arcadeDateToSqlString)(s[a],r,null)):e.push(s[a].toString());return e}return s.toString()}case\"expression-list\":h=[];for(const t of e.value)h.push(this.evaluateNodeToWhereClause(t,r,i,l,n));return h;case\"unary-expression\":return\" ( NOT \"+this.evaluateNodeToWhereClause(e.expr,r,i,A.BADNESS,n)+\" ) \";case\"binary-expression\":switch(e.operator){case\"AND\":return\" (\"+this.evaluateNodeToWhereClause(e.left,r,i,l,n)+\" AND \"+this.evaluateNodeToWhereClause(e.right,r,i,l,n)+\") \";case\"OR\":return\" (\"+this.evaluateNodeToWhereClause(e.left,r,i,l,n)+\" OR \"+this.evaluateNodeToWhereClause(e.right,r,i,l,n)+\") \";case\"IS\":if(\"null\"!==e.right.type)throw new _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_3__.SqlError(_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_3__.SqlErrorCodes.UnsupportedIsRhs);return\" (\"+this.evaluateNodeToWhereClause(e.left,r,i,l,n)+\" IS NULL )\";case\"ISNOT\":if(\"null\"!==e.right.type)throw new _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_3__.SqlError(_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_3__.SqlErrorCodes.UnsupportedIsRhs);return\" (\"+this.evaluateNodeToWhereClause(e.left,r,i,l,n)+\" IS NOT NULL )\";case\"IN\":if(o=[],\"expression-list\"===e.right.type){if(\"column-reference\"===e.left.type&&e.left.column.toUpperCase()===this.field.name.toUpperCase()){const t=[];let s=!0;for(const r of e.right.value){if(\"string\"!==r.type){s=!1;break}if(void 0===this.lkp[r.value]){s=!1;break}t.push(this.lkp[r.value].toString())}if(s)return\" (\"+this.evaluateNodeToWhereClause(e.left,r,i,l,n)+\" IN (\"+t.join(\",\")+\")) \"}return o=this.evaluateNodeToWhereClause(e.right,r,i,l,n),\" (\"+this.evaluateNodeToWhereClause(e.left,r,i,l,n)+\" IN (\"+o.join(\",\")+\")) \"}return c=this.evaluateNodeToWhereClause(e.right,r,i,l,n),c instanceof Array?\" (\"+this.evaluateNodeToWhereClause(e.left,r,i,l,n)+\" IN (\"+c.join(\",\")+\")) \":\" (\"+this.evaluateNodeToWhereClause(e.left,r,i,l,n)+\" IN (\"+c+\")) \";case\"NOT IN\":if(o=[],\"expression-list\"===e.right.type){if(\"column-reference\"===e.left.type&&e.left.column.toUpperCase()===this.field.name.toUpperCase()){const t=[];let s=!0;for(const r of e.right.value){if(\"string\"!==r.type){s=!1;break}if(void 0===this.lkp[r.value]){s=!1;break}t.push(this.lkp[r.value].toString())}if(s)return\" (\"+this.evaluateNodeToWhereClause(e.left,r,i,l,n)+\" NOT IN (\"+t.join(\",\")+\")) \"}return o=this.evaluateNodeToWhereClause(e.right,r,i,l,n),\" (\"+this.evaluateNodeToWhereClause(e.left,r,i,l,n)+\" NOT IN (\"+o.join(\",\")+\")) \"}return c=this.evaluateNodeToWhereClause(e.right,r,i,l,n),c instanceof Array?\" (\"+this.evaluateNodeToWhereClause(e.left,r,i,l,n)+\" NOT IN (\"+c.join(\",\")+\")) \":\" (\"+this.evaluateNodeToWhereClause(e.left,r,i,l,n)+\" NOT IN (\"+c+\")) \";case\"BETWEEN\":return u=this.evaluateNodeToWhereClause(e.right,r,i,A.BADNESS,n),\" (\"+this.evaluateNodeToWhereClause(e.left,r,i,A.BADNESS,n)+\" BETWEEN \"+u[0]+\" AND \"+u[1]+\" ) \";case\"NOTBETWEEN\":return u=this.evaluateNodeToWhereClause(e.right,r,i,A.BADNESS,n),\" (\"+this.evaluateNodeToWhereClause(e.left,r,i,A.BADNESS,n)+\" NOT BETWEEN \"+u[0]+\" AND \"+u[1]+\" ) \";case\"LIKE\":return\"\"!==e.escape?\" (\"+this.evaluateNodeToWhereClause(e.left,r,i,A.BADNESS,n)+\" LIKE \"+this.evaluateNodeToWhereClause(e.right,r,i,A.BADNESS,n)+\" ESCAPE '\"+e.escape+\"') \":\" (\"+this.evaluateNodeToWhereClause(e.left,r,i,A.BADNESS,n)+\" LIKE \"+this.evaluateNodeToWhereClause(e.right,r,i,A.BADNESS,n)+\") \";case\"NOT LIKE\":return\"\"!==e.escape?\" (\"+this.evaluateNodeToWhereClause(e.left,r,i,A.BADNESS,n)+\" NOT LIKE \"+this.evaluateNodeToWhereClause(e.right,r,i,A.BADNESS,n)+\" ESCAPE '\"+e.escape+\"') \":\" (\"+this.evaluateNodeToWhereClause(e.left,r,i,A.BADNESS,n)+\" NOT LIKE \"+this.evaluateNodeToWhereClause(e.right,r,i,A.BADNESS,n)+\") \";case\"<>\":case\"=\":if(\"column-reference\"===e.left.type&&\"string\"===e.right.type){if(e.left.column.toUpperCase()===this.field.name.toUpperCase()&&void 0!==this.lkp[e.right.value.toString()])return\" (\"+l+\" \"+e.operator+\" \"+this.lkp[e.right.value.toString()].toString()+\") \"}else if(\"column-reference\"===e.right.type&&\"string\"===e.left.type&&e.right.column.toUpperCase()===this.field.name.toUpperCase())return\" (\"+this.lkp[e.right.value.toString()].toString()+\" \"+e.operator+\" \"+l+\") \";return\" (\"+this.evaluateNodeToWhereClause(e.left,r,i,A.BADNESS,n)+\" \"+e.operator+\" \"+this.evaluateNodeToWhereClause(e.right,r,i,A.BADNESS,n)+\") \";case\"<\":case\">\":case\">=\":case\"<=\":case\"*\":case\"-\":case\"+\":case\"/\":case\"||\":return\" (\"+this.evaluateNodeToWhereClause(e.left,r,i,A.BADNESS,n)+\" \"+e.operator+\" \"+this.evaluateNodeToWhereClause(e.right,r,i,A.BADNESS,n)+\") \"}case\"null\":return\"null\";case\"boolean\":return!0===e.value?\"1\":\"0\";case\"string\":return\"'\"+e.value.toString().replace(/'/g,\"''\")+\"'\";case\"timestamp\":case\"date\":return (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.makeDateString)(e.value,r,null);case\"number\":return e.value.toString();case\"current-time\":return (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.makeToday)(\"date\"===e.mode,r);case\"column-reference\":return i&&i.toLowerCase()===e.column.toLowerCase()?\"(\"+l+\")\":e.column;case\"data-type\":return e.value;case\"function\":{const t=this.evaluateNodeToWhereClause(e.args,r,i,A.BADNESS,n);return (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.translateFunctionToDatabaseSpecific)(e.name,t,r)}}throw new _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_3__.SqlError(_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_3__.SqlErrorCodes.UnsupportedSyntax,{node:e.type})}extractValue(e){return this.codefield instanceof _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_9__.WhereClause?this.reverseLkp[this.codefield.calculateValueCompiled(e)]:this.reverseLkp[e.attributes[this.codefield]]}}A.BADNESS=\"_!!!_BAD_LKP_!!!!\";class y extends W{constructor(e,t){super(e),this._sql=t}rewriteSql(e,t){return{rewritten:!0,where:(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.reformulateWithoutField)(e,this.field.name,(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.toWhereClause)(this._sql,_support_shared_js__WEBPACK_IMPORTED_MODULE_6__.FeatureServiceDatabaseType.Standardised),t.getFieldsIndex())}}extractValue(e){return this._sql.calculateValueCompiled(e)}}class D extends _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"]{static findField(e,t){for(const r of e)if(r.name.toLowerCase()===t.toString().toLowerCase())return r;return null}constructor(e){super(e),this._calcFunc=null,this.declaredClass=\"esri.arcade.featureset.actions.Adapted\",this.adaptedFields=[],this._extraFilter=null,this._extraFilter=e.extraFilter,this._parent=e.parentfeatureset,this._maxProcessing=30,this.adaptedFields=e.adaptedFields}_initialiseFeatureSet(){null!==this._parent?(this.geometryType=this._parent.geometryType,this.objectIdField=this._parent.objectIdField,this.globalIdField=this._parent.globalIdField,this.spatialReference=this._parent.spatialReference,this.hasM=this._parent.hasM,this.hasZ=this._parent.hasZ,this.typeIdField=this._parent.typeIdField,this.types=this._parent.types):(this.spatialReference=new _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"]({wkid:4326}),this.objectIdField=\"\",this.globalIdField=\"\",this.geometryType=_support_shared_js__WEBPACK_IMPORTED_MODULE_6__.layerGeometryEsriConstants.point,this.typeIdField=\"\",this.types=null),this.fields=[];for(const e of this.adaptedFields)e.postInitialization(this,this._parent),this.fields.push(e.field)}async _getSet(e){if(null===this._wset){await this._ensureLoaded();let t=null;return t=this._extraFilter?await this._getFilteredSet(\"\",null,null,null,e):await(this._parent?._getSet(e)),this._checkCancelled(e),(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_8__.assertIsSome)(t),this._wset=new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"](t._candidates.slice(0),t._known.slice(0),t._ordered,this._clonePageDefinition(t.pagesDefinition)),this._wset}return this._wset}_isInFeatureSet(e){return (0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_8__.unwrapOrThrow)(this._parent)._isInFeatureSet(e)}async _getFeatures(t,s,a,i){const l=[];-1!==s&&void 0===this._featureCache[s]&&l.push(s);const n=this._maxQueryRate();if(!0===this._checkIfNeedToExpandKnownPage(t,n))return await this._expandPagedSet(t,n,0,0,i),this._getFeatures(t,s,a,i);let h=0;for(let e=t._lastFetchedIndex;e<t._known.length&&(h++,h<=a&&(t._lastFetchedIndex+=1),!(void 0===this._featureCache[t._known[e]]&&(t._known[e]!==s&&l.push(t._known[e]),l.length>=n)));e++);if(0===l.length)return\"success\";t=new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"]([],l,t._ordered,null);const u=Math.min(l.length,a);await(this._parent?._getFeatures(t,-1,u,i)),this._checkCancelled(i);const c=[];for(let e=0;e<u;e++){const t=this._parent?._featureFromCache(l[e]);void 0!==t&&c.push({geometry:t.geometry,attributes:t.attributes,id:l[e]})}for(const o of c){const t=[];for(const e of this.adaptedFields)t[e.field.name]=e.extractValue(o);this._featureCache[o.id]=new _Graphic_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({attributes:t,geometry:(0,_kernel_js__WEBPACK_IMPORTED_MODULE_2__.cloneGeometry)(o.geometry)})}return\"success\"}async _fetchAndRefineFeatures(){throw new _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_3__.FeatureSetError(_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_3__.FeatureSetErrorCodes.NeverReach)}async _getFilteredSet(e,t,r,s,a){let i=!1;const l=this._reformulateWithoutAdaptions(r);i=l.cannot,r=l.where;let n=!1;if(null!==s){n=!0;const e=[];for(const t of this.adaptedFields)if(!(t instanceof E)&&!0===s.scanForField(t.field.name)){if(!(t instanceof x)){s=null,n=!1;break}e.push({field:t.field.name,newfield:t.originalField.name})}s&&e.length>0&&(s=s.replaceFields(e))}null!==r?null!==this._extraFilter&&(r=(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.combine)(this._extraFilter,r)):r=this._extraFilter,await this._ensureLoaded();const h=await (0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_8__.unwrapOrThrow)(this._parent)._getFilteredSet(e,t,r,s,a);let u;return this._checkCancelled(a),u=!0===i?new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"](h._candidates.slice(0).concat(h._known.slice(0)),[],!0===n&&h._ordered,this._clonePageDefinition(h.pagesDefinition)):new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"](h._candidates.slice(0),h._known.slice(0),!0===n&&h._ordered,this._clonePageDefinition(h.pagesDefinition)),u}_reformulateWithoutAdaptions(e){const t={cannot:!1,where:e};if(null!==e)for(const r of this.adaptedFields)if(!0===(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.scanForField)(e,r.field.name)){const s=r.rewriteSql(e,this);if(!0!==s.rewritten){t.cannot=!0,t.where=null;break}t.where=s.where}return t}async _stat(e,t,r,s,a,i,l){let n=!1,o=this._reformulateWithoutAdaptions(t);if(n=o.cannot,t=o.where,o=this._reformulateWithoutAdaptions(a),n=n||o.cannot,null!==(a=o.where)?null!==this._extraFilter&&(a=(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.combine)(this._extraFilter,a)):a=this._extraFilter,!0===n)return null===a&&\"\"===r&&null===s?this._manualStat(e,t,i,l):{calculated:!1};const h=await (0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_8__.unwrapOrThrow)(this._parent)._stat(e,t,r,s,a,i,l);return!1===h.calculated?null===a&&\"\"===r&&null===s?this._manualStat(e,t,i,l):{calculated:!1}:h}async _canDoAggregates(e,t,r,s,a){if(null===this._parent)return!1;for(let n=0;n<e.length;n++)for(const t of this.adaptedFields)if(e[n].toLowerCase()===t.field.name.toLowerCase()&&!(t instanceof E))return!1;const i=[];for(let n=0;n<t.length;n++){const e=t[n];if(null!==e.workingexpr){const t=this._reformulateWithoutAdaptions(e.workingexpr);if(t.cannot)return!1;const r=e.clone();r.workingexpr=t.where,i.push(r)}else i.push(e)}const l=this._reformulateWithoutAdaptions(a);return!l.cannot&&(null!==(a=l.where)?null!==this._extraFilter&&(a=(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.combine)(this._extraFilter,a)):a=this._extraFilter,this._parent._canDoAggregates(e,i,r,s,a))}async _getAggregatePagesDataSourceDefinition(e,t,r,s,a,n,o){if(null===this._parent)throw new _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_3__.FeatureSetError(_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_3__.FeatureSetErrorCodes.NeverReach);const h=[];for(let c=0;c<t.length;c++){const e=t[c];if(null!==e.workingexpr){const t=this._reformulateWithoutAdaptions(e.workingexpr);if(t.cannot)throw new _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_3__.FeatureSetError(_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_3__.FeatureSetErrorCodes.NeverReach);const r=e.clone();r.workingexpr=t.where,h.push(r)}else h.push(e)}const u=this._reformulateWithoutAdaptions(a);if(u.cannot)throw new _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_3__.FeatureSetError(_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_3__.FeatureSetErrorCodes.NeverReach);return null!==(a=u.where)?null!==this._extraFilter&&(a=(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.combine)(this._extraFilter,a)):a=this._extraFilter,this._parent._getAggregatePagesDataSourceDefinition(e,h,r,s,a,n,o)}}\n\n\n//# sourceURL=webpack://arcgis-starter/./node_modules/@arcgis/core/arcade/featureset/actions/Adapted.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/arcade/featureset/actions/AttributeFilter.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/arcade/featureset/actions/AttributeFilter.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ c)\n/* harmony export */ });\n/* harmony import */ var _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../support/errorsupport.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/errorsupport.js\");\n/* harmony import */ var _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../support/FeatureSet.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/FeatureSet.js\");\n/* harmony import */ var _support_IdSet_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../support/IdSet.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/IdSet.js\");\n/* harmony import */ var _support_shared_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../support/shared.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/shared.js\");\n/* harmony import */ var _support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../support/sqlUtils.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/sqlUtils.js\");\n/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/promiseUtils.js */ \"./node_modules/@arcgis/core/core/promiseUtils.js\");\n/* harmony import */ var _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/sql/WhereClause.js */ \"./node_modules/@arcgis/core/core/sql/WhereClause.js\");\n/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../geometry/SpatialReference.js */ \"./node_modules/@arcgis/core/geometry/SpatialReference.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nclass c extends _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]{constructor(e){super(e),this.declaredClass=\"esri.arcade.featureset.actions.AttributeFilter\",this._maxProcessing=1e3,this._parent=e.parentfeatureset,e.whereclause instanceof _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_6__.WhereClause?(this._whereclause=e.whereclause,this._whereClauseFunction=null):(this._whereClauseFunction=e.whereclause,this._whereclause=null)}_initialiseFeatureSet(){null!==this._parent?(this.fields=this._parent.fields.slice(0),this.geometryType=this._parent.geometryType,this.objectIdField=this._parent.objectIdField,this.globalIdField=this._parent.globalIdField,this.spatialReference=this._parent.spatialReference,this.hasM=this._parent.hasM,this.hasZ=this._parent.hasZ,this.typeIdField=this._parent.typeIdField,this.types=this._parent.types):(this.fields=[],this.typeIdField=\"\",this.objectIdField=\"\",this.globalIdField=\"\",this.spatialReference=new _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"]({wkid:4326}),this.geometryType=_support_shared_js__WEBPACK_IMPORTED_MODULE_3__.layerGeometryEsriConstants.point)}async _getSet(e){if(null===this._wset){await this._ensureLoaded();const t=await this._parent._getFilteredSet(\"\",null,this._whereclause,null,e);return this._checkCancelled(e),null!==this._whereClauseFunction?this._wset=new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"](t._candidates.slice(0).concat(t._known.slice(0)),[],t._ordered,this._clonePageDefinition(t.pagesDefinition)):this._wset=new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"](t._candidates.slice(0),t._known.slice(0),t._ordered,this._clonePageDefinition(t.pagesDefinition)),this._wset}return this._wset}_isInFeatureSet(e){let t=this._parent?._isInFeatureSet(e);return t===_support_shared_js__WEBPACK_IMPORTED_MODULE_3__.IdState.NotInFeatureSet?t:(t=this._idstates[e],void 0===t?_support_shared_js__WEBPACK_IMPORTED_MODULE_3__.IdState.Unknown:t)}_getFeature(e,t,s){return this._parent._getFeature(e,t,s)}_getFeatures(e,t,s,i){return this._parent._getFeatures(e,t,s,i)}_featureFromCache(e){return this._parent._featureFromCache(e)}executeWhereClause(e){return this._whereclause?.testFeature(e)??!1}async executeWhereClauseDeferred(e){if(null!==this._whereClauseFunction){const t=this._whereClauseFunction(e);return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__.isPromiseLike)(t),t}return this.executeWhereClause(e)}async _fetchAndRefineFeatures(e,t,s){const r=new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"]([],e,!1,null),a=Math.min(t,e.length);if(await(this._parent?._getFeatures(r,-1,a,s)),this._checkCancelled(s),null==this._whereClauseFunction){for(let t=0;t<a;t++){const s=this._parent?._featureFromCache(e[t]);!0===this.executeWhereClause(s)?this._idstates[e[t]]=_support_shared_js__WEBPACK_IMPORTED_MODULE_3__.IdState.InFeatureSet:this._idstates[e[t]]=_support_shared_js__WEBPACK_IMPORTED_MODULE_3__.IdState.NotInFeatureSet}return\"success\"}const l=[];for(let i=0;i<a;i++){const t=this._parent?._featureFromCache(e[i]);l.push(await this.executeWhereClauseDeferred(t))}for(let i=0;i<t;i++)!0===l[i]?this._idstates[e[i]]=_support_shared_js__WEBPACK_IMPORTED_MODULE_3__.IdState.InFeatureSet:this._idstates[e[i]]=_support_shared_js__WEBPACK_IMPORTED_MODULE_3__.IdState.NotInFeatureSet;return\"success\"}async _getFilteredSet(e,t,s,r,n){null!==this._whereClauseFunction||(null!==s?null!==this._whereclause&&(s=(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_4__.combine)(this._whereclause,s)):s=this._whereclause),await this._ensureLoaded();const l=await this._parent._getFilteredSet(e,t,s,r,n);let h;return this._checkCancelled(n),h=null!==this._whereClauseFunction?new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"](l._candidates.slice(0).concat(l._known.slice(0)),[],l._ordered,this._clonePageDefinition(l.pagesDefinition)):new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"](l._candidates.slice(0),l._known.slice(0),l._ordered,this._clonePageDefinition(l.pagesDefinition)),h}async _stat(e,t,s,i,r,n,l){if(null!==this._whereClauseFunction)return null===r&&\"\"===s&&null===i?this._manualStat(e,t,n,l):{calculated:!1};let h=this._whereclause;null!==r&&null!==this._whereclause&&(h=(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_4__.combine)(this._whereclause,r));const u=await this._parent._stat(e,t,s,i,h,n,l);return!1===u.calculated?null===r&&\"\"===s&&null===i?this._manualStat(e,t,n,l):{calculated:!1}:u}async _canDoAggregates(e,t,s,i,r){return null===this._whereClauseFunction&&(null!==r?null!==this._whereclause&&(r=(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_4__.combine)(this._whereclause,r)):r=this._whereclause,null!==this._parent&&this._parent._canDoAggregates(e,t,s,i,r))}async _getAggregatePagesDataSourceDefinition(s,i,r,n,l,h,u){if(null===this._parent)throw new _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.FeatureSetError(_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.FeatureSetErrorCodes.NeverReach);return null!==l?null!==this._whereclause&&(l=(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_4__.combine)(this._whereclause,l)):l=this._whereclause,this._parent._getAggregatePagesDataSourceDefinition(s,i,r,n,l,h,u)}static registerAction(){_support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]._featuresetFunctions.filter=function(e){if(\"function\"==typeof e)return new c({parentfeatureset:this,whereclause:e});let t=null;return e instanceof _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_6__.WhereClause&&(t=e),new c({parentfeatureset:this,whereclause:t})}}}\n\n\n//# sourceURL=webpack://arcgis-starter/./node_modules/@arcgis/core/arcade/featureset/actions/AttributeFilter.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/arcade/featureset/actions/GroupBy.js":
/*!************************************************************************!*\
  !*** ./node_modules/@arcgis/core/arcade/featureset/actions/GroupBy.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ C)\n/* harmony export */ });\n/* harmony import */ var _Graphic_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../Graphic.js */ \"./node_modules/@arcgis/core/Graphic.js\");\n/* harmony import */ var _chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../chunks/languageUtils.js */ \"./node_modules/@arcgis/core/chunks/languageUtils.js\");\n/* harmony import */ var _Adapted_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Adapted.js */ \"./node_modules/@arcgis/core/arcade/featureset/actions/Adapted.js\");\n/* harmony import */ var _AttributeFilter_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./AttributeFilter.js */ \"./node_modules/@arcgis/core/arcade/featureset/actions/AttributeFilter.js\");\n/* harmony import */ var _OrderBy_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./OrderBy.js */ \"./node_modules/@arcgis/core/arcade/featureset/actions/OrderBy.js\");\n/* harmony import */ var _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../support/FeatureSet.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/FeatureSet.js\");\n/* harmony import */ var _support_IdSet_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../support/IdSet.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/IdSet.js\");\n/* harmony import */ var _support_OrderbyClause_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../support/OrderbyClause.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/OrderbyClause.js\");\n/* harmony import */ var _support_shared_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../support/shared.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/shared.js\");\n/* harmony import */ var _support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../support/sqlUtils.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/sqlUtils.js\");\n/* harmony import */ var _support_stats_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../support/stats.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/stats.js\");\n/* harmony import */ var _support_StatsField_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../support/StatsField.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/StatsField.js\");\n/* harmony import */ var _core_MD5_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../core/MD5.js */ \"./node_modules/@arcgis/core/core/MD5.js\");\n/* harmony import */ var _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../core/sql/WhereClause.js */ \"./node_modules/@arcgis/core/core/sql/WhereClause.js\");\n/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../geometry/SpatialReference.js */ \"./node_modules/@arcgis/core/geometry/SpatialReference.js\");\n/* harmony import */ var _layers_support_Field_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../layers/support/Field.js */ \"./node_modules/@arcgis/core/layers/support/Field.js\");\n/* harmony import */ var _layers_support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../layers/support/FieldsIndex.js */ \"./node_modules/@arcgis/core/layers/support/FieldsIndex.js\");\n/* harmony import */ var _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../support/errorsupport.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/errorsupport.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nfunction j(e){if(!e)return\"COUNT\";switch(e.toLowerCase()){case\"max\":return\"MAX\";case\"var\":case\"variance\":return\"VAR\";case\"avg\":case\"average\":case\"mean\":return\"AVG\";case\"min\":return\"MIN\";case\"sum\":return\"SUM\";case\"stdev\":case\"stddev\":return\"STDDEV\";case\"count\":return\"COUNT\"}return\"COUNT\"}class C extends _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"]{constructor(e){super(e),this._decodedStatsfield=[],this._decodedGroupbyfield=[],this._candosimplegroupby=!0,this.phsyicalgroupbyfields=[],this.objectIdField=\"ROW__ID\",this._internalObjectIdField=\"ROW__ID\",this._adaptedFields=[],this.declaredClass=\"esri.arcade.featureset.actions.Aggregate\",this._uniqueIds=1,this._maxQuery=10,this._maxProcessing=10,this._parent=e.parentfeatureset,this._config=e}isTable(){return!0}async _getSet(e){if(null===this._wset){const t=await this._getFilteredSet(\"\",null,null,null,e);return this._wset=t,this._wset}return this._wset}_isInFeatureSet(){return _support_shared_js__WEBPACK_IMPORTED_MODULE_8__.IdState.InFeatureSet}_nextUniqueName(e){for(;1===e[\"T\"+this._uniqueIds.toString()];)this._uniqueIds++;const t=\"T\"+this._uniqueIds.toString();return e[t]=1,t}_convertToEsriFieldType(e){return e}_initialiseFeatureSet(){const e={};let t=!1,n=1;const r=this._parent?this._parent.getFieldsIndex():new _layers_support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_16__[\"default\"]([]);for(this.objectIdField=\"ROW__ID\",this.globalIdField=\"\";!1===t;){let e=!1;for(let t=0;t<this._config.groupbyfields.length;t++)if(this._config.groupbyfields[t].name.toLowerCase()===this.objectIdField.toLowerCase()){e=!0;break}if(!1===e)for(let t=0;t<this._config.statsfields.length;t++)if(this._config.statsfields[t].name.toLowerCase()===this.objectIdField.toLowerCase()){e=!0;break}!1===e?t=!0:(this.objectIdField=\"ROW__ID\"+n.toString(),n++)}for(const i of this._config.statsfields){const e=new _support_StatsField_js__WEBPACK_IMPORTED_MODULE_11__[\"default\"];e.field=i.name,e.tofieldname=i.name,e.workingexpr=i.expression instanceof _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_13__.WhereClause?i.expression:_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_13__.WhereClause.create(i.expression,r),e.typeofstat=j(i.statistic),this._decodedStatsfield.push(e)}this._decodedGroupbyfield=[];for(const i of this._config.groupbyfields){const e={name:i.name,singlefield:null,tofieldname:i.name,expression:i.expression instanceof _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_13__.WhereClause?i.expression:_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_13__.WhereClause.create(i.expression,r)};this._decodedGroupbyfield.push(e)}if(null!==this._parent){this.geometryType=this._parent.geometryType,this.spatialReference=this._parent.spatialReference,this.hasM=this._parent.hasM,this.hasZ=this._parent.hasZ,this.typeIdField=\"\";for(const t of this._parent.fields)e[t.name.toUpperCase()]=1;this.types=null}else this.geometryType=_support_shared_js__WEBPACK_IMPORTED_MODULE_8__.layerGeometryEsriConstants.point,this.typeIdField=\"\",this.types=null,this.spatialReference=new _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_14__[\"default\"]({wkid:4326});this.fields=[];const a=new _support_StatsField_js__WEBPACK_IMPORTED_MODULE_11__[\"default\"];a.field=this._nextUniqueName(e),a.tofieldname=this.objectIdField,a.workingexpr=_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_13__.WhereClause.create(this._parent.objectIdField,this._parent.getFieldsIndex()),a.typeofstat=\"MIN\",this._decodedStatsfield.push(a);for(const s of this._decodedGroupbyfield){const t=new _layers_support_Field_js__WEBPACK_IMPORTED_MODULE_15__[\"default\"];if(s.name=this._nextUniqueName(e),t.name=s.tofieldname,t.alias=t.name,(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_9__.isSingleField)(s.expression)){const e=this._parent.getField((0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_9__.toWhereClause)(s.expression,_support_shared_js__WEBPACK_IMPORTED_MODULE_8__.FeatureServiceDatabaseType.Standardised));if(!e)throw new _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_17__.FeatureSetError(_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_17__.FeatureSetErrorCodes.AggregationFieldNotFound);s.name=e.name,s.singlefield=e.name,this.phsyicalgroupbyfields.push(e.name),t.type=e.type}else{t.type=this._convertToEsriFieldType((0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_9__.predictType)(s.expression,this._parent.fields));const e=new _layers_support_Field_js__WEBPACK_IMPORTED_MODULE_15__[\"default\"];e.name=s.name,e.alias=e.name,this.phsyicalgroupbyfields.push(s.name),this._adaptedFields.push(new _Adapted_js__WEBPACK_IMPORTED_MODULE_2__.SqlExpressionAdapted(e,s.expression)),this._candosimplegroupby=!1}this.fields.push(t)}if(this._adaptedFields.length>0)for(const i of this._parent.fields)this._adaptedFields.push(new _Adapted_js__WEBPACK_IMPORTED_MODULE_2__.OriginalField(i));for(let i=0;i<this._decodedStatsfield.length;i++){const t=new _layers_support_Field_js__WEBPACK_IMPORTED_MODULE_15__[\"default\"];let s=null;const n=this._decodedStatsfield[i];n.field=this._nextUniqueName(e),n.tofieldname===this.objectIdField&&(this._internalObjectIdField=n.field),t.name=n.tofieldname,t.alias=t.name;const r=null!==n.workingexpr&&(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_9__.isSingleField)(n.workingexpr)?(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_9__.toWhereClause)(n.workingexpr,_support_shared_js__WEBPACK_IMPORTED_MODULE_8__.FeatureServiceDatabaseType.Standardised):\"\";switch(this._decodedStatsfield[i].typeofstat){case\"SUM\":if(\"\"!==r){if(s=this._parent.getField(r),!s)throw new _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_17__.FeatureSetError(_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_17__.FeatureSetErrorCodes.AggregationFieldNotFound);t.type=s.type}else t.type=\"double\";break;case\"MIN\":case\"MAX\":if(\"\"!==r){if(s=this._parent.getField(r),!s)throw new _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_17__.FeatureSetError(_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_17__.FeatureSetErrorCodes.AggregationFieldNotFound);t.type=s.type}else t.type=\"double\";break;case\"COUNT\":t.type=\"integer\";break;case\"STDDEV\":case\"VAR\":case\"AVG\":if(\"\"!==r&&(s=this._parent.getField(r),!s))throw new _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_17__.FeatureSetError(_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_17__.FeatureSetErrorCodes.AggregationFieldNotFound);t.type=\"double\"}this.fields.push(t)}}async _canDoAggregates(){return!1}async _getFeatures(e,t,i,s){-1!==t&&this._featureCache[t];const n=this._maxQuery;return!0===this._checkIfNeedToExpandKnownPage(e,n)?(await this._expandPagedSet(e,n,0,0,s),this._getFeatures(e,t,i,s)):\"success\"}async _getFilteredSet(e,t,i,s,l){if(\"\"!==e)return new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"]([],[],!0,null);let u=null;const f={ordered:!1,nowhereclause:!1};if(await this._ensureLoaded(),null!==i)for(let n=0;n<this._decodedStatsfield.length;n++)if(!0===(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_9__.scanForField)(i,this._decodedStatsfield[n].tofieldname)){f.nowhereclause=!0,i=null;break}if(null!==s){f.ordered=!0;for(let e=0;e<this._decodedStatsfield.length;e++)if(!0===s.scanForField(this._decodedStatsfield[e].tofieldname)){s=null,f.ordered=!1;break}if(null!==s)for(const e of this._decodedGroupbyfield)if(null===e.singlefield&&!0===s.scanForField(e.tofieldname)){s=null,f.ordered=!1;break}}if(!1!==this._candosimplegroupby&&await this._parent._canDoAggregates(this.phsyicalgroupbyfields,this._decodedStatsfield,\"\",null,null)){let e=null;i&&(e=this._reformulateWhereClauseWithoutGroupByFields(i));let t=null;s&&(t=this._reformulateOrderClauseWithoutGroupByFields(s));const n=await this._parent._getAggregatePagesDataSourceDefinition(this.phsyicalgroupbyfields,this._decodedStatsfield,\"\",null,e,t,this._internalObjectIdField);return this._checkCancelled(l),u=!0===f.nowhereclause?new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"](n._candidates.slice(0).concat(n._known.slice(0)),[],!0===f.ordered&&n._ordered,this._clonePageDefinition(n.pagesDefinition)):new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"](n._candidates.slice(0),n._known.slice(0),!0===f.ordered&&n._ordered,this._clonePageDefinition(n.pagesDefinition)),u}let c=this._parent;if(this._adaptedFields.length>0&&(c=new _Adapted_js__WEBPACK_IMPORTED_MODULE_2__.AdaptedFeatureSet({parentfeatureset:this._parent,adaptedFields:this._adaptedFields,extraFilter:null})),!0===f.nowhereclause)u=new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"]([\"GETPAGES\"],[],!1,{aggregatefeaturesetpagedefinition:!0,resultOffset:0,resultRecordCount:this._maxQuery,internal:{fullyResolved:!1,workingItem:null,type:\"manual\",iterator:null,set:[],subfeatureset:new _OrderBy_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"]({parentfeatureset:c,orderbyclause:new _support_OrderbyClause_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"](this.phsyicalgroupbyfields.join(\",\")+\",\"+this._parent.objectIdField+\" ASC\")})}});else{let e=c;if(null!==i){let t=null;i&&(t=this._reformulateWhereClauseWithoutGroupByFields(i)),e=new _AttributeFilter_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({parentfeatureset:e,whereclause:t})}u=new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"]([\"GETPAGES\"],[],!1,{aggregatefeaturesetpagedefinition:!0,resultOffset:0,resultRecordCount:this._maxQuery,internal:{fullyResolved:!1,workingItem:null,type:\"manual\",iterator:null,set:[],subfeatureset:new _OrderBy_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"]({parentfeatureset:e,orderbyclause:new _support_OrderbyClause_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"](this.phsyicalgroupbyfields.join(\",\")+\",\"+this._parent.objectIdField+\" ASC\")})}})}return u}_reformulateWhereClauseWithoutStatsFields(e){for(const t of this._decodedStatsfield)e=(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_9__.reformulateWithoutField)(e,t.tofieldname,(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_9__.toWhereClause)(t.workingexpr,_support_shared_js__WEBPACK_IMPORTED_MODULE_8__.FeatureServiceDatabaseType.Standardised),this._parent.getFieldsIndex());return e}_reformulateWhereClauseWithoutGroupByFields(e){for(const t of this._decodedGroupbyfield)t.tofieldname!==t.name&&(e=(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_9__.reformulateWithoutField)(e,t.tofieldname,(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_9__.toWhereClause)(t.expression,_support_shared_js__WEBPACK_IMPORTED_MODULE_8__.FeatureServiceDatabaseType.Standardised),this._parent.getFieldsIndex()));return e}_reformulateOrderClauseWithoutGroupByFields(e){const t=[];for(const i of this._decodedGroupbyfield)i.tofieldname!==i.name&&t.push({field:i.tofieldname,newfield:i.name});return t.length>0?e.replaceFields(t):e}_clonePageDefinition(e){return null===e?null:!0===e.aggregatefeaturesetpagedefinition?{aggregatefeaturesetpagedefinition:!0,resultRecordCount:e.resultRecordCount,resultOffset:e.resultOffset,internal:e.internal}:this._parent._clonePageDefinition(e)}async _refineSetBlock(e,t,i){if(!0===this._checkIfNeedToExpandCandidatePage(e,this._maxQuery))return await this._expandPagedSet(e,this._maxQuery,0,0,i),this._refineSetBlock(e,t,i);this._checkCancelled(i);const s=e._candidates.length;this._refineKnowns(e,t);e._candidates.length;return e._candidates.length,e}_expandPagedSet(e,t,i,s,n){return this._expandPagedSetFeatureSet(e,t,i,s,n)}async _getPhysicalPage(t,i,s){if(!0===t.pagesDefinition.aggregatefeaturesetpagedefinition)return this._sequentialGetPhysicalItem(t,t.pagesDefinition.resultRecordCount,s,[]);const n=await this._getAgregagtePhysicalPage(t,i,s);for(const r of n){const t={geometry:r.geometry,attributes:{}};for(const e of this._decodedGroupbyfield)t.attributes[e.tofieldname]=r.attributes[e.name];for(const e of this._decodedStatsfield)t.attributes[e.tofieldname]=r.attributes[e.field];this._featureCache[t.attributes[this.objectIdField]]=new _Graphic_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"](t)}return n.length}_sequentialGetPhysicalItem(e,t,i,s){return new Promise(((n,r)=>{null===e.pagesDefinition.internal.iterator&&(e.pagesDefinition.internal.iterator=e.pagesDefinition.internal.subfeatureset.iterator(i)),!0===e.pagesDefinition.internal.fullyResolved||0===t?n(s.length):this._nextAggregateItem(e,t,i,s,(r=>{null===r?n(s.length):(t-=1,n(this._sequentialGetPhysicalItem(e,t,i,s)))}),r)}))}_nextAggregateItem(e,i,s,n,r,a){try{(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_1__.W)(e.pagesDefinition.internal.iterator.next()).then((t=>{if(null===t)if(null!==e.pagesDefinition.internal.workingItem){const t=this._calculateAndAppendAggregateItem(e.pagesDefinition.internal.workingItem);n.push(t),e.pagesDefinition.internal.workingItem=null,e.pagesDefinition.internal.set.push(t.attributes[this.objectIdField]),e.pagesDefinition.internal.fullyResolved=!0,r(null)}else e.pagesDefinition.internal.fullyResolved=!0,r(null);else{const l=this._generateAggregateHash(t);if(null===e.pagesDefinition.internal.workingItem)e.pagesDefinition.internal.workingItem={features:[t],id:l};else{if(l!==e.pagesDefinition.internal.workingItem.id){const s=this._calculateAndAppendAggregateItem(e.pagesDefinition.internal.workingItem);return n.push(s),e.pagesDefinition.internal.workingItem=null,e.pagesDefinition.internal.set.push(s.attributes[this.objectIdField]),i-=1,e.pagesDefinition.internal.workingItem={features:[t],id:l},void r(s)}e.pagesDefinition.internal.workingItem.features.push(t)}this._nextAggregateItem(e,i,s,n,r,a)}}),a)}catch(l){a(l)}}_calculateFieldStat(e,t,i){const s=[];for(let n=0;n<e.features.length;n++)if(null!==t.workingexpr){const i=t.workingexpr.calculateValue(e.features[n]);null!==i&&s.push(i)}else s.push(null);switch(t.typeofstat){case\"MIN\":i.attributes[t.tofieldname]=(0,_support_stats_js__WEBPACK_IMPORTED_MODULE_10__.calculateStat)(\"min\",s,-1);break;case\"MAX\":i.attributes[t.tofieldname]=(0,_support_stats_js__WEBPACK_IMPORTED_MODULE_10__.calculateStat)(\"max\",s,-1);break;case\"SUM\":i.attributes[t.tofieldname]=(0,_support_stats_js__WEBPACK_IMPORTED_MODULE_10__.calculateStat)(\"sum\",s,-1);break;case\"COUNT\":i.attributes[t.tofieldname]=s.length;break;case\"VAR\":i.attributes[t.tofieldname]=(0,_support_stats_js__WEBPACK_IMPORTED_MODULE_10__.calculateStat)(\"var\",s,-1);break;case\"STDDEV\":i.attributes[t.tofieldname]=(0,_support_stats_js__WEBPACK_IMPORTED_MODULE_10__.calculateStat)(\"stddev\",s,-1);break;case\"AVG\":i.attributes[t.tofieldname]=(0,_support_stats_js__WEBPACK_IMPORTED_MODULE_10__.calculateStat)(\"avg\",s,-1)}return!0}_calculateAndAppendAggregateItem(t){const i={attributes:{},geometry:null};for(const e of this._decodedGroupbyfield){const s=e.singlefield?t.features[0].attributes[e.singlefield]:e.expression.calculateValue(t.features[0]);i.attributes[e.tofieldname]=s}for(const e of this._decodedStatsfield)this._calculateFieldStat(t,e,i);const s=[];for(let e=0;e<this._decodedStatsfield.length;e++)s.push(this._calculateFieldStat(t,this._decodedStatsfield[e],i));return this._featureCache[i.attributes[this.objectIdField]]=new _Graphic_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({attributes:i.attributes,geometry:i.geometry}),i}_generateAggregateHash(e){let t=\"\";for(const i of this._decodedGroupbyfield){const s=i.singlefield?e.attributes[i.singlefield]:i.expression.calculateValue(e);t+=null==s?\":\":\":\"+s.toString()}return (0,_core_MD5_js__WEBPACK_IMPORTED_MODULE_12__.createMD5Hash)(t,_core_MD5_js__WEBPACK_IMPORTED_MODULE_12__.outputTypes.String)}async _stat(){return{calculated:!1}}async getFeatureByObjectId(){return null}static registerAction(){_support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"]._featuresetFunctions.groupby=function(e,t){return new C({parentfeatureset:this,groupbyfields:e,statsfields:t})}}}\n\n\n//# sourceURL=webpack://arcgis-starter/./node_modules/@arcgis/core/arcade/featureset/actions/GroupBy.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/arcade/featureset/actions/OrderBy.js":
/*!************************************************************************!*\
  !*** ./node_modules/@arcgis/core/arcade/featureset/actions/OrderBy.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ a)\n/* harmony export */ });\n/* harmony import */ var _chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../chunks/languageUtils.js */ \"./node_modules/@arcgis/core/chunks/languageUtils.js\");\n/* harmony import */ var _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../support/errorsupport.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/errorsupport.js\");\n/* harmony import */ var _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../support/FeatureSet.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/FeatureSet.js\");\n/* harmony import */ var _support_IdSet_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../support/IdSet.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/IdSet.js\");\n/* harmony import */ var _support_OrderbyClause_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../support/OrderbyClause.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/OrderbyClause.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nclass a extends _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"]{constructor(e){super(e),this._orderbyclause=null,this.declaredClass=\"esri.arcade.featureset.actions.OrderBy\",this._maxProcessing=100,this._orderbyclause=e.orderbyclause,this._parent=e.parentfeatureset}async _getSet(e){if(null===this._wset){await this._ensureLoaded();const t=await this._getFilteredSet(\"\",null,null,this._orderbyclause,e);return this._checkCancelled(e),this._wset=t,this._wset}return this._wset}async manualOrderSet(e,t){const r=await this.getIdColumnDictionary(e,[],-1,t);this._orderbyclause?.order(r);const n=new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"]([],[],!0,null);for(let s=0;s<r.length;s++)n._known.push(r[s].id);return n}async getIdColumnDictionary(t,r,n,s){if(n<t._known.length-1){const i=this._maxQueryRate();if(\"GETPAGES\"===t._known[n+1])return await (0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_0__.W)(this._parent._expandPagedSet(t,i,0,0,s)),this.getIdColumnDictionary(t,r,n,s);let a=n+1;const o=[];for(;a<t._known.length&&\"GETPAGES\"!==t._known[a];)o.push(t._known[a]),a++;n+=o.length;const u=await (0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_0__.W)(this._parent._getFeatureBatch(o,s));this._checkCancelled(s);for(const e of u)r.push({id:e.attributes[this.objectIdField],feature:e});return this.getIdColumnDictionary(t,r,n,s)}return t._candidates.length>0?(await (0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_0__.W)(this._refineSetBlock(t,this._maxProcessingRate(),s)),this._checkCancelled(s),this.getIdColumnDictionary(t,r,n,s)):r}_isInFeatureSet(e){return this._parent._isInFeatureSet(e)}_getFeatures(e,t,r,n){return this._parent._getFeatures(e,t,r,n)}_featureFromCache(e){if(void 0===this._featureCache[e]){const t=this._parent._featureFromCache(e);if(void 0===t)return;return null===t?null:(this._featureCache[e]=t,t)}return this._featureCache[e]}async _fetchAndRefineFeatures(){throw new _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_1__.FeatureSetError(_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_1__.FeatureSetErrorCodes.NeverReach)}async _getFilteredSet(e,t,r,n,i){await this._ensureLoaded();const a=await this._parent._getFilteredSet(e,t,r,null===n?this._orderbyclause:n,i);this._checkCancelled(i);const o=new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"](a._candidates.slice(0),a._known.slice(0),a._ordered,this._clonePageDefinition(a.pagesDefinition));let u=!0;if(a._candidates.length>0&&(u=!1),!1===o._ordered){let e=await this.manualOrderSet(o,i);return!1===u&&(null===t&&null===r||(e=new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"](e._candidates.slice(0).concat(e._known.slice(0)),[],e._ordered,this._clonePageDefinition(e.pagesDefinition)))),e}return o}static registerAction(){_support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"]._featuresetFunctions.orderBy=function(e){return\"\"===e?this:new a({parentfeatureset:this,orderbyclause:new _support_OrderbyClause_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"](e)})}}}\n\n\n//# sourceURL=webpack://arcgis-starter/./node_modules/@arcgis/core/arcade/featureset/actions/OrderBy.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/arcade/featureset/actions/Top.js":
/*!********************************************************************!*\
  !*** ./node_modules/@arcgis/core/arcade/featureset/actions/Top.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ a)\n/* harmony export */ });\n/* harmony import */ var _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../support/errorsupport.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/errorsupport.js\");\n/* harmony import */ var _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../support/FeatureSet.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/FeatureSet.js\");\n/* harmony import */ var _support_IdSet_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../support/IdSet.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/IdSet.js\");\n/* harmony import */ var _support_shared_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../support/shared.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/shared.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nclass a extends _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]{constructor(t){super(t),this._topnum=0,this.declaredClass=\"esri.arcade.featureset.actions.Top\",this._countedin=0,this._maxProcessing=100,this._topnum=t.topnum,this._parent=t.parentfeatureset}async _getSet(t){if(null===this._wset){await this._ensureLoaded();const e=await this._parent._getSet(t);return this._wset=new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"](e._candidates.slice(0),e._known.slice(0),!1,this._clonePageDefinition(e.pagesDefinition)),this._setKnownLength(this._wset)>this._topnum&&(this._wset._known=this._wset._known.slice(0,this._topnum)),this._setKnownLength(this._wset)>=this._topnum&&(this._wset._candidates=[]),this._wset}return this._wset}_setKnownLength(t){return t._known.length>0&&\"GETPAGES\"===t._known[t._known.length-1]?t._known.length-1:t._known.length}_isInFeatureSet(t){const e=this._parent._isInFeatureSet(t);if(e===_support_shared_js__WEBPACK_IMPORTED_MODULE_3__.IdState.NotInFeatureSet)return e;const n=this._idstates[t];return n===_support_shared_js__WEBPACK_IMPORTED_MODULE_3__.IdState.InFeatureSet||n===_support_shared_js__WEBPACK_IMPORTED_MODULE_3__.IdState.NotInFeatureSet?n:e===_support_shared_js__WEBPACK_IMPORTED_MODULE_3__.IdState.InFeatureSet&&void 0===n?this._countedin<this._topnum?(this._idstates[t]=_support_shared_js__WEBPACK_IMPORTED_MODULE_3__.IdState.InFeatureSet,this._countedin++,_support_shared_js__WEBPACK_IMPORTED_MODULE_3__.IdState.InFeatureSet):(this._idstates[t]=_support_shared_js__WEBPACK_IMPORTED_MODULE_3__.IdState.NotInFeatureSet,_support_shared_js__WEBPACK_IMPORTED_MODULE_3__.IdState.NotInFeatureSet):_support_shared_js__WEBPACK_IMPORTED_MODULE_3__.IdState.Unknown}async _expandPagedSet(n,s,i,a,o){if(null===this._parent)throw new _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.FeatureSetError(_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.FeatureSetErrorCodes.NotImplemented);if(s>this._topnum&&(s=this._topnum),this._countedin>=this._topnum&&n.pagesDefinition.internal.set.length<=n.pagesDefinition.resultOffset){let t=n._known.length;return t>0&&\"GETPAGES\"===n._known[t-1]&&(n._known.length=t-1),t=n._candidates.length,t>0&&\"GETPAGES\"===n._candidates[t-1]&&(n._candidates.length=t-1),\"success\"}const r=await this._parent._expandPagedSet(n,s,i,a,o);return this._setKnownLength(n)>this._topnum&&(n._known.length=this._topnum),this._setKnownLength(n)>=this._topnum&&(n._candidates.length=0),r}async _getFeatures(t,e,n,i){const a=[],o=this._maxQueryRate();if(!0===this._checkIfNeedToExpandKnownPage(t,o))return await this._expandPagedSet(t,o,0,0,i),this._getFeatures(t,e,n,i);-1!==e&&void 0===this._featureCache[e]&&a.push(e);let r=0;for(let s=t._lastFetchedIndex;s<t._known.length&&(r++,r<=n&&(t._lastFetchedIndex+=1),!(void 0===this._featureCache[t._known[s]]&&(t._known[s]!==e&&a.push(t._known[s]),a.length>o)));s++);if(0===a.length)return\"success\";const _=new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"]([],a,!1,null),h=Math.min(a.length,n);await this._parent._getFeatures(_,-1,h,i);for(let s=0;s<h;s++){const t=this._parent._featureFromCache(a[s]);void 0!==t&&(this._featureCache[a[s]]=t)}return\"success\"}async _getFilteredSet(t,e,n,i,a){await this._ensureLoaded();const o=await this._getSet(a);return new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"](o._candidates.slice(0).concat(o._known.slice(0)),[],!1,this._clonePageDefinition(o.pagesDefinition))}_refineKnowns(t,e){let n=0,s=null;const a=[];for(let o=0;o<t._candidates.length;o++){const r=this._isInFeatureSet(t._candidates[o]);if(r===_support_shared_js__WEBPACK_IMPORTED_MODULE_3__.IdState.InFeatureSet){if(t._known.push(t._candidates[o]),n+=1,null===s?s={start:o,end:o}:s.end===o-1?s.end=o:(a.push(s),s={start:o,end:o}),t._known.length>=this._topnum)break}else if(r===_support_shared_js__WEBPACK_IMPORTED_MODULE_3__.IdState.NotInFeatureSet)null===s?s={start:o,end:o}:s.end===o-1?s.end=o:(a.push(s),s={start:o,end:o}),n+=1;else if(r===_support_shared_js__WEBPACK_IMPORTED_MODULE_3__.IdState.Unknown)break;if(n>=e)break}null!==s&&a.push(s);for(let i=a.length-1;i>=0;i--)t._candidates.splice(a[i].start,a[i].end-a[i].start+1);this._setKnownLength(t)>this._topnum&&(t._known=t._known.slice(0,this._topnum)),this._setKnownLength(t)>=this._topnum&&(t._candidates=[])}async _stat(){return{calculated:!1}}async _canDoAggregates(){return!1}static registerAction(){_support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]._featuresetFunctions.top=function(t){return new a({parentfeatureset:this,topnum:t})}}}\n\n\n//# sourceURL=webpack://arcgis-starter/./node_modules/@arcgis/core/arcade/featureset/actions/Top.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/arcade/featureset/sources/FeatureLayerDynamic.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/arcade/featureset/sources/FeatureLayerDynamic.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ j)\n/* harmony export */ });\n/* harmony import */ var _Graphic_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../Graphic.js */ \"./node_modules/@arcgis/core/Graphic.js\");\n/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../request.js */ \"./node_modules/@arcgis/core/request.js\");\n/* harmony import */ var _Attachment_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../Attachment.js */ \"./node_modules/@arcgis/core/arcade/Attachment.js\");\n/* harmony import */ var _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../support/FeatureSet.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/FeatureSet.js\");\n/* harmony import */ var _support_IdSet_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../support/IdSet.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/IdSet.js\");\n/* harmony import */ var _support_shared_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../support/shared.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/shared.js\");\n/* harmony import */ var _support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../support/sqlUtils.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/sqlUtils.js\");\n/* harmony import */ var _support_stats_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../support/stats.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/stats.js\");\n/* harmony import */ var _core_MD5_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../core/MD5.js */ \"./node_modules/@arcgis/core/core/MD5.js\");\n/* harmony import */ var _kernel_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../kernel.js */ \"./node_modules/@arcgis/core/kernel.js\");\n/* harmony import */ var _geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../geometry/support/jsonUtils.js */ \"./node_modules/@arcgis/core/geometry/support/jsonUtils.js\");\n/* harmony import */ var _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../layers/FeatureLayer.js */ \"./node_modules/@arcgis/core/layers/FeatureLayer.js\");\n/* harmony import */ var _layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../layers/graphics/featureConversionUtils.js */ \"./node_modules/@arcgis/core/layers/graphics/featureConversionUtils.js\");\n/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../core/Error.js */ \"./node_modules/@arcgis/core/core/Error.js\");\n/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../core/has.js */ \"./node_modules/@arcgis/core/core/has.js\");\n/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../core/Logger.js */ \"./node_modules/@arcgis/core/core/Logger.js\");\n/* harmony import */ var _layers_support_source_DataLayerSource_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../layers/support/source/DataLayerSource.js */ \"./node_modules/@arcgis/core/layers/support/source/DataLayerSource.js\");\n/* harmony import */ var _rest_query_executeQueryJSON_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../rest/query/executeQueryJSON.js */ \"./node_modules/@arcgis/core/rest/query/executeQueryJSON.js\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../config.js */ \"./node_modules/@arcgis/core/config.js\");\n/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../core/arrayUtils.js */ \"./node_modules/@arcgis/core/core/arrayUtils.js\");\n/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../core/urlUtils.js */ \"./node_modules/@arcgis/core/core/urlUtils.js\");\n/* harmony import */ var _core_unitUtils_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../core/unitUtils.js */ \"./node_modules/@arcgis/core/core/unitUtils.js\");\n/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../geometry/support/spatialReferenceUtils.js */ \"./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js\");\n/* harmony import */ var _rest_query_operations_query_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../../rest/query/operations/query.js */ \"./node_modules/@arcgis/core/rest/query/operations/query.js\");\n/* harmony import */ var _rest_support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../../rest/support/FeatureSet.js */ \"./node_modules/@arcgis/core/rest/support/FeatureSet.js\");\n/* harmony import */ var _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../../../rest/support/Query.js */ \"./node_modules/@arcgis/core/rest/support/Query.js\");\n/* harmony import */ var _rest_query_support_AttachmentInfo_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../../../rest/query/support/AttachmentInfo.js */ \"./node_modules/@arcgis/core/rest/query/support/AttachmentInfo.js\");\n/* harmony import */ var _rest_support_AttachmentQuery_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../../../rest/support/AttachmentQuery.js */ \"./node_modules/@arcgis/core/rest/support/AttachmentQuery.js\");\n/* harmony import */ var _rest_query_executeForCount_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../../../rest/query/executeForCount.js */ \"./node_modules/@arcgis/core/rest/query/executeForCount.js\");\n/* harmony import */ var _geometry_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ../../../geometry.js */ \"./node_modules/@arcgis/core/geometry.js\");\n/* harmony import */ var _rest_query_executeForIds_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ../../../rest/query/executeForIds.js */ \"./node_modules/@arcgis/core/rest/query/executeForIds.js\");\n/* harmony import */ var _rest_support_RelationshipQuery_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ../../../rest/support/RelationshipQuery.js */ \"./node_modules/@arcgis/core/rest/support/RelationshipQuery.js\");\n/* harmony import */ var _geometry_support_normalizeUtils_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ../../../geometry/support/normalizeUtils.js */ \"./node_modules/@arcgis/core/geometry/support/normalizeUtils.js\");\n/* harmony import */ var _rest_support_TopFeaturesQuery_js__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ../../../rest/support/TopFeaturesQuery.js */ \"./node_modules/@arcgis/core/rest/support/TopFeaturesQuery.js\");\n/* harmony import */ var _rest_query_operations_pbfOptimizedFeatureSet_js__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ../../../rest/query/operations/pbfOptimizedFeatureSet.js */ \"./node_modules/@arcgis/core/rest/query/operations/pbfOptimizedFeatureSet.js\");\n/* harmony import */ var _rest_support_StatisticDefinition_js__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ../../../rest/support/StatisticDefinition.js */ \"./node_modules/@arcgis/core/rest/support/StatisticDefinition.js\");\n/* harmony import */ var _Dictionary_js__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ../../Dictionary.js */ \"./node_modules/@arcgis/core/arcade/Dictionary.js\");\n/* harmony import */ var _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ../support/errorsupport.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/errorsupport.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nclass j extends _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"]{constructor(e){super(e),this.declaredClass=\"esri.arcade.featureset.sources.FeatureLayerDynamic\",this._removeGeometry=!1,this._overrideFields=null,this.formulaCredential=null,this._pageJustIds=!1,this._requestStandardised=!1,this._useDefinitionExpression=!0,this._cachedDateMetaData={},e.spatialReference&&(this.spatialReference=e.spatialReference),this._transparent=!0,this._maxProcessing=1e3,this._layer=e.layer,this._wset=null,void 0!==e.outFields&&(this._overrideFields=e.outFields),void 0!==e.includeGeometry&&(this._removeGeometry=!1===e.includeGeometry)}_maxQueryRate(){return _support_shared_js__WEBPACK_IMPORTED_MODULE_5__.defaultMaxRecords}end(){return this._layer}optimisePagingFeatureQueries(e){this._pageJustIds=e}get urlQueryPath(){return this._layer.parsedUrl.path||\"\"}convertQueryToLruCacheKey(e){const t=this.urlQueryPath+\",\"+(0,_support_shared_js__WEBPACK_IMPORTED_MODULE_5__.stableStringify)(e.toJSON());return (0,_core_MD5_js__WEBPACK_IMPORTED_MODULE_8__.createMD5Hash)(t,_core_MD5_js__WEBPACK_IMPORTED_MODULE_8__.outputTypes.String)}async loadImpl(){return!0===this._layer.loaded?(this._initialiseFeatureSet(),this):(await this._layer.load(),this._initialiseFeatureSet(),this)}_initialiseFeatureSet(){if(null==this.spatialReference&&(this.spatialReference=this._layer.spatialReference),this.geometryType=this._layer.geometryType,this.fields=this._layer.fields.slice(0),this._layer.outFields)if(1===this._layer.outFields.length&&\"*\"===this._layer.outFields[0]);else{const e=[];for(const t of this.fields)if(\"oid\"===t.type)e.push(t);else for(const i of this._layer.outFields)if(i.toLowerCase()===t.name.toLowerCase()){e.push(t);break}this.fields=e}else;if(null!==this._overrideFields)if(1===this._overrideFields.length&&\"*\"===this._overrideFields[0])this._overrideFields=null;else{const e=[],t=[];for(const i of this.fields)if(\"oid\"===i.type)e.push(i),t.push(i.name);else for(const r of this._overrideFields)if(r.toLowerCase()===i.name.toLowerCase()){e.push(i),t.push(i.name);break}this.fields=e,this._overrideFields=t}if(this._layer.source&&this._layer.source.sourceJSON){const e=this._layer.source.sourceJSON.currentVersion;!0===this._layer.source.sourceJSON.useStandardizedQueries?(this._databaseType=_support_shared_js__WEBPACK_IMPORTED_MODULE_5__.FeatureServiceDatabaseType.StandardisedNoInterval,null!=e&&e>=10.61&&(this._databaseType=_support_shared_js__WEBPACK_IMPORTED_MODULE_5__.FeatureServiceDatabaseType.Standardised)):null!=e&&(e>=10.5&&(this._databaseType=_support_shared_js__WEBPACK_IMPORTED_MODULE_5__.FeatureServiceDatabaseType.StandardisedNoInterval,this._requestStandardised=!0),e>=10.61&&(this._databaseType=_support_shared_js__WEBPACK_IMPORTED_MODULE_5__.FeatureServiceDatabaseType.Standardised))}this.objectIdField=this._layer.objectIdField;for(const e of this.fields)\"global-id\"===e.type&&(this.globalIdField=e.name);this.hasM=this._layer.supportsM,this.hasZ=this._layer.supportsZ,this.typeIdField=this._layer.typeIdField??\"\",this.types=this._layer.types}_isInFeatureSet(){return _support_shared_js__WEBPACK_IMPORTED_MODULE_5__.IdState.InFeatureSet}async _refineSetBlock(e){return e}_candidateIdTransform(e){return e}async _getSet(e){if(null===this._wset){await this._ensureLoaded();const t=await this._getFilteredSet(\"\",null,null,null,e);return this._wset=t,t}return this._wset}async _runDatabaseProbe(e){await this._ensureLoaded();const t=new _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_25__[\"default\"];this.datesInUnknownTimezone&&(t.timeReferenceUnknownClient=!0),t.where=e.replace(\"OBJECTID\",this._layer.objectIdField);try{return await this._layer.queryObjectIds(t),!0}catch(i){return!1}}_canUsePagination(){return!(!this._layer.capabilities||!this._layer.capabilities.query||!0!==this._layer.capabilities.query.supportsPagination)}_cacheableFeatureSetSourceKey(){return this._layer.url}pbfSupportedForQuery(e){const t=this._layer?.capabilities?.query;return!e.outStatistics&&!0===t?.supportsFormatPBF&&!0===t?.supportsQuantizationEditMode}async queryPBF(e){e.quantizationParameters={mode:\"edit\"};const t=await (0,_rest_query_operations_query_js__WEBPACK_IMPORTED_MODULE_23__.executeQueryPBF)(this._layer.parsedUrl,e,new _rest_query_operations_pbfOptimizedFeatureSet_js__WEBPACK_IMPORTED_MODULE_34__.OptimizedFeatureSetParserContext({}));return _rest_support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_24__[\"default\"].fromJSON((0,_layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_12__.convertToFeatureSet)(t.data)).unquantize()}get gdbVersion(){return this._layer&&this._layer.capabilities&&this._layer.capabilities.data&&this._layer.capabilities.data.isVersioned?this._layer.gdbVersion?this._layer.gdbVersion:\"SDE.DEFAULT\":\"\"}nativeCapabilities(){return{title:this._layer.title??\"\",source:this,canQueryRelated:!0,capabilities:this._layer.capabilities,databaseType:this._databaseType,requestStandardised:this._requestStandardised}}executeQuery(e,t){const i=\"execute\"===t?_rest_query_executeQueryJSON_js__WEBPACK_IMPORTED_MODULE_17__.executeQueryJSON:\"executeForCount\"===t?_rest_query_executeForCount_js__WEBPACK_IMPORTED_MODULE_28__.executeForCount:_rest_query_executeForIds_js__WEBPACK_IMPORTED_MODULE_30__.executeForIds,r=\"execute\"===t&&this.pbfSupportedForQuery(e);let s=null;if(this.recentlyUsedQueries){const t=this.convertQueryToLruCacheKey(e);s=this.recentlyUsedQueries.getFromCache(t),null===s&&(s=!0!==r?i(this._layer.parsedUrl.path,e):this.queryPBF(e),this.recentlyUsedQueries.addToCache(t,s),s=s.catch((e=>{throw this.recentlyUsedQueries?.removeFromCache(t),e})))}return this.featureSetQueryInterceptor&&this.featureSetQueryInterceptor.preLayerQueryCallback({layer:this._layer,query:e,method:t}),null===s&&(s=!0!==r?i(this._layer.parsedUrl.path,e):this.queryPBF(e)),s}async _getFilteredSet(e,t,i,r,a){const n=await this.databaseType();if(this.isTable()&&t&&null!==e&&\"\"!==e){return new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"]([],[],!0,null)}if(this._canUsePagination())return this._getFilteredSetUsingPaging(e,t,i,r,a);let l=\"\",o=!1;null!==r&&this._layer.capabilities&&this._layer.capabilities.query&&!0===this._layer.capabilities.query.supportsOrderBy&&(l=r.constructClause(),o=!0);const u=new _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_25__[\"default\"];this.datesInUnknownTimezone&&(u.timeReferenceUnknownClient=!0),u.where=null===i?null===t?\"1=1\":\"\":(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_6__.toWhereClause)(i,n),this._requestStandardised&&(u.sqlFormat=\"standard\"),u.spatialRelationship=this._makeRelationshipEnum(e),u.outSpatialReference=this.spatialReference,u.orderByFields=\"\"!==l?l.split(\",\"):null,u.geometry=null===t?null:t,u.relationParameter=this._makeRelationshipParam(e);let c=await this.executeQuery(u,\"executeForIds\");null===c&&(c=[]),this._checkCancelled(a);return new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"]([],c,o,null)}_expandPagedSet(e,t,i,r,s){return this._expandPagedSetFeatureSet(e,t,i,r,s)}async _getFilteredSetUsingPaging(e,t,i,r,a){let n=\"\",l=!1;null!==r&&this._layer.capabilities&&this._layer.capabilities.query&&!0===this._layer.capabilities.query.supportsOrderBy&&(n=r.constructClause(),l=!0);const o=await this.databaseType();let u=null===i?null===t?\"1=1\":\"\":(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_6__.toWhereClause)(i,o);this._layer.definitionExpression&&this._useDefinitionExpression&&(u=\"\"!==u?\"((\"+this._layer.definitionExpression+\") AND (\"+u+\"))\":this._layer.definitionExpression);let c=this._maxQueryRate();const h=this._layer.capabilities?.query.maxRecordCount;null!=h&&h<c&&(c=h);let p=null;if(!0===this._pageJustIds)p=new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"]([],[\"GETPAGES\"],l,{spatialRel:this._makeRelationshipEnum(e),relationParam:this._makeRelationshipParam(e),outFields:this._layer.objectIdField,resultRecordCount:c,resultOffset:0,geometry:null===t?null:t,where:u,orderByFields:n,returnGeometry:!1,returnIdsOnly:\"false\",internal:{set:[],lastRetrieved:0,lastPage:0,fullyResolved:!1}});else{let i=!0;!0===this._removeGeometry&&(i=!1);const r=null!==this._overrideFields?this._overrideFields:this._fieldsIncludingObjectId(this._layer.outFields?this._layer.outFields:[\"*\"]);p=new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"]([],[\"GETPAGES\"],l,{spatialRel:this._makeRelationshipEnum(e),relationParam:this._makeRelationshipParam(e),outFields:r.join(\",\"),resultRecordCount:c,resultOffset:0,geometry:null===t?null:t,where:u,orderByFields:n,returnGeometry:i,returnIdsOnly:\"false\",internal:{set:[],lastRetrieved:0,lastPage:0,fullyResolved:!1}})}return await this._expandPagedSet(p,c,0,1,a),p}_clonePageDefinition(e){return null===e?null:!0!==e.groupbypage?{groupbypage:!1,spatialRel:e.spatialRel,relationParam:e.relationParam,outFields:e.outFields,resultRecordCount:e.resultRecordCount,resultOffset:e.resultOffset,geometry:e.geometry,where:e.where,orderByFields:e.orderByFields,returnGeometry:e.returnGeometry,returnIdsOnly:e.returnIdsOnly,internal:e.internal}:{groupbypage:!0,spatialRel:e.spatialRel,relationParam:e.relationParam,outFields:e.outFields,resultRecordCount:e.resultRecordCount,useOIDpagination:e.useOIDpagination,generatedOid:e.generatedOid,groupByFieldsForStatistics:e.groupByFieldsForStatistics,resultOffset:e.resultOffset,outStatistics:e.outStatistics,geometry:e.geometry,where:e.where,orderByFields:e.orderByFields,returnGeometry:e.returnGeometry,returnIdsOnly:e.returnIdsOnly,internal:e.internal}}async _getPhysicalPage(e,t,i){const r=e.pagesDefinition.internal.lastRetrieved,s=r,a=e.pagesDefinition.internal.lastPage,n=new _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_25__[\"default\"];this._requestStandardised&&(n.sqlFormat=\"standard\"),this.datesInUnknownTimezone&&(n.timeReferenceUnknownClient=!0),n.spatialRelationship=e.pagesDefinition.spatialRel,n.relationParameter=e.pagesDefinition.relationParam,n.outFields=e.pagesDefinition.outFields.split(\",\"),n.num=e.pagesDefinition.resultRecordCount,n.start=e.pagesDefinition.internal.lastPage,n.geometry=e.pagesDefinition.geometry,n.where=e.pagesDefinition.where,n.orderByFields=\"\"!==e.pagesDefinition.orderByFields?e.pagesDefinition.orderByFields.split(\",\"):null,n.returnGeometry=e.pagesDefinition.returnGeometry,n.outSpatialReference=this.spatialReference;const l=await this.executeQuery(n,\"execute\");if(this._checkCancelled(i),e.pagesDefinition.internal.lastPage!==a)return\"done\";const o=this._layer.objectIdField;for(let u=0;u<l.features.length;u++)e.pagesDefinition.internal.set[s+u]=l.features[u].attributes[o];if(!1===this._pageJustIds)for(let u=0;u<l.features.length;u++)this._featureCache[l.features[u].attributes[o]]=l.features[u];return(void 0===l.exceededTransferLimit&&l.features.length!==e.pagesDefinition.resultRecordCount||!1===l.exceededTransferLimit)&&(e.pagesDefinition.internal.fullyResolved=!0),e.pagesDefinition.internal.lastRetrieved=r+l.features.length,e.pagesDefinition.internal.lastPage+=e.pagesDefinition.resultRecordCount,\"done\"}_fieldsIncludingObjectId(e){if(null===e)return[this.objectIdField];const t=e.slice(0);if(t.includes(\"*\"))return t;let i=!1;for(const r of t)if(r.toUpperCase()===this.objectIdField.toUpperCase()){i=!0;break}return!1===i&&t.push(this.objectIdField),t}async _getFeatures(e,t,i,r){const s=[];if(-1!==t&&void 0===this._featureCache[t]&&s.push(t),!0===this._checkIfNeedToExpandKnownPage(e,this._maxProcessingRate()))return await this._expandPagedSet(e,this._maxProcessingRate(),0,0,r),this._getFeatures(e,t,i,r);let a=0;for(let u=e._lastFetchedIndex;u<e._known.length;u++){if(e._lastFetchedIndex+=1,a++,void 0===this._featureCache[e._known[u]]){let i=!1;if(null!==this._layer._mode&&void 0!==this._layer._mode){const t=this._layer._mode;if(void 0!==t._featureMap[e._known[u]]){const r=t._featureMap[e._known[u]];null!==r&&(i=!0,this._featureCache[e._known[u]]=r)}}if(!1===i&&(e._known[u]!==t&&s.push(e._known[u]),s.length>=this._maxProcessingRate()-1))break}if(a>=i&&0===s.length)break}if(0===s.length)return\"success\";const n=new _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_25__[\"default\"];this._requestStandardised&&(n.sqlFormat=\"standard\"),this.datesInUnknownTimezone&&(n.timeReferenceUnknownClient=!0),n.objectIds=s,n.outFields=null!==this._overrideFields?this._overrideFields:this._fieldsIncludingObjectId(this._layer.outFields?this._layer.outFields:[\"*\"]),n.returnGeometry=!0,!0===this._removeGeometry&&(n.returnGeometry=!1),n.outSpatialReference=this.spatialReference;const l=await this.executeQuery(n,\"execute\");if(this._checkCancelled(r),void 0!==l.error)throw new _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_37__.FeatureSetError(_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_37__.FeatureSetErrorCodes.RequestFailed,{reason:l.error});const o=this._layer.objectIdField;for(let u=0;u<l.features.length;u++)this._featureCache[l.features[u].attributes[o]]=l.features[u];return\"success\"}async _getDistinctPages(e,t,i,r,s,a,n,l,o){await this._ensureLoaded();const u=await this.databaseType();let c=i.parseTree.column;const h=this._layer.fields??[];for(let d=0;d<h.length;d++)if(h[d].name.toLowerCase()===c.toLowerCase()){c=h[d].name;break}const p=new _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_25__[\"default\"];this._requestStandardised&&(p.sqlFormat=\"standard\"),this.datesInUnknownTimezone&&(p.timeReferenceUnknownClient=!0);let y=null===a?null===s?\"1=1\":\"\":(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_6__.toWhereClause)(a,u);this._layer.definitionExpression&&this._useDefinitionExpression&&(y=\"\"!==y?\"((\"+this._layer.definitionExpression+\") AND (\"+y+\"))\":this._layer.definitionExpression),p.where=y,p.spatialRelationship=this._makeRelationshipEnum(r),p.relationParameter=this._makeRelationshipParam(r),p.geometry=null===s?null:s,p.returnDistinctValues=!0,p.returnGeometry=!1,p.outFields=[c];const f=await this.executeQuery(p,\"execute\");if(this._checkCancelled(o),!f.hasOwnProperty(\"features\"))throw new _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_37__.FeatureSetError(_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_37__.FeatureSetErrorCodes.InvalidStatResponse);let m=!1;for(let d=0;d<h.length;d++)if(h[d].name===c){\"date\"===h[d].type&&(m=!0);break}for(let d=0;d<f.features.length;d++){if(m){const e=f.features[d].attributes[c];null!==e?l.push(new Date(e)):l.push(e)}else l.push(f.features[d].attributes[c]);if(l.length>=n)break}if(0===f.features.length)return l;if(f.features.length===this._layer.capabilities?.query.maxRecordCount&&l.length<n){return{calculated:!0,result:await this._getDistinctPages(e+f.features.length,t,i,r,s,a,n,l,o)}}return l}async _distinctStat(e,t,i,r,s,a,n){return{calculated:!0,result:await this._getDistinctPages(0,e,t,i,r,s,a,[],n)}}isTable(){return this._layer.isTable||null===this._layer.geometryType||\"table\"===this._layer.type||\"\"===this._layer.geometryType||\"esriGeometryNull\"===this._layer.geometryType}async _countstat(e,t,i,r){const s=await this.databaseType(),a=new _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_25__[\"default\"];if(this._requestStandardised&&(a.sqlFormat=\"standard\"),this.isTable()&&i&&null!==t&&\"\"!==t)return{calculated:!0,result:0};let n=null===r?null===i?\"1=1\":\"\":(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_6__.toWhereClause)(r,s);this._layer.definitionExpression&&this._useDefinitionExpression&&(n=\"\"!==n?\"((\"+this._layer.definitionExpression+\") AND (\"+n+\"))\":this._layer.definitionExpression),a.where=n,this.datesInUnknownTimezone&&(a.timeReferenceUnknownClient=!0),a.where=n,a.spatialRelationship=this._makeRelationshipEnum(t),a.relationParameter=this._makeRelationshipParam(t),a.geometry=null===i?null:i,a.returnGeometry=!1;return{calculated:!0,result:await this.executeQuery(a,\"executeForCount\")}}async _stats(e,t,i,r,s,a,n){await this._ensureLoaded();const l=this._layer.capabilities&&this._layer.capabilities.query&&!0===this._layer.capabilities.query.supportsSqlExpression,o=this._layer.capabilities&&this._layer.capabilities.query&&!0===this._layer.capabilities.query.supportsStatistics,u=this._layer.capabilities&&this._layer.capabilities.query&&!0===this._layer.capabilities.query.supportsDistinct;if(\"count\"===e)return u?this._countstat(e,i,r,s):{calculated:!1};if(!1===o||!1===(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_6__.isSingleField)(t)&&!1===l||!1===t.isStandardized)return\"\"!==i||null!==s?{calculated:!1}:this._manualStat(e,t,a,n);if(\"distinct\"===e)return!1===u?\"\"!==i||null!==s?{calculated:!1}:this._manualStat(e,t,a,n):this._distinctStat(e,t,i,r,s,a,n);const p=await this.databaseType();if(this.isTable()&&r&&null!==i&&\"\"!==i)return{calculated:!0,result:null};const y=new _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_25__[\"default\"];this._requestStandardised&&(y.sqlFormat=\"standard\");let f=null===s?null===r?\"1=1\":\"\":(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_6__.toWhereClause)(s,p);this._layer.definitionExpression&&this._useDefinitionExpression&&(f=\"\"!==f?\"((\"+this._layer.definitionExpression+\") AND (\"+f+\"))\":this._layer.definitionExpression),y.where=f,y.spatialRelationship=this._makeRelationshipEnum(i),y.relationParameter=this._makeRelationshipParam(i),y.geometry=null===r?null:r,this.datesInUnknownTimezone&&(y.timeReferenceUnknownClient=!0);const m=new _rest_support_StatisticDefinition_js__WEBPACK_IMPORTED_MODULE_35__[\"default\"];m.statisticType=(0,_support_stats_js__WEBPACK_IMPORTED_MODULE_7__.decodeStatType)(e),m.onStatisticField=(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_6__.toWhereClause)(t,p),m.outStatisticFieldName=\"ARCADE_STAT_RESULT\",y.returnGeometry=!1;let _=\"ARCADE_STAT_RESULT\";y.outStatistics=[m];const g=await this.executeQuery(y,\"execute\");if(!g.hasOwnProperty(\"features\")||0===g.features.length)throw new _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_37__.FeatureSetError(_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_37__.FeatureSetErrorCodes.InvalidStatResponse);let R=!1;const F=g.fields??[];for(let d=0;d<F.length;d++)if(\"ARCADE_STAT_RESULT\"===F[d].name.toUpperCase()){_=F[d].name,\"date\"===F[d].type&&(R=!0);break}if(R){let e=g.features[0].attributes[_];return null!==e&&(e=new Date(g.features[0].attributes[_])),{calculated:!0,result:e}}return{calculated:!0,result:g.features[0].attributes[_]}}_stat(e,t,i,r,s,a,n){return this._stats(e,t,i,r,s,a,n)}async _canDoAggregates(e,t){await this._ensureLoaded();let i=!1;const r=this._layer.capabilities?.query,s=!0===r?.supportsSqlExpression;if(null!=r&&!0===r.supportsStatistics&&!0===r.supportsOrderBy&&(i=!0),i)for(let a=0;a<t.length-1;a++)(!1===t[a].workingexpr?.isStandardized||!1===(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_6__.isSingleField)(t[a].workingexpr)&&!1===s)&&(i=!1);return!1!==i}_makeRelationshipEnum(e){if(e.includes(\"esriSpatialRelRelation\"))return\"relation\";switch(e){case\"esriSpatialRelRelation\":return\"relation\";case\"esriSpatialRelIntersects\":return\"intersects\";case\"esriSpatialRelContains\":return\"contains\";case\"esriSpatialRelOverlaps\":return\"overlaps\";case\"esriSpatialRelWithin\":return\"within\";case\"esriSpatialRelTouches\":return\"touches\";case\"esriSpatialRelCrosses\":return\"crosses\";case\"esriSpatialRelEnvelopeIntersects\":return\"envelope-intersects\"}return e}_makeRelationshipParam(e){return e.includes(\"esriSpatialRelRelation\")?e.split(\":\")[1]:\"\"}async _getAggregatePagesDataSourceDefinition(e,t,i,r,a,n,l){await this._ensureLoaded();const o=await this.databaseType();let u=\"\",c=!1,h=!1;null!==n&&this._layer.capabilities&&this._layer.capabilities.query&&!0===this._layer.capabilities.query.supportsOrderBy&&(u=n.constructClause(),h=!0),this._layer.capabilities&&this._layer.capabilities.query&&!1===this._layer.capabilities.query.supportsPagination&&(h=!1,c=!0,u=this._layer.objectIdField);const p=[];for(let s=0;s<t.length;s++){const e=new _rest_support_StatisticDefinition_js__WEBPACK_IMPORTED_MODULE_35__[\"default\"];e.onStatisticField=null!==t[s].workingexpr?(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_6__.toWhereClause)(t[s].workingexpr,o):\"\",e.outStatisticFieldName=t[s].field,e.statisticType=t[s].toStatisticsName(),p.push(e)}\"\"===u&&(u=e.join(\",\"));let y=this._maxQueryRate();const f=this._layer.capabilities?.query.maxRecordCount;null!=f&&f<y&&(y=f);let m=null===a?null===r?\"1=1\":\"\":(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_6__.toWhereClause)(a,o);this._layer.definitionExpression&&this._useDefinitionExpression&&(m=\"\"!==m?\"((\"+this._layer.definitionExpression+\") AND (\"+m+\"))\":this._layer.definitionExpression);return new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"]([],[\"GETPAGES\"],h,{groupbypage:!0,spatialRel:this._makeRelationshipEnum(i),relationParam:this._makeRelationshipParam(i),outFields:[\"*\"],useOIDpagination:c,generatedOid:l,resultRecordCount:y,resultOffset:0,groupByFieldsForStatistics:e,outStatistics:p,geometry:null===r?null:r,where:m,orderByFields:u,returnGeometry:!1,returnIdsOnly:!1,internal:{lastMaxId:-1,set:[],lastRetrieved:0,lastPage:0,fullyResolved:!1}})}async _getAgregagtePhysicalPage(t,i,r){let s=t.pagesDefinition.where;!0===t.pagesDefinition.useOIDpagination&&(s=\"\"!==s?\"(\"+s+\") AND (\"+t.pagesDefinition.generatedOid+\">\"+t.pagesDefinition.internal.lastMaxId.toString()+\")\":t.pagesDefinition.generatedOid+\">\"+t.pagesDefinition.internal.lastMaxId.toString());const a=t.pagesDefinition.internal.lastRetrieved,n=a,l=t.pagesDefinition.internal.lastPage,o=new _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_25__[\"default\"];if(this._requestStandardised&&(o.sqlFormat=\"standard\"),o.where=s,o.spatialRelationship=t.pagesDefinition.spatialRel,o.relationParameter=t.pagesDefinition.relationParam,o.outFields=t.pagesDefinition.outFields,o.outStatistics=t.pagesDefinition.outStatistics,o.geometry=t.pagesDefinition.geometry,o.groupByFieldsForStatistics=t.pagesDefinition.groupByFieldsForStatistics,o.num=t.pagesDefinition.resultRecordCount,o.start=t.pagesDefinition.internal.lastPage,o.returnGeometry=t.pagesDefinition.returnGeometry,this.datesInUnknownTimezone&&(o.timeReferenceUnknownClient=!0),o.orderByFields=\"\"!==t.pagesDefinition.orderByFields?t.pagesDefinition.orderByFields.split(\",\"):null,this.isTable()&&o.geometry&&o.spatialRelationship)return[];const u=await this.executeQuery(o,\"execute\");if(this._checkCancelled(r),!u.hasOwnProperty(\"features\"))throw new _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_37__.FeatureSetError(_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_37__.FeatureSetErrorCodes.InvalidStatResponse);const d=[];if(t.pagesDefinition.internal.lastPage!==l)return[];for(let e=0;e<u.features.length;e++)t.pagesDefinition.internal.set[n+e]=u.features[e].attributes[t.pagesDefinition.generatedOid];for(let c=0;c<u.features.length;c++)d.push(new _Graphic_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({attributes:u.features[c].attributes,geometry:null}));return!0===t.pagesDefinition.useOIDpagination?0===u.features.length?t.pagesDefinition.internal.fullyResolved=!0:t.pagesDefinition.internal.lastMaxId=u.features[u.features.length-1].attributes[t.pagesDefinition.generatedOid]:(void 0===u.exceededTransferLimit&&u.features.length!==t.pagesDefinition.resultRecordCount||!1===u.exceededTransferLimit)&&(t.pagesDefinition.internal.fullyResolved=!0),t.pagesDefinition.internal.lastRetrieved=a+u.features.length,t.pagesDefinition.internal.lastPage+=t.pagesDefinition.resultRecordCount,d}static create(e,t,i,r,s){const a=new _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_11__[\"default\"]({url:e,outFields:null===t?[\"*\"]:t});return new j({layer:a,spatialReference:i,lrucache:r,interceptor:s})}relationshipMetaData(){return this._layer&&this._layer.source&&this._layer.source.sourceJSON&&this._layer.source.sourceJSON.relationships?this._layer.source.sourceJSON.relationships:[]}serviceUrl(){return (0,_support_shared_js__WEBPACK_IMPORTED_MODULE_5__.extractServiceUrl)(this._layer.parsedUrl.path)}async queryAttachments(e,t,r,s,a){const n=this._layer.capabilities;if(n?.data.supportsAttachment&&n?.operations.supportsQueryAttachments){const n={objectIds:[e],returnMetadata:a};(t&&t>0||r&&r>0)&&(n.size=[t&&t>0?t:0,r&&r>0?r:t+1]),s&&s.length>0&&(n.attachmentTypes=s),this.featureSetQueryInterceptor&&this.featureSetQueryInterceptor.preLayerQueryCallback({layer:this._layer,query:n,method:\"attachments\"});const l=await this._layer.queryAttachments(n),o=[];return l&&l[e]&&l[e].forEach((t=>{const r=this._layer.parsedUrl.path+\"/\"+e.toString()+\"/attachments/\"+t.id.toString();let s=null;a&&t.exifInfo&&(s=_Dictionary_js__WEBPACK_IMPORTED_MODULE_36__[\"default\"].convertJsonToArcade(t.exifInfo,\"system\",!0)),o.push(new _Attachment_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"](t.id,t.name,t.contentType,t.size,r,s))})),o}return[]}async queryRelatedFeatures(i){const r={f:\"json\",relationshipId:i.relationshipId.toString(),definitionExpression:i.where,outFields:i.outFields?.join(\",\"),returnGeometry:i.returnGeometry.toString()};void 0!==i.resultOffset&&null!==i.resultOffset&&(r.resultOffset=i.resultOffset.toString()),void 0!==i.resultRecordCount&&null!==i.resultRecordCount&&(r.resultRecordCount=i.resultRecordCount.toString()),i.orderByFields&&(r.orderByFields=i.orderByFields.join(\",\")),i.objectIds&&i.objectIds.length>0&&(r.objectIds=i.objectIds.join(\",\")),i.outSpatialReference&&(r.outSR=JSON.stringify(i.outSpatialReference.toJSON())),this.featureSetQueryInterceptor&&this.featureSetQueryInterceptor.preRequestCallback({layer:this._layer,queryPayload:r,method:\"relatedrecords\",url:this._layer.parsedUrl.path+\"/queryRelatedRecords\"});const s=await (0,_request_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(this._layer.parsedUrl.path+\"/queryRelatedRecords\",{responseType:\"json\",query:r});if(s.data){const t={},i=s.data;if(i&&i.relatedRecordGroups){const r=i.spatialReference;for(const s of i.relatedRecordGroups){const a=s.objectId,n=[];for(const t of s.relatedRecords){t.geometry&&(t.geometry.spatialReference=r);const i=new _Graphic_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({geometry:t.geometry?(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_10__.fromJSON)(t.geometry):null,attributes:t.attributes});n.push(i)}t[a]={features:n,exceededTransferLimit:!0===i.exceededTransferLimit}}}return t}throw new _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_37__.FeatureSetError(_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_37__.FeatureSetErrorCodes.InvalidRequest)}async getFeatureByObjectId(e,t){const i=new _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_25__[\"default\"];i.outFields=t,i.returnGeometry=!1,i.outSpatialReference=this.spatialReference,i.where=this.objectIdField+\"=\"+e.toString(),this.datesInUnknownTimezone&&(i.timeReferenceUnknownClient=!0),this.featureSetQueryInterceptor&&this.featureSetQueryInterceptor.preLayerQueryCallback({layer:this._layer,query:i,method:\"execute\"});const r=await (0,_rest_query_executeQueryJSON_js__WEBPACK_IMPORTED_MODULE_17__.executeQueryJSON)(this._layer.parsedUrl.path,i);return 1===r.features.length?r.features[0]:null}async getIdentityUser(){await this.load();const e=_kernel_js__WEBPACK_IMPORTED_MODULE_9__.id?.findCredential(this._layer.url);return e?e.userId:null}async getOwningSystemUrl(){await this.load();const e=_kernel_js__WEBPACK_IMPORTED_MODULE_9__.id?.findServerInfo(this._layer.url);if(e)return e.owningSystemUrl;let i=this._layer.url;const r=i.toLowerCase().indexOf(\"/rest/services\");if(i=r>-1?i.substring(0,r):i,i){i+=\"/rest/info\";try{const e=await (0,_request_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(i,{query:{f:\"json\"}});let r=\"\";return e.data&&e.data.owningSystemUrl&&(r=e.data.owningSystemUrl),r}catch(s){return\"\"}}return\"\"}getDataSourceFeatureSet(){const e=new j({layer:this._layer,spatialReference:this.spatialReference??void 0,outFields:this._overrideFields??void 0,includeGeometry:!this._removeGeometry,lrucache:this.recentlyUsedQueries??void 0,interceptor:this.featureSetQueryInterceptor??void 0});return e._useDefinitionExpression=!1,e}get preferredTimeReference(){return void 0===this._cachedDateMetaData.preferredTimeReference&&(this._cachedDateMetaData.preferredTimeReference=this._layer?.preferredTimeReference?.toJSON()??null),this._cachedDateMetaData.preferredTimeReference}get dateFieldsTimeReference(){return void 0===this._cachedDateMetaData.dateFieldsTimeReference&&(this._cachedDateMetaData.dateFieldsTimeReference=this._layer?.dateFieldsTimeReference?.toJSON()??null),this._cachedDateMetaData.dateFieldsTimeReference}get datesInUnknownTimezone(){return this._layer.datesInUnknownTimezone}get editFieldsInfo(){return void 0===this._cachedDateMetaData.editFieldsInfo&&(this._cachedDateMetaData.editFieldsInfo=this._layer?.editFieldsInfo?.toJSON()??null),this._cachedDateMetaData.editFieldsInfo}get timeInfo(){return void 0===this._cachedDateMetaData.timeInfo&&(this._cachedDateMetaData.timeInfo=this._layer?.timeInfo?.toJSON()??null),this._cachedDateMetaData.timeInfo}}\n\n\n//# sourceURL=webpack://arcgis-starter/./node_modules/@arcgis/core/arcade/featureset/sources/FeatureLayerDynamic.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/arcade/featureset/sources/FeatureLayerMemory.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/arcade/featureset/sources/FeatureLayerMemory.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ f)\n/* harmony export */ });\n/* harmony import */ var _Graphic_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../Graphic.js */ \"./node_modules/@arcgis/core/Graphic.js\");\n/* harmony import */ var _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../support/errorsupport.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/errorsupport.js\");\n/* harmony import */ var _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../support/FeatureSet.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/FeatureSet.js\");\n/* harmony import */ var _support_IdSet_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../support/IdSet.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/IdSet.js\");\n/* harmony import */ var _support_shared_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../support/shared.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/shared.js\");\n/* harmony import */ var _support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../support/sqlUtils.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/sqlUtils.js\");\n/* harmony import */ var _geometry_Geometry_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../geometry/Geometry.js */ \"./node_modules/@arcgis/core/geometry/Geometry.js\");\n/* harmony import */ var _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../layers/FeatureLayer.js */ \"./node_modules/@arcgis/core/layers/FeatureLayer.js\");\n/* harmony import */ var _layers_support_FeatureType_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../layers/support/FeatureType.js */ \"./node_modules/@arcgis/core/layers/support/FeatureType.js\");\n/* harmony import */ var _layers_support_Field_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../layers/support/Field.js */ \"./node_modules/@arcgis/core/layers/support/Field.js\");\n/* harmony import */ var _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../rest/support/Query.js */ \"./node_modules/@arcgis/core/rest/support/Query.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nclass f extends _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"]{constructor(e){super(e),this.declaredClass=\"esri.arcade.featureset.sources.FeatureLayerMemory\",this._removeGeometry=!1,this._overrideFields=null,this._forceIsTable=!1,e.spatialReference&&(this.spatialReference=e.spatialReference),this._transparent=!0,this._maxProcessing=1e3,this._layer=e.layer,this._wset=null,!0===e.isTable&&(this._forceIsTable=!0),void 0!==e.outFields&&(this._overrideFields=e.outFields),void 0!==e.includeGeometry&&(this._removeGeometry=!1===e.includeGeometry)}_maxQueryRate(){return _support_shared_js__WEBPACK_IMPORTED_MODULE_4__.defaultMaxRecords}end(){return this._layer}optimisePagingFeatureQueries(){}async loadImpl(){return!0===this._layer.loaded?(this._initialiseFeatureSet(),this):(await this._layer.load(),this._initialiseFeatureSet(),this)}get gdbVersion(){return\"\"}_initialiseFeatureSet(){if(null==this.spatialReference&&(this.spatialReference=this._layer.spatialReference),this.geometryType=this._layer.geometryType,this.fields=this._layer.fields.slice(0),this._layer.outFields)if(1===this._layer.outFields.length&&\"*\"===this._layer.outFields[0]);else{const e=[];for(const t of this.fields)if(\"oid\"===t.type)e.push(t);else for(const r of this._layer.outFields)if(r.toLowerCase()===t.name.toLowerCase()){e.push(t);break}this.fields=e}else;if(null!==this._overrideFields)if(1===this._overrideFields.length&&\"*\"===this._overrideFields[0])this._overrideFields=null;else{const e=[],t=[];for(const r of this.fields)if(\"oid\"===r.type)e.push(r),t.push(r.name);else for(const s of this._overrideFields)if(s.toLowerCase()===r.name.toLowerCase()){e.push(r),t.push(r.name);break}this.fields=e,this._overrideFields=t}this.objectIdField=this._layer.objectIdField;for(const e of this.fields)\"global-id\"===e.type&&(this.globalIdField=e.name);this.hasM=this._layer.supportsM,this.hasZ=this._layer.supportsZ,this._databaseType=_support_shared_js__WEBPACK_IMPORTED_MODULE_4__.FeatureServiceDatabaseType.Standardised,this.typeIdField=this._layer.typeIdField,this.types=this._layer.types}isTable(){return this._forceIsTable||this._layer.isTable||\"table\"===this._layer.type||!this._layer.geometryType}_isInFeatureSet(){return _support_shared_js__WEBPACK_IMPORTED_MODULE_4__.IdState.InFeatureSet}_candidateIdTransform(e){return e}async _getSet(e){if(null===this._wset){await this._ensureLoaded();const t=await this._getFilteredSet(\"\",null,null,null,e);return this._wset=t,t}return this._wset}_changeFeature(t){const r={};for(const e of this.fields)r[e.name]=t.attributes[e.name];return new _Graphic_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({geometry:!0===this._removeGeometry?null:t.geometry,attributes:r})}async _getFilteredSet(e,t,r,s,a){let n=\"\",u=!1;if(null!==s&&(n=s.constructClause(),u=!0),this.isTable()&&t&&null!==e&&\"\"!==e){return new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"]([],[],!0,null)}const h=new _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"];h.where=null===r?null===t?\"1=1\":\"\":(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_5__.toWhereClause)(r,_support_shared_js__WEBPACK_IMPORTED_MODULE_4__.FeatureServiceDatabaseType.Standardised),h.spatialRelationship=this._makeRelationshipEnum(e),h.outSpatialReference=this.spatialReference,h.orderByFields=\"\"!==n?n.split(\",\"):null,h.geometry=null===t?null:t,h.returnGeometry=!0,h.relationParameter=this._makeRelationshipParam(e);const c=await this._layer.queryFeatures(h);if(null===c)return new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"]([],[],u,null);this._checkCancelled(a);const y=[];c.features.forEach((e=>{const t=e.attributes[this._layer.objectIdField];y.push(t),this._featureCache[t]=this._changeFeature(e)}));return new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"]([],y,u,null)}_makeRelationshipEnum(e){if(e.includes(\"esriSpatialRelRelation\"))return\"relation\";switch(e){case\"esriSpatialRelRelation\":return\"relation\";case\"esriSpatialRelIntersects\":return\"intersects\";case\"esriSpatialRelContains\":return\"contains\";case\"esriSpatialRelOverlaps\":return\"overlaps\";case\"esriSpatialRelWithin\":return\"within\";case\"esriSpatialRelTouches\":return\"touches\";case\"esriSpatialRelCrosses\":return\"crosses\";case\"esriSpatialRelEnvelopeIntersects\":return\"envelope-intersects\"}return e}_makeRelationshipParam(e){return e.includes(\"esriSpatialRelRelation\")?e.split(\":\")[1]:\"\"}async _queryAllFeatures(){if(this._wset)return this._wset;const e=new _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"];if(e.where=\"1=1\",await this._ensureLoaded(),this._layer.source&&this._layer.source.items){const e=[];return this._layer.source.items.forEach((t=>{const r=t.attributes[this._layer.objectIdField];e.push(r),this._featureCache[r]=this._changeFeature(t)})),this._wset=new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"]([],e,!1,null),this._wset}const t=await this._layer.queryFeatures(e),r=[];return t.features.forEach((e=>{const t=e.attributes[this._layer.objectIdField];r.push(t),this._featureCache[t]=this._changeFeature(e)})),this._wset=new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"]([],r,!1,null),this._wset}async _getFeatures(e,s,i){const a=[];-1!==s&&void 0===this._featureCache[s]&&a.push(s);for(let t=e._lastFetchedIndex;t<e._known.length&&(e._lastFetchedIndex+=1,!(void 0===this._featureCache[e._known[t]]&&(e._known[t]!==s&&a.push(e._known[t]),a.length>i)));t++);if(0===a.length)return\"success\";throw new _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_1__.FeatureSetError(_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_1__.FeatureSetErrorCodes.MissingFeatures)}async _refineSetBlock(e){return e}async _stat(){return{calculated:!1}}async _canDoAggregates(){return!1}relationshipMetaData(){return[]}static _cloneAttr(e){const t={};for(const r in e)t[r]=e[r];return t}nativeCapabilities(){return{title:this._layer.title??\"\",canQueryRelated:!1,source:this,capabilities:this._layer.capabilities,databaseType:this._databaseType,requestStandardised:!0}}static create(e,t){let r=e.layerDefinition.objectIdField;const s=e.layerDefinition.typeIdField?e.layerDefinition.typeIdField:\"\",i=[];if(e.layerDefinition.types)for(const u of e.layerDefinition.types)i.push(_layers_support_FeatureType_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].fromJSON(u));let a=e.layerDefinition.geometryType;void 0===a&&(a=e.featureSet.geometryType||\"\");let l=e.featureSet.features;const n=t.toJSON();if(\"\"===r||void 0===r){let t=!1;for(const s of e.layerDefinition.fields)if(\"oid\"===s.type||\"esriFieldTypeOID\"===s.type){r=s.name,t=!0;break}if(!1===t){let t=\"FID\",s=!0,i=0;for(;s;){let r=!0;for(const s of e.layerDefinition.fields)if(s.name===t){r=!1;break}!0===r?s=!1:(i++,t=\"FID\"+i.toString())}e.layerDefinition.fields.push({type:\"esriFieldTypeOID\",name:t,alias:t});const a=[];for(let r=0;r<l.length;r++)a.push({geometry:e.featureSet.features[r].geometry,attributes:e.featureSet.features[r].attributes?this._cloneAttr(e.featureSet.features[r].attributes):{}}),a[r].attributes[t]=r;l=a,r=t}}const o=[];for(const u of e.layerDefinition.fields)u instanceof _layers_support_Field_js__WEBPACK_IMPORTED_MODULE_9__[\"default\"]?o.push(u):o.push(_layers_support_Field_js__WEBPACK_IMPORTED_MODULE_9__[\"default\"].fromJSON(u));let d=a;switch(d||(d=\"\"),d){case\"esriGeometryPoint\":d=\"point\";break;case\"esriGeometryPolyline\":d=\"polyline\";break;case\"esriGeometryPolygon\":d=\"polygon\";break;case\"esriGeometryExtent\":d=\"extent\";break;case\"esriGeometryMultipoint\":d=\"multipoint\";break;case\"\":case\"esriGeometryNull\":d=\"esriGeometryNull\"}if(\"esriGeometryNull\"!==d)for(const h of l)h.geometry&&h.geometry instanceof _geometry_Geometry_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"]==!1&&(h.geometry.type=d,void 0===h.geometry.spatialReference&&(h.geometry.spatialReference=n));else for(const u of l)u.geometry&&(u.geometry=null);const p={outFields:[\"*\"],source:l,fields:o,types:i,typeIdField:s,objectIdField:r,spatialReference:t};\"\"!==d&&\"esriGeometryNull\"!==d&&null!==d&&(p.geometryType=d);const m=new _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"](p);return new f({layer:m,spatialReference:t,isTable:null===d||\"\"===d||\"esriGeometryNull\"===d})}async queryAttachments(){return[]}async getFeatureByObjectId(e){const t=new _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"];t.where=this.objectIdField+\"=\"+e.toString();const r=await this._layer.queryFeatures(t);return 1===r.features.length?r.features[0]:null}async getOwningSystemUrl(){return\"\"}async getIdentityUser(){return\"\"}get preferredTimeReference(){return this._layer?.preferredTimeReference?.toJSON()??null}get dateFieldsTimeReference(){return this._layer?.dateFieldsTimeReference?.toJSON()??null}get datesInUnknownTimezone(){return this._layer?.datesInUnknownTimezone}get editFieldsInfo(){return this._layer?.editFieldsInfo?.toJSON()??null}get timeInfo(){return this._layer?.timeInfo?.toJSON()??null}}\n\n\n//# sourceURL=webpack://arcgis-starter/./node_modules/@arcgis/core/arcade/featureset/sources/FeatureLayerMemory.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/arcade/featureset/sources/FeatureLayerRelated.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/arcade/featureset/sources/FeatureLayerRelated.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ d)\n/* harmony export */ });\n/* harmony import */ var _Graphic_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../Graphic.js */ \"./node_modules/@arcgis/core/Graphic.js\");\n/* harmony import */ var _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../support/errorsupport.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/errorsupport.js\");\n/* harmony import */ var _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../support/FeatureSet.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/FeatureSet.js\");\n/* harmony import */ var _support_IdSet_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../support/IdSet.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/IdSet.js\");\n/* harmony import */ var _support_shared_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../support/shared.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/shared.js\");\n/* harmony import */ var _rest_support_RelationshipQuery_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../rest/support/RelationshipQuery.js */ \"./node_modules/@arcgis/core/rest/support/RelationshipQuery.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nclass d extends _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"]{constructor(e){super(e),this.declaredClass=\"esri.arcade.featureset.sources.FeatureLayerRelated\",this._findObjectId=-1,this._requestStandardised=!1,this._removeGeometry=!1,this._overrideFields=null,this.featureObjectId=null,e.spatialReference&&(this.spatialReference=e.spatialReference),this._transparent=!0,this._maxProcessing=1e3,this._layer=e.layer,this._wset=null,this._findObjectId=e.objectId,this.featureObjectId=e.objectId,this.relationship=e.relationship,this._relatedLayer=e.relatedLayer,void 0!==e.outFields&&(this._overrideFields=e.outFields),void 0!==e.includeGeometry&&(this._removeGeometry=!1===e.includeGeometry)}_maxQueryRate(){return _support_shared_js__WEBPACK_IMPORTED_MODULE_4__.defaultMaxRecords}end(){return this._layer}optimisePagingFeatureQueries(){}async loadImpl(){return await Promise.all([this._layer.load(),this._relatedLayer?.load()]),this._initialiseFeatureSet(),this}nativeCapabilities(){return this._relatedLayer.nativeCapabilities()}_initialiseFeatureSet(){if(null==this.spatialReference&&(this.spatialReference=this._layer.spatialReference),this.geometryType=this._relatedLayer.geometryType,this.fields=this._relatedLayer.fields.slice(0),null!==this._overrideFields)if(1===this._overrideFields.length&&\"*\"===this._overrideFields[0])this._overrideFields=null;else{const e=[],t=[];for(const r of this.fields)if(\"oid\"===r.type)e.push(r),t.push(r.name);else for(const i of this._overrideFields)if(i.toLowerCase()===r.name.toLowerCase()){e.push(r),t.push(r.name);break}this.fields=e,this._overrideFields=t}const e=this._layer.nativeCapabilities();e&&(this._databaseType=e.databaseType,this._requestStandardised=e.requestStandardised),this.objectIdField=this._relatedLayer.objectIdField,this.globalIdField=this._relatedLayer.globalIdField,this.hasM=this._relatedLayer.supportsM,this.hasZ=this._relatedLayer.supportsZ,this.typeIdField=this._relatedLayer.typeIdField,this.types=this._relatedLayer.types}async databaseType(){return await this._relatedLayer.databaseType(),this._databaseType=this._relatedLayer._databaseType,this._databaseType}isTable(){return this._relatedLayer.isTable()}_isInFeatureSet(){return _support_shared_js__WEBPACK_IMPORTED_MODULE_4__.IdState.InFeatureSet}_candidateIdTransform(e){return e}async _getSet(e){if(null===this._wset){await this._ensureLoaded();const t=await this._getFilteredSet(\"\",null,null,null,e);return this._wset=t,t}return this._wset}_changeFeature(t){const r={};for(const e of this.fields)r[e.name]=t.attributes[e.name];return new _Graphic_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({geometry:!0===this._removeGeometry?null:t.geometry,attributes:r})}async _getFilteredSet(e,t,r,i,a){if(await this.databaseType(),this.isTable()&&t&&null!==e&&\"\"!==e){return new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"]([],[],!0,null)}const n=this._layer.nativeCapabilities();if(!1===n.canQueryRelated){return new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"]([],[],!0,null)}if(n.capabilities?.queryRelated&&n.capabilities.queryRelated.supportsPagination)return this._getFilteredSetUsingPaging(e,t,r,i,a);let d=\"\",o=!1;null!==i&&n.capabilities&&n.capabilities.queryRelated&&!0===n.capabilities.queryRelated.supportsOrderBy&&(d=i.constructClause(),o=!0);const u=new _rest_support_RelationshipQuery_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"];u.objectIds=[this._findObjectId];const h=null!==this._overrideFields?this._overrideFields:this._fieldsIncludingObjectId(this._relatedLayer.fields?this._relatedLayer.fields.map((e=>e.name)):[\"*\"]);u.outFields=h,u.relationshipId=this.relationship.id,u.where=\"1=1\";let c=!0;!0===this._removeGeometry&&(c=!1),u.returnGeometry=c,this._requestStandardised&&(u.sqlFormat=\"standard\"),u.outSpatialReference=this.spatialReference,u.orderByFields=\"\"!==d?d.split(\",\"):null;const y=await n.source.queryRelatedFeatures(u);this._checkCancelled(a);const p=y[this._findObjectId]?y[this._findObjectId].features:[],_=[];for(let s=0;s<p.length;s++)this._featureCache[p[s].attributes[this._relatedLayer.objectIdField]]=p[s],_.push(p[s].attributes[this._relatedLayer.objectIdField]);const f=t&&null!==e&&\"\"!==e,g=null!=r;return new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"](f||g?_:[],f||g?[]:_,o,null)}_fieldsIncludingObjectId(e){if(null===e)return[this.objectIdField];const t=e.slice(0);if(t.includes(\"*\"))return t;let r=!1;for(const i of t)if(i.toUpperCase()===this.objectIdField.toUpperCase()){r=!0;break}return!1===r&&t.push(this.objectIdField),t}async _getFilteredSetUsingPaging(e,t,r,i,a){let n=\"\",l=!1;const d=this._layer.nativeCapabilities();null!==i&&d&&d.capabilities?.queryRelated&&!0===d.capabilities.queryRelated.supportsOrderBy&&(n=i.constructClause(),l=!0),await this.databaseType();const o=\"1=1\";let u=this._maxQueryRate();const h=d.capabilities?.query.maxRecordCount;null!=h&&h<u&&(u=h);const c=t&&null!==e&&\"\"!==e,y=null!=r;let p=null,_=!0;!0===this._removeGeometry&&(_=!1);const f=null!==this._overrideFields?this._overrideFields:this._fieldsIncludingObjectId(this._relatedLayer.fields?this._relatedLayer.fields.map((e=>e.name)):[\"*\"]);return p=new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"](c||y?[\"GETPAGES\"]:[],c||y?[]:[\"GETPAGES\"],l,{outFields:f.join(\",\"),resultRecordCount:u,resultOffset:0,objectIds:[this._findObjectId],where:o,orderByFields:n,returnGeometry:_,returnIdsOnly:\"false\",internal:{set:[],lastRetrieved:0,lastPage:0,fullyResolved:!1}}),await this._expandPagedSet(p,u,0,0,a),p}_expandPagedSet(e,t,r,i,s){return this._expandPagedSetFeatureSet(e,t,r,i,s)}_clonePageDefinition(e){return null===e?null:!0!==e.groupbypage?{groupbypage:!1,outFields:e.outFields,resultRecordCount:e.resultRecordCount,resultOffset:e.resultOffset,where:e.where,objectIds:e.objectIds,orderByFields:e.orderByFields,returnGeometry:e.returnGeometry,returnIdsOnly:e.returnIdsOnly,internal:e.internal}:{groupbypage:!0,outFields:e.outFields,resultRecordCount:e.resultRecordCount,useOIDpagination:e.useOIDpagination,generatedOid:e.generatedOid,groupByFieldsForStatistics:e.groupByFieldsForStatistics,resultOffset:e.resultOffset,outStatistics:e.outStatistics,geometry:e.geometry,where:e.where,objectIds:e.objectIds,orderByFields:e.orderByFields,returnGeometry:e.returnGeometry,returnIdsOnly:e.returnIdsOnly,internal:e.internal}}async _getPhysicalPage(e,t,r){const i=e.pagesDefinition.internal.lastRetrieved,s=i,a=e.pagesDefinition.internal.lastPage,n=this._layer.nativeCapabilities(),d=new _rest_support_RelationshipQuery_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"];!0===this._requestStandardised&&(d.sqlFormat=\"standard\"),d.relationshipId=this.relationship.id,d.objectIds=e.pagesDefinition.objectIds,d.resultOffset=e.pagesDefinition.internal.lastPage,d.resultRecordCount=e.pagesDefinition.resultRecordCount,d.outFields=e.pagesDefinition.outFields.split(\",\"),d.where=e.pagesDefinition.where,d.orderByFields=\"\"!==e.pagesDefinition.orderByFields?e.pagesDefinition.orderByFields.split(\",\"):null,d.returnGeometry=e.pagesDefinition.returnGeometry,d.outSpatialReference=this.spatialReference;const o=await n.source.queryRelatedFeatures(d);if(this._checkCancelled(r),e.pagesDefinition.internal.lastPage!==a)return 0;const u=o[this._findObjectId]?o[this._findObjectId].features:[];for(let l=0;l<u.length;l++)e.pagesDefinition.internal.set[s+l]=u[l].attributes[this._relatedLayer.objectIdField];for(let l=0;l<u.length;l++)this._featureCache[u[l].attributes[this._relatedLayer.objectIdField]]=u[l];const h=!o[this._findObjectId]||!1===o[this._findObjectId].exceededTransferLimit;return u.length!==e.pagesDefinition.resultRecordCount&&h&&(e.pagesDefinition.internal.fullyResolved=!0),e.pagesDefinition.internal.lastRetrieved=i+u.length,e.pagesDefinition.internal.lastPage+=e.pagesDefinition.resultRecordCount,u.length}async _getFeatures(e,i,s,a){const n=[];-1!==i&&void 0===this._featureCache[i]&&n.push(i);const l=this._maxQueryRate();if(!0===this._checkIfNeedToExpandKnownPage(e,l))return await this._expandPagedSet(e,l,0,0,a),this._getFeatures(e,i,s,a);let d=0;for(let t=e._lastFetchedIndex;t<e._known.length&&(d++,d<=s&&(e._lastFetchedIndex+=1),!(\"GETPAGES\"!==e._known[t]&&void 0===this._featureCache[e._known[t]]&&(e._known[t]!==i&&n.push(e._known[t]),n.length>s)))&&!(d>=s&&0===n.length);t++);if(0===n.length)return\"success\";throw new _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_1__.FeatureSetError(_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_1__.FeatureSetErrorCodes.MissingFeatures)}async _refineSetBlock(e,t,r){return e}async _stat(e,t,r,i,s,a,n){return{calculated:!1}}get gdbVersion(){return this._relatedLayer.gdbVersion}async _canDoAggregates(e,t,r,i,s){return!1}relationshipMetaData(){return this._relatedLayer.relationshipMetaData()}serviceUrl(){return this._relatedLayer.serviceUrl()}queryAttachments(e,t,r,i,s){return this._relatedLayer.queryAttachments(e,t,r,i,s)}getFeatureByObjectId(e,t){return this._relatedLayer.getFeatureByObjectId(e,t)}getOwningSystemUrl(){return this._relatedLayer.getOwningSystemUrl()}getIdentityUser(){return this._relatedLayer.getIdentityUser()}getDataSourceFeatureSet(){return this._relatedLayer}get preferredTimeReference(){return this._relatedLayer?.preferredTimeReference??null}get dateFieldsTimeReference(){return this._relatedLayer?.dateFieldsTimeReference??null}get datesInUnknownTimezone(){return this._relatedLayer?.datesInUnknownTimezone}get editFieldsInfo(){return this._relatedLayer?.editFieldsInfo??null}get timeInfo(){return this._relatedLayer?.timeInfo??null}}\n\n\n//# sourceURL=webpack://arcgis-starter/./node_modules/@arcgis/core/arcade/featureset/sources/FeatureLayerRelated.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/arcade/featureset/support/OrderbyClause.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@arcgis/core/arcade/featureset/support/OrderbyClause.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ e)\n/* harmony export */ });\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nfunction t(t,e){return t===e?0:null===t?-1:null===e?1:t<e?-1:1}class e{constructor(t){const e=t.split(\",\");this._fields=[],this._directions=[];for(let s=0;s<e.length;s++){const t=e[s].match(/\\S+/g);this._fields.push(t[0]),2===t.length?\"asc\"===t[1].toLowerCase()?this._directions.push(1):this._directions.push(0):this._directions.push(1)}}constructClause(){let t=\"\";for(let e=0;e<this._fields.length;e++)0!==e&&(t+=\",\"),t+=this._fields[e],1===this._directions[e]?t+=\" ASC\":t+=\" DESC\";return t}order(e){e.sort(((e,s)=>{for(let i=0;i<this._fields.length;i++){const r=this.featureValue(e.feature,this._fields[i],i),l=this.featureValue(s.feature,this._fields[i],i);let o=0;if(o=1===this._directions[i]?t(r,l):-1*t(r,l),0!==o)return o}return 0}))}scanForField(t){for(let e=0;e<this._fields.length;e++)if(this._fields[e].toLowerCase().trim()===t.toLowerCase().trim())return!0;return!1}replaceFields(t){let s=\"\";for(let e=0;e<this._fields.length;e++){0!==e&&(s+=\",\");let i=this._fields[e];for(const e of t)if(i.toLowerCase()===e.field.toLowerCase()){i=e.newfield;break}s+=i,1===this._directions[e]?s+=\" ASC\":s+=\" DESC\"}return new e(s)}featureValue(t,e,s){const i=t.attributes[e];if(void 0!==i)return i;for(const r in t.attributes)if(e.toLowerCase()===r.toLowerCase())return this._fields[s]=r,t.attributes[r];return null}}\n\n\n//# sourceURL=webpack://arcgis-starter/./node_modules/@arcgis/core/arcade/featureset/support/OrderbyClause.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/arcade/featureset/support/StatsField.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@arcgis/core/arcade/featureset/support/StatsField.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ a)\n/* harmony export */ });\n/* harmony import */ var _errorsupport_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errorsupport.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/errorsupport.js\");\n/* harmony import */ var _shared_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./shared.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/shared.js\");\n/* harmony import */ var _sqlUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./sqlUtils.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/sqlUtils.js\");\n/* harmony import */ var _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/sql/WhereClause.js */ \"./node_modules/@arcgis/core/core/sql/WhereClause.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nfunction s(s){if(\"function\"===s.parseTree.type){if(0===s.parseTree.args.value.length)return{name:s.parseTree.name,expr:null};if(s.parseTree.args.value.length>1)throw new _errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.SqlError(_errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.SqlErrorCodes.MissingStatisticParameters);const a=_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_3__.WhereClause.create((0,_sqlUtils_js__WEBPACK_IMPORTED_MODULE_2__.toWhereClauseFromTree)(s.parseTree.args.value[0],_shared_js__WEBPACK_IMPORTED_MODULE_1__.FeatureServiceDatabaseType.Standardised,s.parameters),s.fieldsIndex);return{name:s.parseTree.name,expr:a}}return null}class a{constructor(){this.field=\"\",this.tofieldname=\"\",this.typeofstat=\"MIN\",this.workingexpr=null}clone(){const e=new a;return e.field=this.field,e.tofieldname=this.tofieldname,e.typeofstat=this.typeofstat,e.workingexpr=this.workingexpr,e}static parseStatField(r,n,o){const l=new a;l.field=r;const p=_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_3__.WhereClause.create(n,o),f=s(p);if(null===f)throw new _errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.SqlError(_errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.SqlErrorCodes.UnsupportedSqlFunction,{function:\"\"});const u=f.name.toUpperCase().trim();if(\"MIN\"===u){if(l.typeofstat=\"MIN\",l.workingexpr=f.expr,null===p)throw new _errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.SqlError(_errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.SqlErrorCodes.InvalidFunctionParameters,{function:\"min\"})}else if(\"MAX\"===u){if(l.typeofstat=\"MAX\",l.workingexpr=f.expr,null===p)throw new _errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.SqlError(_errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.SqlErrorCodes.InvalidFunctionParameters,{function:\"max\"})}else if(\"COUNT\"===u)l.typeofstat=\"COUNT\",l.workingexpr=f.expr;else if(\"STDEV\"===u){if(l.typeofstat=\"STDDEV\",l.workingexpr=f.expr,null===p)throw new _errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.SqlError(_errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.SqlErrorCodes.InvalidFunctionParameters,{function:\"stdev\"})}else if(\"SUM\"===u){if(l.typeofstat=\"SUM\",l.workingexpr=f.expr,null===p)throw new _errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.SqlError(_errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.SqlErrorCodes.InvalidFunctionParameters,{function:\"sum\"})}else if(\"MEAN\"===u){if(l.typeofstat=\"AVG\",l.workingexpr=f.expr,null===p)throw new _errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.SqlError(_errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.SqlErrorCodes.InvalidFunctionParameters,{function:u})}else if(\"AVG\"===u){if(l.typeofstat=\"AVG\",l.workingexpr=f.expr,null===p)throw new _errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.SqlError(_errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.SqlErrorCodes.InvalidFunctionParameters,{function:\"avg\"})}else{if(\"VAR\"!==u)throw new _errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.SqlError(_errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.SqlErrorCodes.UnsupportedSqlFunction,{function:u});if(l.typeofstat=\"VAR\",l.workingexpr=f.expr,null===p)throw new _errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.SqlError(_errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.SqlErrorCodes.InvalidFunctionParameters,{function:\"var\"})}return l}toStatisticsName(){switch(this.typeofstat.toUpperCase()){case\"MIN\":return\"min\";case\"MAX\":return\"max\";case\"SUM\":return\"sum\";case\"COUNT\":default:return\"count\";case\"VAR\":return\"var\";case\"STDDEV\":return\"stddev\";case\"AVG\":return\"avg\"}}}\n\n\n//# sourceURL=webpack://arcgis-starter/./node_modules/@arcgis/core/arcade/featureset/support/StatsField.js?");

/***/ })

}]);