"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkarcgis_starter"] = self["webpackChunkarcgis_starter"] || []).push([["node_modules_arcgis_core_views_3d_layers_PointCloudWorker_js"],{

/***/ "./node_modules/@arcgis/core/views/3d/layers/PointCloudWorker.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/PointCloudWorker.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ h)\n/* harmony export */ });\n/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/maybe.js */ \"./node_modules/@arcgis/core/core/maybe.js\");\n/* harmony import */ var _core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/typedArrayUtil.js */ \"./node_modules/@arcgis/core/core/typedArrayUtil.js\");\n/* harmony import */ var _chunks_quat_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../chunks/quat.js */ \"./node_modules/@arcgis/core/chunks/quat.js\");\n/* harmony import */ var _chunks_quatf32_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../chunks/quatf32.js */ \"./node_modules/@arcgis/core/chunks/quatf32.js\");\n/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../chunks/vec3.js */ \"./node_modules/@arcgis/core/chunks/vec3.js\");\n/* harmony import */ var _chunks_vec3f32_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../chunks/vec3f32.js */ \"./node_modules/@arcgis/core/chunks/vec3f32.js\");\n/* harmony import */ var _geometry_projection_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../geometry/projection.js */ \"./node_modules/@arcgis/core/geometry/projection.js\");\n/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../geometry/SpatialReference.js */ \"./node_modules/@arcgis/core/geometry/SpatialReference.js\");\n/* harmony import */ var _i3s_PointCloudWorkerUtil_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./i3s/PointCloudWorkerUtil.js */ \"./node_modules/@arcgis/core/views/3d/layers/i3s/PointCloudWorkerUtil.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nclass c{transform(e){const a=this._transform(e),o=[a.points.buffer,a.rgb.buffer];(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.isSome)(a.pointIdFilterMap)&&o.push(a.pointIdFilterMap.buffer);for(const t of a.attributes)\"buffer\"in t.values&&(0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_1__.isArrayBuffer)(t.values.buffer)&&t.values.buffer!==a.rgb.buffer&&o.push(t.values.buffer);return Promise.resolve({result:a,transferList:o})}_transform(r){const e=(0,_i3s_PointCloudWorkerUtil_js__WEBPACK_IMPORTED_MODULE_8__.readGeometry)(r.schema,r.geometryBuffer);let a=e.length/3,o=null;const f=[],i=(0,_i3s_PointCloudWorkerUtil_js__WEBPACK_IMPORTED_MODULE_8__.getAttributeValues)(r.primaryAttributeData,e,a);(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.isSome)(r.primaryAttributeData)&&i&&f.push({attributeInfo:r.primaryAttributeData.attributeInfo,values:i});const n=(0,_i3s_PointCloudWorkerUtil_js__WEBPACK_IMPORTED_MODULE_8__.getAttributeValues)(r.modulationAttributeData,e,a);(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.isSome)(r.modulationAttributeData)&&n&&f.push({attributeInfo:r.modulationAttributeData.attributeInfo,values:n});let c=(0,_i3s_PointCloudWorkerUtil_js__WEBPACK_IMPORTED_MODULE_8__.evaluateRenderer)(r.rendererInfo,i,n,a);if(r.filterInfo&&r.filterInfo.length>0&&(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.isSome)(r.filterAttributesData)){const i=r.filterAttributesData.filter(_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.isSome).map((t=>{const r=(0,_i3s_PointCloudWorkerUtil_js__WEBPACK_IMPORTED_MODULE_8__.getAttributeValues)(t,e,a),o={attributeInfo:t.attributeInfo,values:r};return f.push(o),o}));o=new Uint32Array(a),a=(0,_i3s_PointCloudWorkerUtil_js__WEBPACK_IMPORTED_MODULE_8__.filterInPlace)(e,c,o,r.filterInfo,i)}for(const t of r.userAttributesData){const r=(0,_i3s_PointCloudWorkerUtil_js__WEBPACK_IMPORTED_MODULE_8__.getAttributeValues)(t,e,a);f.push({attributeInfo:t.attributeInfo,values:r})}3*a<c.length&&(c=new Uint8Array(c.buffer.slice(0,3*a))),this._applyElevationOffsetInPlace(e,a,r.elevationOffset);const p=this._transformCoordinates(e,a,r.obb,_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].fromJSON(r.inSR),_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].fromJSON(r.outSR));return{obb:r.obb,points:p,rgb:c,attributes:f,pointIdFilterMap:o}}_transformCoordinates(t,r,a,s,u){if(!(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_6__.projectBuffer)(t,s,0,t,u,0,r))throw new Error(\"Can't reproject\");const l=(0,_chunks_vec3f32_js__WEBPACK_IMPORTED_MODULE_5__.f)(a.center[0],a.center[1],a.center[2]),b=(0,_chunks_vec3f32_js__WEBPACK_IMPORTED_MODULE_5__.c)(),m=(0,_chunks_vec3f32_js__WEBPACK_IMPORTED_MODULE_5__.c)();(0,_chunks_quat_js__WEBPACK_IMPORTED_MODULE_2__.c)(p,a.quaternion);const c=new Float32Array(3*r);for(let e=0;e<r;e++)b[0]=t[3*e]-l[0],b[1]=t[3*e+1]-l[1],b[2]=t[3*e+2]-l[2],(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.q)(m,b,p),a.halfSize[0]=Math.max(a.halfSize[0],Math.abs(m[0])),a.halfSize[1]=Math.max(a.halfSize[1],Math.abs(m[1])),a.halfSize[2]=Math.max(a.halfSize[2],Math.abs(m[2])),c[3*e]=b[0],c[3*e+1]=b[1],c[3*e+2]=b[2];return c}_applyElevationOffsetInPlace(t,r,e){if(0!==e)for(let a=0;a<r;a++)t[3*a+2]+=e}}const p=(0,_chunks_quatf32_js__WEBPACK_IMPORTED_MODULE_3__.c)();function h(){return new c}\n\n\n//# sourceURL=webpack://arcgis-starter/./node_modules/@arcgis/core/views/3d/layers/PointCloudWorker.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/PointCloudWorkerUtil.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/PointCloudWorkerUtil.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"elevationFromPositions\": () => (/* binding */ d),\n/* harmony export */   \"evaluateRenderer\": () => (/* binding */ f),\n/* harmony export */   \"filterInPlace\": () => (/* binding */ m),\n/* harmony export */   \"getAttributeValues\": () => (/* binding */ a),\n/* harmony export */   \"readGeometry\": () => (/* binding */ c)\n/* harmony export */ });\n/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/maybe.js */ \"./node_modules/@arcgis/core/core/maybe.js\");\n/* harmony import */ var _renderers_PointCloudClassBreaksRenderer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../renderers/PointCloudClassBreaksRenderer.js */ \"./node_modules/@arcgis/core/renderers/PointCloudClassBreaksRenderer.js\");\n/* harmony import */ var _renderers_PointCloudStretchRenderer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../renderers/PointCloudStretchRenderer.js */ \"./node_modules/@arcgis/core/renderers/PointCloudStretchRenderer.js\");\n/* harmony import */ var _renderers_PointCloudUniqueValueRenderer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../renderers/PointCloudUniqueValueRenderer.js */ \"./node_modules/@arcgis/core/renderers/PointCloudUniqueValueRenderer.js\");\n/* harmony import */ var _I3SBinaryReader_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./I3SBinaryReader.js */ \"./node_modules/@arcgis/core/views/3d/layers/i3s/I3SBinaryReader.js\");\n/* harmony import */ var _LEPCC_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./LEPCC.js */ \"./node_modules/@arcgis/core/views/3d/layers/i3s/LEPCC.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nfunction f(e,o,n,s){const{rendererJSON:i,isRGBRenderer:u}=e;let f=null,c=null;if(o&&u)f=o;else if(o&&\"pointCloudUniqueValueRenderer\"===i?.type){c=_renderers_PointCloudUniqueValueRenderer_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].fromJSON(i);const e=c.colorUniqueValueInfos;f=new Uint8Array(3*s);const r=b(c.fieldTransformType);for(let t=0;t<s;t++){const l=(r?r(o[t]):o[t])+\"\";for(let o=0;o<e.length;o++)if(e[o].values.includes(l)){f[3*t]=e[o].color.r,f[3*t+1]=e[o].color.g,f[3*t+2]=e[o].color.b;break}}}else if(o&&\"pointCloudStretchRenderer\"===i?.type){c=_renderers_PointCloudStretchRenderer_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].fromJSON(i);const e=c.stops;f=new Uint8Array(3*s);const r=b(c.fieldTransformType);for(let t=0;t<s;t++){const l=r?r(o[t]):o[t],n=e.length-1;if(l<e[0].value)f[3*t]=e[0].color.r,f[3*t+1]=e[0].color.g,f[3*t+2]=e[0].color.b;else if(l>=e[n].value)f[3*t]=e[n].color.r,f[3*t+1]=e[n].color.g,f[3*t+2]=e[n].color.b;else for(let o=1;o<e.length;o++)if(l<e[o].value){const r=(l-e[o-1].value)/(e[o].value-e[o-1].value);f[3*t]=e[o].color.r*r+e[o-1].color.r*(1-r),f[3*t+1]=e[o].color.g*r+e[o-1].color.g*(1-r),f[3*t+2]=e[o].color.b*r+e[o-1].color.b*(1-r);break}}}else if(o&&\"pointCloudClassBreaksRenderer\"===i?.type){c=_renderers_PointCloudClassBreaksRenderer_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].fromJSON(i);const e=c.colorClassBreakInfos;f=new Uint8Array(3*s);const t=b(c.fieldTransformType);for(let r=0;r<s;r++){const l=t?t(o[r]):o[r];for(let o=0;o<e.length;o++)if(l>=e[o].minValue&&l<=e[o].maxValue){f[3*r]=e[o].color.r,f[3*r+1]=e[o].color.g,f[3*r+2]=e[o].color.b;break}}}else{f=new Uint8Array(3*s);for(let e=0;e<f.length;e++)f[e]=255}if(n&&c&&c.colorModulation){const e=c.colorModulation.minValue,o=c.colorModulation.maxValue,r=.3;for(let t=0;t<s;t++){const l=n[t],s=l>=o?1:l<=e?r:r+(1-r)*(l-e)/(o-e);f[3*t]=s*f[3*t],f[3*t+1]=s*f[3*t+1],f[3*t+2]=s*f[3*t+2]}}return f}function c(o,r){if(null==o.encoding||\"\"===o.encoding){const t=(0,_I3SBinaryReader_js__WEBPACK_IMPORTED_MODULE_4__.createGeometryIndexFromSchema)(r,o);if((0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.isNone)(t.vertexAttributes.position))return;const l=(0,_I3SBinaryReader_js__WEBPACK_IMPORTED_MODULE_4__.createTypedView)(r,t.vertexAttributes.position),i=t.header.fields,u=[i.offsetX,i.offsetY,i.offsetZ],f=[i.scaleX,i.scaleY,i.scaleZ],c=l.length/3,a=new Float64Array(3*c);for(let e=0;e<c;e++)a[3*e]=l[3*e]*f[0]+u[0],a[3*e+1]=l[3*e+1]*f[1]+u[1],a[3*e+2]=l[3*e+2]*f[2]+u[2];return a}if(\"lepcc-xyz\"===o.encoding)return (0,_LEPCC_js__WEBPACK_IMPORTED_MODULE_5__.decodeXYZ)(r).result}function a(e,r,t){return (0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.isSome)(e)&&e.attributeInfo.useElevation?r?d(r,t):null:(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.isSome)(e)&&e.attributeInfo.storageInfo?(0,_I3SBinaryReader_js__WEBPACK_IMPORTED_MODULE_4__.readBinaryAttribute)(e.attributeInfo.storageInfo,e.buffer,t):null}function d(e,o){const r=new Float64Array(o);for(let t=0;t<o;t++)r[t]=e[3*t+2];return r}function m(e,o,r,t,l){const n=e.length/3;let s=0;for(let i=0;i<n;i++){let n=!0;for(let e=0;e<t.length&&n;e++){const{filterJSON:o}=t[e],r=l[e].values[i];switch(o.type){case\"pointCloudValueFilter\":{const e=\"exclude\"===o.mode;o.values.includes(r)===e&&(n=!1);break}case\"pointCloudBitfieldFilter\":{const e=p(o.requiredSetBits),t=p(o.requiredClearBits);(r&e)===e&&0==(r&t)||(n=!1);break}case\"pointCloudReturnFilter\":{const e=15&r,t=r>>>4&15,l=t>1,s=1===e,i=e===t;let u=!1;for(const r of o.includedReturns)if(\"last\"===r&&i||\"firstOfMany\"===r&&s&&l||\"lastOfMany\"===r&&i&&l||\"single\"===r&&!l){u=!0;break}u||(n=!1);break}}}n&&(r[s]=i,e[3*s]=e[3*i],e[3*s+1]=e[3*i+1],e[3*s+2]=e[3*i+2],o[3*s]=o[3*i],o[3*s+1]=o[3*i+1],o[3*s+2]=o[3*i+2],s++)}return s}function b(e){return null==e||\"none\"===e?null:\"low-four-bit\"===e?e=>15&e:\"high-four-bit\"===e?e=>(240&e)>>4:\"absolute-value\"===e?e=>Math.abs(e):\"modulo-ten\"===e?e=>e%10:null}function p(e){let o=0;for(const r of e||[])o|=1<<r;return o}\n\n\n//# sourceURL=webpack://arcgis-starter/./node_modules/@arcgis/core/views/3d/layers/i3s/PointCloudWorkerUtil.js?");

/***/ })

}]);