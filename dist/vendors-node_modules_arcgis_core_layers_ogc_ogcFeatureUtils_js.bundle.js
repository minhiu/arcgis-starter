"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkarcgis_starter"] = self["webpackChunkarcgis_starter"] || []).push([["vendors-node_modules_arcgis_core_layers_ogc_ogcFeatureUtils_js"],{

/***/ "./node_modules/@arcgis/core/layers/graphics/sources/geojson/geojson.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/sources/geojson/geojson.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createOptimizedFeatures\": () => (/* binding */ I),\n/* harmony export */   \"getGeometryType\": () => (/* binding */ s),\n/* harmony export */   \"inferLayerProperties\": () => (/* binding */ L),\n/* harmony export */   \"validateGeoJSON\": () => (/* binding */ T)\n/* harmony export */ });\n/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/Error.js */ \"./node_modules/@arcgis/core/core/Error.js\");\n/* harmony import */ var _OptimizedFeature_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../OptimizedFeature.js */ \"./node_modules/@arcgis/core/layers/graphics/OptimizedFeature.js\");\n/* harmony import */ var _OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../OptimizedGeometry.js */ \"./node_modules/@arcgis/core/layers/graphics/OptimizedGeometry.js\");\n/* harmony import */ var _support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../support/fieldUtils.js */ \"./node_modules/@arcgis/core/layers/support/fieldUtils.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nconst i={LineString:\"esriGeometryPolyline\",MultiLineString:\"esriGeometryPolyline\",MultiPoint:\"esriGeometryMultipoint\",Point:\"esriGeometryPoint\",Polygon:\"esriGeometryPolygon\",MultiPolygon:\"esriGeometryPolygon\"};function s(e){return i[e]}function*c(e){switch(e.type){case\"Feature\":yield e;break;case\"FeatureCollection\":for(const t of e.features)t&&(yield t)}}function*u(e){if(e)switch(e.type){case\"Point\":yield e.coordinates;break;case\"LineString\":case\"MultiPoint\":yield*e.coordinates;break;case\"MultiLineString\":case\"Polygon\":for(const t of e.coordinates)yield*t;break;case\"MultiPolygon\":for(const t of e.coordinates)for(const e of t)yield*e}}function*l(e,o={}){const{geometryType:r,objectIdField:i}=o;for(const c of e){const{geometry:e,properties:u,id:l}=c;if(e&&s(e.type)!==r)continue;const f=u||{};let a;i&&(a=f[i],null==l||a||(f[i]=a=l));const y=new _OptimizedFeature_js__WEBPACK_IMPORTED_MODULE_1__.OptimizedFeature(e?g(new _OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"],e,o):null,f,null,a??void 0);yield y}}function f(e){for(const t of e)if(t.length>2)return!0;return!1}function a(e){return!p(e)}function y(e){return p(e)}function p(e){let t=0;for(let n=0;n<e.length;n++){const o=e[n],r=e[(n+1)%e.length];t+=o[0]*r[1]-r[0]*o[1]}return t<=0}function d(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]||e.push(t),e}function g(e,t,n){switch(t.type){case\"LineString\":return m(e,t,n);case\"MultiLineString\":return h(e,t,n);case\"MultiPoint\":return w(e,t,n);case\"MultiPolygon\":return P(e,t,n);case\"Point\":return b(e,t,n);case\"Polygon\":return j(e,t,n)}}function m(e,t,n){return G(e,t.coordinates,n),e}function h(e,t,n){for(const o of t.coordinates)G(e,o,n);return e}function w(e,t,n){return G(e,t.coordinates,n),e}function P(e,t,n){for(const o of t.coordinates){S(e,o[0],n);for(let t=1;t<o.length;t++)F(e,o[t],n)}return e}function b(e,t,n){return k(e,t.coordinates,n),e}function j(e,t,n){const o=t.coordinates;S(e,o[0],n);for(let r=1;r<o.length;r++)F(e,o[r],n);return e}function S(e,t,n){const o=d(t);a(o)?M(e,o,n):G(e,o,n)}function F(e,t,n){const o=d(t);y(o)?M(e,o,n):G(e,o,n)}function G(e,t,n){for(const o of t)k(e,o,n);e.lengths.push(t.length)}function M(e,t,n){for(let o=t.length-1;o>=0;o--)k(e,t[o],n);e.lengths.push(t.length)}function k(e,t,n){const[o,r,i]=t;e.coords.push(o,r),n.hasZ&&e.coords.push(i||0)}function O(e){switch(typeof e){case\"string\":return\"esriFieldTypeString\";case\"number\":return\"esriFieldTypeDouble\";default:return\"unknown\"}}function T(t){if(!t)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"](\"geojson-layer:empty\",\"GeoJSON data is empty\");if(\"Feature\"!==t.type&&\"FeatureCollection\"!==t.type)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"](\"geojson-layer:unsupported-geojson-object\",\"missing or not supported GeoJSON object type\",{data:t});const{crs:n}=t;if(!n)return;const o=\"string\"==typeof n?n:\"name\"===n.type?n.properties.name:\"EPSG\"===n.type?n.properties.code:null,r=new RegExp(\".*(CRS84H?|4326)$\",\"i\");if(!o||!r.test(o))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"](\"geojson-layer:unsupported-crs\",\"unsupported GeoJSON 'crs' member\",{crs:n})}function L(e,t={}){const n=[],i=new Set,l=new Set;let a,y=!1,p=null,d=!1,{geometryType:g=null}=t,m=!1;for(const r of c(e)){const{geometry:e,properties:t,id:c}=r;if(!e||(g||(g=s(e.type)),s(e.type)===g)){if(!y){y=f(u(e))}if(d||(d=null!=c,d&&(a=typeof c,t&&(p=Object.keys(t).filter((e=>t[e]===c))))),t&&p&&d&&null!=c&&(p.length>1?p=p.filter((e=>t[e]===c)):1===p.length&&(p=t[p[0]]===c?p:[])),!m&&t){let e=!0;for(const r in t){if(i.has(r))continue;const s=t[r];if(null==s){e=!1,l.add(r);continue}const c=O(s);if(\"unknown\"===c){l.add(r);continue}l.delete(r),i.add(r);const u=(0,_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_3__.normalizeFieldName)(r);u&&n.push({name:u,alias:r,type:c})}m=e}}}const h=(0,_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_3__.normalizeFieldName)(1===p?.length&&p[0]||null)??void 0;if(h)for(const o of n)if(o.name===h&&(0,_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_3__.isNumericField)(o)){o.type=\"esriFieldTypeOID\";break}return{fields:n,geometryType:g,hasZ:y,objectIdFieldName:h,objectIdFieldType:a,unknownFields:Array.from(l)}}function I(e,t){return Array.from(l(c(e),t))}\n\n\n//# sourceURL=webpack://arcgis-starter/./node_modules/@arcgis/core/layers/graphics/sources/geojson/geojson.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/sources/support/clientSideDefaults.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/sources/support/clientSideDefaults.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createCapabilities\": () => (/* binding */ l),\n/* harmony export */   \"createDefaultAttributesFunction\": () => (/* binding */ i),\n/* harmony export */   \"createDefaultTemplate\": () => (/* binding */ a),\n/* harmony export */   \"createDrawingInfo\": () => (/* binding */ o)\n/* harmony export */ });\n/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/has.js */ \"./node_modules/@arcgis/core/core/has.js\");\n/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/lang.js */ \"./node_modules/@arcgis/core/core/lang.js\");\n/* harmony import */ var _data_QueryEngineCapabilities_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../data/QueryEngineCapabilities.js */ \"./node_modules/@arcgis/core/layers/graphics/data/QueryEngineCapabilities.js\");\n/* harmony import */ var _symbols_support_defaultsJSON_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../symbols/support/defaultsJSON.js */ \"./node_modules/@arcgis/core/symbols/support/defaultsJSON.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nfunction o(t){return{renderer:{type:\"simple\",symbol:\"esriGeometryPoint\"===t||\"esriGeometryMultipoint\"===t?_symbols_support_defaultsJSON_js__WEBPACK_IMPORTED_MODULE_3__.defaultPointSymbolJSON:\"esriGeometryPolyline\"===t?_symbols_support_defaultsJSON_js__WEBPACK_IMPORTED_MODULE_3__.defaultPolylineSymbolJSON:_symbols_support_defaultsJSON_js__WEBPACK_IMPORTED_MODULE_3__.defaultPolygonSymbolJSON}}}const u=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let n=1;function i(t,s){if((0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(\"esri-csp-restrictions\"))return()=>({[s]:null,...t});try{let e=`this.${s} = null;`;for(const s in t){e+=`this${u.test(s)?`.${s}`:`[\"${s}\"]`} = ${JSON.stringify(t[s])};`}const r=new Function(`\\n      return class AttributesClass$${n++} {\\n        constructor() {\\n          ${e};\\n        }\\n      }\\n    `)();return()=>new r}catch(e){return()=>({[s]:null,...t})}}function a(s={}){return[{name:\"New Feature\",description:\"\",prototype:{attributes:(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_1__.clone)(s)}}]}function l(t,e){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:t},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:e,supportsDelete:e,supportsEditing:e,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:e,supportsExceedsLimitStatistics:!0},query:_data_QueryEngineCapabilities_js__WEBPACK_IMPORTED_MODULE_2__.queryCapabilities,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:e,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}\n\n\n//# sourceURL=webpack://arcgis-starter/./node_modules/@arcgis/core/layers/graphics/sources/support/clientSideDefaults.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/layers/ogc/ogcFeatureUtils.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/ogc/ogcFeatureUtils.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"crsDefault\": () => (/* binding */ F),\n/* harmony export */   \"crsPrefix\": () => (/* binding */ j),\n/* harmony export */   \"getCollectionDefinition\": () => (/* binding */ I),\n/* harmony export */   \"getServerCollections\": () => (/* binding */ T),\n/* harmony export */   \"getServerConformance\": () => (/* binding */ k),\n/* harmony export */   \"getServerLandingPage\": () => (/* binding */ x),\n/* harmony export */   \"getServerOpenApi\": () => (/* binding */ S),\n/* harmony export */   \"getSpatialReferenceWkid\": () => (/* binding */ v),\n/* harmony export */   \"queryFeatureSetJSON\": () => (/* binding */ N),\n/* harmony export */   \"queryOptimizedFeatureSet\": () => (/* binding */ q)\n/* harmony export */ });\n/* harmony import */ var _geometry_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../geometry.js */ \"./node_modules/@arcgis/core/geometry.js\");\n/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../request.js */ \"./node_modules/@arcgis/core/request.js\");\n/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/Error.js */ \"./node_modules/@arcgis/core/core/Error.js\");\n/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/Logger.js */ \"./node_modules/@arcgis/core/core/Logger.js\");\n/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/maybe.js */ \"./node_modules/@arcgis/core/core/maybe.js\");\n/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../geometry/support/spatialReferenceUtils.js */ \"./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js\");\n/* harmony import */ var _geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../geometry/support/webMercatorUtils.js */ \"./node_modules/@arcgis/core/geometry/support/webMercatorUtils.js\");\n/* harmony import */ var _graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../graphics/featureConversionUtils.js */ \"./node_modules/@arcgis/core/layers/graphics/featureConversionUtils.js\");\n/* harmony import */ var _graphics_OptimizedFeatureSet_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../graphics/OptimizedFeatureSet.js */ \"./node_modules/@arcgis/core/layers/graphics/OptimizedFeatureSet.js\");\n/* harmony import */ var _graphics_sources_geojson_geojson_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../graphics/sources/geojson/geojson.js */ \"./node_modules/@arcgis/core/layers/graphics/sources/geojson/geojson.js\");\n/* harmony import */ var _graphics_sources_support_clientSideDefaults_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../graphics/sources/support/clientSideDefaults.js */ \"./node_modules/@arcgis/core/layers/graphics/sources/support/clientSideDefaults.js\");\n/* harmony import */ var _support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../support/FieldsIndex.js */ \"./node_modules/@arcgis/core/layers/support/FieldsIndex.js\");\n/* harmony import */ var _support_fieldType_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../support/fieldType.js */ \"./node_modules/@arcgis/core/layers/support/fieldType.js\");\n/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../geometry/SpatialReference.js */ \"./node_modules/@arcgis/core/geometry/SpatialReference.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nconst h=_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getLogger(\"esri.layers.graphics.sources.ogcfeature\"),j=\"http://www.opengis.net/def/crs/\",F=`${j}OGC/1.3/CRS84`;async function I(n,r,a={},o=5){const{links:s}=n,l=D(s,\"items\",\"application/geo+json\")||D(s,\"http://www.opengis.net/def/rel/ogc/1.0/items\",\"application/geo+json\");if((0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.isNone)(l))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"](\"ogc-feature-layer:missing-items-page\",\"Missing items url\");const{data:c}=await (0,_request_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(l.href,{signal:a.signal,query:{limit:o,...a.customParameters,token:a.apiKey},headers:{accept:\"application/geo+json\"}});await (0,_graphics_sources_geojson_geojson_js__WEBPACK_IMPORTED_MODULE_9__.validateGeoJSON)(c);const d=(0,_graphics_sources_geojson_geojson_js__WEBPACK_IMPORTED_MODULE_9__.inferLayerProperties)(c,{geometryType:r.geometryType}),u=r.fields||d.fields||[],f=null!=r.hasZ?r.hasZ:d.hasZ,b=d.geometryType,j=r.objectIdField||d.objectIdFieldName||\"OBJECTID\";let F=r.timeInfo;const I=u.find((({name:e})=>e===j));if(I)I.editable=!1,I.nullable=!1;else{if(!d.objectIdFieldType)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"](\"ogc-feature-layer:missing-feature-id\",\"Collection geojson require a feature id as a unique identifier\");u.unshift({name:j,alias:j,type:\"number\"===d.objectIdFieldType?\"esriFieldTypeOID\":\"esriFieldTypeString\",editable:!1,nullable:!1})}if(j!==d.objectIdFieldName){const e=u.find((({name:e})=>e===d.objectIdFieldName));e&&(e.type=\"esriFieldTypeInteger\")}u===d.fields&&d.unknownFields.length>0&&h.warn({name:\"ogc-feature-layer:unknown-field-types\",message:\"Some fields types couldn't be inferred from the features and were dropped\",details:{unknownFields:d.unknownFields}});for(const e of u){if(null==e.name&&(e.name=e.alias),null==e.alias&&(e.alias=e.name),\"esriFieldTypeOID\"!==e.type&&\"esriFieldTypeGlobalID\"!==e.type&&(e.editable=null==e.editable||!!e.editable,e.nullable=null==e.nullable||!!e.nullable),!e.name)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"](\"ogc-feature-layer:invalid-field-name\",\"field name is missing\",{field:e});if(!_support_fieldType_js__WEBPACK_IMPORTED_MODULE_12__.kebabDict.jsonValues.includes(e.type))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"](\"ogc-feature-layer:invalid-field-type\",`invalid type for field \"${e.name}\"`,{field:e})}if(F){const e=new _support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_11__[\"default\"](u);if(F.startTimeField){const t=e.get(F.startTimeField);t?(F.startTimeField=t.name,t.type=\"esriFieldTypeDate\"):F.startTimeField=null}if(F.endTimeField){const t=e.get(F.endTimeField);t?(F.endTimeField=t.name,t.type=\"esriFieldTypeDate\"):F.endTimeField=null}if(F.trackIdField){const t=e.get(F.trackIdField);t?F.trackIdField=t.name:(F.trackIdField=null,h.warn({name:\"ogc-feature-layer:invalid-timeInfo-trackIdField\",message:\"trackIdField is missing\",details:{timeInfo:F}}))}F.startTimeField||F.endTimeField||(h.warn({name:\"ogc-feature-layer:invalid-timeInfo\",message:\"startTimeField and endTimeField are missing\",details:{timeInfo:F}}),F=null)}return{drawingInfo:b?(0,_graphics_sources_support_clientSideDefaults_js__WEBPACK_IMPORTED_MODULE_10__.createDrawingInfo)(b):null,extent:W(n),geometryType:b,fields:u,hasZ:!!f,objectIdField:j,timeInfo:F}}async function T(n,r={}){const{links:a}=n,o=D(a,\"data\",\"application/json\")||D(a,\"http://www.opengis.net/def/rel/ogc/1.0/data\",\"application/json\");if((0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.isNone)(o))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"](\"ogc-feature-layer:missing-collections-page\",\"Missing collections url\");const{apiKey:s,customParameters:l,signal:c}=r,{data:d}=await (0,_request_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(o.href,{signal:c,headers:{accept:\"application/json\"},query:{...l,token:s}});return d}async function k(n,r={}){const{links:a}=n,o=D(a,\"conformance\",\"application/json\")||D(a,\"http://www.opengis.net/def/rel/ogc/1.0/conformance\",\"application/json\");if((0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.isNone)(o))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"](\"ogc-feature-layer:missing-conformance-page\",\"Missing conformance url\");const{apiKey:s,customParameters:l,signal:c}=r,{data:d}=await (0,_request_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(o.href,{signal:c,headers:{accept:\"application/json\"},query:{...l,token:s}});return d}async function x(t,n={}){const{apiKey:i,customParameters:r,signal:a}=n,{data:o}=await (0,_request_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(t,{signal:a,headers:{accept:\"application/json\"},query:{...r,token:i}});return o}async function S(t,n={}){const r=\"application/vnd.oai.openapi+json;version=3.0\",a=D(t.links,\"service-desc\",r);if((0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.isNone)(a))return h.warn(\"ogc-feature-layer:missing-openapi-page\",\"The OGC API-Features server does not have an OpenAPI page.\"),null;const{apiKey:o,customParameters:s,signal:l}=n,{data:c}=await (0,_request_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(a.href,{signal:l,headers:{accept:r},query:{...s,token:o}});return c}function v(e){const t=/^http:\\/\\/www\\.opengis.net\\/def\\/crs\\/(?<authority>.*)\\/(?<version>.*)\\/(?<code>.*)$/i.exec(e)?.groups;if(!t)return null;const{authority:n,code:i}=t;switch(n.toLowerCase()){case\"ogc\":switch(i.toLowerCase()){case\"crs27\":return _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_13__[\"default\"].GCS_NAD_1927.wkid;case\"crs83\":return 4269;case\"crs84\":case\"crs84h\":return _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_13__[\"default\"].WGS84.wkid;default:return null}case\"esri\":case\"epsg\":{const e=Number.parseInt(i,10);return Number.isNaN(e)?null:e}default:return null}}async function N(e,t,n){const i=await q(e,t,n);return (0,_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_7__.convertToFeatureSet)(i)}async function q(n,l,m){const{collection:p,layerDefinition:g,maxRecordCount:y,queryParameters:{apiKey:w,customParameters:h},spatialReference:j,supportedCrs:F}=n,{links:I}=p,T=D(I,\"items\",\"application/geo+json\")||D(I,\"http://www.opengis.net/def/rel/ogc/1.0/items\",\"application/geo+json\");if((0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.isNone)(T))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"](\"ogc-feature-layer:missing-items-page\",\"Missing items url\");const{geometry:k,num:x,start:S,timeExtent:v,where:N}=l;if(l.objectIds)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"](\"ogc-feature-layer:query-by-objectids-not-supported\",\"Queries with objectids are not supported\");const q=_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_13__[\"default\"].fromJSON(j),O=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.unwrapOr)(l.outSpatialReference,q),C=O.isWGS84?null:R(O,F),W=G(k,F),P=M(v),Z=$(N),K=x??(null!=S&&void 0!==S?10:y),{data:L}=await (0,_request_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(T.href,{...m,query:{...h,...W,crs:C,datetime:P,query:Z,limit:K,startindex:S,token:w},headers:{accept:\"application/geo+json\"}});let J=!1;if(L.links){const e=L.links.find((e=>\"next\"===e.rel));J=!!e}!J&&Number.isInteger(L.numberMatched)&&Number.isInteger(L.numberReturned)&&(J=L.numberReturned<L.numberMatched);const{fields:z,geometryType:A,hasZ:E,objectIdField:U}=g,_=(0,_graphics_sources_geojson_geojson_js__WEBPACK_IMPORTED_MODULE_9__.createOptimizedFeatures)(L,{geometryType:A,hasZ:E,objectIdField:U});if(!C&&O.isWebMercator)for(const e of _)if((0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.isSome)(e.geometry)&&null!=A){const t=(0,_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_7__.convertToGeometry)(e.geometry,A,E,!1);t.spatialReference=_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_13__[\"default\"].WGS84,e.geometry=(0,_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_7__.convertFromGeometry)((0,_geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_6__.project)(t,O))}for(const e of _)e.objectId=e.attributes[U];const B=C||!C&&O.isWebMercator?O.toJSON():_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_5__.WGS84,Q=new _graphics_OptimizedFeatureSet_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"];return Q.exceededTransferLimit=J,Q.features=_,Q.fields=z,Q.geometryType=A,Q.hasZ=E,Q.objectIdFieldName=U,Q.spatialReference=B,Q}function O(e){return (0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.isSome)(e)&&\"extent\"===e.type}function R(e,t){const{isWebMercator:n,wkid:i}=e;if(!i)return null;const r=n?t[3857]??t[102100]??t[102113]??t[900913]:t[e.wkid];return r?`${j}${r}`:null}function C(e){if((0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.isNone)(e))return\"\";const{xmin:t,ymin:n,xmax:r,ymax:a}=e;return`${t},${n},${r},${a}`}function M(e){if((0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.isNone)(e))return null;const{start:t,end:n}=e;return`${(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.isSome)(t)?t.toISOString():\"..\"}/${(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.isSome)(n)?n.toISOString():\"..\"}`}function $(e){return (0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.isNone)(e)||!e||\"1=1\"===e?null:e}function G(e,t){if(!O(e))return null;const{spatialReference:n}=e;if(!n||n.isWGS84)return{bbox:C(e)};const i=R(n,t);return (0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.isSome)(i)?{bbox:C(e),\"bbox-crs\":i}:n.isWebMercator?{bbox:C((0,_geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_6__.project)(e,_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_13__[\"default\"].WGS84))}:null}function W(e){const t=e.extent?.spatial;if(!t)return null;const n=t.bbox[0],i=4===n.length,r=n[0],a=n[1],o=i?void 0:n[2];return{xmin:r,ymin:a,xmax:i?n[2]:n[3],ymax:i?n[3]:n[4],zmin:o,zmax:i?void 0:n[5],spatialReference:_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_13__[\"default\"].WGS84.toJSON()}}function D(e,t,n){return e.find((e=>e.rel===t&&e.type===n))||e.find((e=>e.rel===t&&!e.type))}\n\n\n//# sourceURL=webpack://arcgis-starter/./node_modules/@arcgis/core/layers/ogc/ogcFeatureUtils.js?");

/***/ })

}]);