"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkarcgis_starter"] = self["webpackChunkarcgis_starter"] || []).push([["node_modules_arcgis_core_layers_save_featureLayerUtils_js"],{

/***/ "./node_modules/@arcgis/core/core/accessorSupport/originUtils.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@arcgis/core/core/accessorSupport/originUtils.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"updateOrigins\": () => (/* binding */ i)\n/* harmony export */ });\n/* harmony import */ var _multiOriginJSONSupportUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../multiOriginJSONSupportUtils.js */ \"./node_modules/@arcgis/core/core/multiOriginJSONSupportUtils.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nfunction i(i){i&&i.writtenProperties&&i.writtenProperties.forEach((({target:i,propName:t,newOrigin:e})=>{(0,_multiOriginJSONSupportUtils_js__WEBPACK_IMPORTED_MODULE_0__.isMultiOriginJSONMixin)(i)&&e&&i.originOf(t)!==e&&i.updateOrigin(t,e)}))}\n\n\n//# sourceURL=webpack://arcgis-starter/./node_modules/@arcgis/core/core/accessorSupport/originUtils.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/core/multiOriginJSONSupportUtils.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@arcgis/core/core/multiOriginJSONSupportUtils.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"isMultiOriginJSONMixin\": () => (/* binding */ i)\n/* harmony export */ });\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nfunction i(i){return i&&\"getAtOrigin\"in i&&\"originOf\"in i}\n\n\n//# sourceURL=webpack://arcgis-starter/./node_modules/@arcgis/core/core/multiOriginJSONSupportUtils.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/layers/save/featureLayerUtils.js":
/*!********************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/save/featureLayerUtils.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"save\": () => (/* binding */ M),\n/* harmony export */   \"saveAll\": () => (/* binding */ _),\n/* harmony export */   \"saveAs\": () => (/* binding */ B)\n/* harmony export */ });\n/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/arrayUtils.js */ \"./node_modules/@arcgis/core/core/arrayUtils.js\");\n/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/Error.js */ \"./node_modules/@arcgis/core/core/Error.js\");\n/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/Logger.js */ \"./node_modules/@arcgis/core/core/Logger.js\");\n/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/maybe.js */ \"./node_modules/@arcgis/core/core/maybe.js\");\n/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/promiseUtils.js */ \"./node_modules/@arcgis/core/core/promiseUtils.js\");\n/* harmony import */ var _core_accessorSupport_originUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/accessorSupport/originUtils.js */ \"./node_modules/@arcgis/core/core/accessorSupport/originUtils.js\");\n/* harmony import */ var _FeatureLayer_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../FeatureLayer.js */ \"./node_modules/@arcgis/core/layers/FeatureLayer.js\");\n/* harmony import */ var _support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../support/arcgisLayerUrl.js */ \"./node_modules/@arcgis/core/layers/support/arcgisLayerUrl.js\");\n/* harmony import */ var _support_fetchService_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../support/fetchService.js */ \"./node_modules/@arcgis/core/layers/support/fetchService.js\");\n/* harmony import */ var _support_layerUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../support/layerUtils.js */ \"./node_modules/@arcgis/core/layers/support/layerUtils.js\");\n/* harmony import */ var _portal_Portal_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../portal/Portal.js */ \"./node_modules/@arcgis/core/portal/Portal.js\");\n/* harmony import */ var _portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../portal/PortalItem.js */ \"./node_modules/@arcgis/core/portal/PortalItem.js\");\n/* harmony import */ var _portal_support_jsonContext_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../portal/support/jsonContext.js */ \"./node_modules/@arcgis/core/portal/support/jsonContext.js\");\n/* harmony import */ var _portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../portal/support/portalItemUtils.js */ \"./node_modules/@arcgis/core/portal/support/portalItemUtils.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nconst I=_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getLogger(\"esri.layers.FeatureLayer\"),S=\"Feature Service\";function g(e,t){return`Layer (title: ${e.title}, id: ${e.id}) of type '${e.declaredClass}' ${t}`}function j(e,r){if(r.type!==S)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](\"feature-layer:portal-item-wrong-type\",g(e,`should have portal item of type \"${S}\"`))}async function L(e){if(await e.load(),(0,_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_9__.isFeatureCollectionLayer)(e))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](\"feature-layer:save\",g(e,\"using an in-memory source cannot be saved to a portal item\"))}function P(e,r){let a=(e.messages??[]).filter((({type:e})=>\"error\"===e)).map((({name:e,message:r,details:a})=>new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](e,r,a)));if(r?.ignoreUnsupported&&(a=a.filter((({name:e})=>\"layer:unsupported\"!==e&&\"symbol:unsupported\"!==e&&\"symbol-layer:unsupported\"!==e&&\"property:unsupported\"!==e&&\"url:unsupported\"!==e))),a.length>0)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](\"feature-layer:save\",\"Failed to save feature layer due to unsupported or invalid content. See 'details.errors' for more detailed information\",{errors:a})}async function J(e,t,r){\"beforeSave\"in e&&\"function\"==typeof e.beforeSave&&await e.beforeSave();const a=e.write({},t);return P(t,r),a}function N(e){const{layer:t,layerJSON:r}=e;return t.isTable?{layers:[],tables:[r]}:{layers:[r],tables:[]}}function O(e){(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.addTypeKeyword)(e,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.TypeKeyword.JSAPI),e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter(((e,t,r)=>r.indexOf(e)===t)))}function E(e){const r=e.portalItem;if(!r)throw I.error(\"save: requires the portalItem property to be set\"),new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](\"feature-layer:portal-item-not-set\",g(e,\"requires the portalItem property to be set\"));if(!r.loaded)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](\"feature-layer:portal-item-not-loaded\",g(e,\"cannot be saved to a portal item that does not exist or is inaccessible\"));j(e,r)}async function T(e,t){return/\\/\\d+\\/?$/.test(e.url??\"\")?N(t[0]):$(e,t)}async function $(e,t){const{layer:{url:r,customParameters:a,apiKey:o}}=t[0];let s=await e.fetchData(\"json\");s&&null!=s.layers&&null!=s.tables||(s=await x(s,{url:r??\"\",customParameters:a,apiKey:o},t.map((e=>e.layer.layerId))));for(const l of t)K(l.layer,l.layerJSON,s);return s}async function x(e,t,r){var a,o;e||(e={}),(a=e).layers||(a.layers=[]),(o=e).tables||(o.tables=[]);const{url:s,customParameters:l,apiKey:i}=t,{serviceJSON:n,layersJSON:u}=await (0,_support_fetchService_js__WEBPACK_IMPORTED_MODULE_8__.fetchFeatureService)(s,{customParameters:l,apiKey:i}),c=A(e.layers,n.layers,r),y=A(e.tables,n.tables,r);e.layers=c.itemResources,e.tables=y.itemResources;const d=[...c.added,...y.added],m=u?[...u.layers,...u.tables]:[];return await U(e,d,s,m),e}function A(t,r,a){const o=(0,_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__.difference)(t,r,((e,t)=>e.id===t.id));t=t.filter((e=>!o.removed.some((t=>t.id===e.id))));const s=o.added.map((({id:e})=>({id:e})));return s.forEach((({id:e})=>{t.push({id:e})})),{itemResources:t,added:s.filter((({id:e})=>!a.includes(e)))}}async function U(e,t,r,o){const s=t.map((({id:e})=>new _FeatureLayer_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"]({url:r,layerId:e,sourceJSON:o.find((({id:t})=>t===e))})));await (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__.eachAlways)(s.map((e=>e.load()))),s.forEach((t=>{const{layerId:r,loaded:o,defaultPopupTemplate:s}=t;if(!o||(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_3__.isNone)(s))return;K(t,{id:r,popupInfo:s.toJSON()},e)}))}function K(e,t,r){e.isTable?F(r.tables,t):F(r.layers,t)}function F(e,t){if(!e)return;const r=e.findIndex((({id:e})=>e===t.id));-1===r?e.push(t):e[r]=t}function R(e){const{portalItem:t}=e;return (0,_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_9__.isFeatureServiceLayer)(e)&&!e.dynamicDataSource&&!!t?.loaded&&t.type===S}async function D(e){if(!e?.length)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](\"feature-layer-utils-saveall:missing-parameters\",\"'layers' array should contain at least one feature layer\");await Promise.all(e.map((e=>e.load())));for(const o of e)if(!R(o))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](\"feature-layer-utils-saveall:invalid-parameters\",`'layers' array should only contain layers or tables in a feature service loaded from 'Feature Service' item. ${g(o,\"does not conform\")}`,{layer:o});const r=e.map((e=>e.portalItem.id));if(new Set(r).size>1)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](\"feature-layer-utils-saveall:invalid-parameters\",\"All layers in the 'layers' array should be loaded from the same portal item\");const a=e.map((e=>e.layerId));if(new Set(a).size!==a.length)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](\"feature-layer-utils-saveall:invalid-parameters\",\"'layers' array should contain only one instance each of layer or table in a feature service\")}function q(e,t){var r,a;let o=_portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_11__[\"default\"].from(t);return o.id&&(o=o.clone(),o.id=null),(r=o).type??(r.type=S),(a=o).portal??(a.portal=_portal_Portal_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].getDefault()),j(e,o),o}async function z(e,t){const{url:r,layerId:a,title:s,fullExtent:l,isTable:i}=e,n=(0,_support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_7__.parse)(r),p=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_3__.isSome)(n)&&\"FeatureServer\"===n.serverType;t.url=p?r:`${r}/${a}`,t.title||(t.title=s),t.extent=null,!i&&(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_3__.isSome)(l)&&(t.extent=await (0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.getWGS84ExtentForItem)(l)),(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.removeTypeKeyword)(t,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.TypeKeyword.METADATA),(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.removeTypeKeyword)(t,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.TypeKeyword.MULTI_LAYER),(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.addTypeKeyword)(t,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.TypeKeyword.SINGLE_LAYER),i&&(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.addTypeKeyword)(t,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.TypeKeyword.TABLE),O(t)}async function C(e,t,r){const a=e.portal;await(a?.signIn()),await(a?.user?.addItem({item:e,data:t,folder:r?.folder}))}const M=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__.debounce)(Y);async function Y(e,t){await L(e),E(e);const r=e.portalItem,a=(0,_portal_support_jsonContext_js__WEBPACK_IMPORTED_MODULE_12__.createForItemWrite)(r),o=await J(e,a,t),s=await T(r,[{layer:e,layerJSON:o}]);return O(r),await r.update({data:s}),(0,_core_accessorSupport_originUtils_js__WEBPACK_IMPORTED_MODULE_5__.updateOrigins)(a),r}const _=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__.debounce)((async(e,t)=>{await D(e);const r=e[0].portalItem,a=(0,_portal_support_jsonContext_js__WEBPACK_IMPORTED_MODULE_12__.createForItemWrite)(r),o=await Promise.all(e.map((e=>J(e,a,t)))),s=await T(r,e.map(((e,t)=>({layer:e,layerJSON:o[t]}))));return O(r),await r.update({data:s}),await Promise.all(e.slice(1).map((e=>e.portalItem.reload()))),(0,_core_accessorSupport_originUtils_js__WEBPACK_IMPORTED_MODULE_5__.updateOrigins)(a),r.clone()})),B=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__.debounce)(G);async function G(e,t,r){await L(e);const a=q(e,t),o=(0,_portal_support_jsonContext_js__WEBPACK_IMPORTED_MODULE_12__.createForItemWrite)(a),s=N({layer:e,layerJSON:await J(e,o,r)});return await z(e,a),await C(a,s,r),e.portalItem=a,(0,_core_accessorSupport_originUtils_js__WEBPACK_IMPORTED_MODULE_5__.updateOrigins)(o),a}\n\n\n//# sourceURL=webpack://arcgis-starter/./node_modules/@arcgis/core/layers/save/featureLayerUtils.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/layers/support/fetchService.js":
/*!******************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/support/fetchService.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"fetchFeatureService\": () => (/* binding */ r)\n/* harmony export */ });\n/* harmony import */ var _support_requestPresets_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../support/requestPresets.js */ \"./node_modules/@arcgis/core/support/requestPresets.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nasync function r(r,s){const a=await (0,_support_requestPresets_js__WEBPACK_IMPORTED_MODULE_0__.fetchArcGISServiceJSON)(r,s);a.layers=a.layers.filter(t);const n={serviceJSON:a};if((a.currentVersion??0)<10.5)return n;const i=await (0,_support_requestPresets_js__WEBPACK_IMPORTED_MODULE_0__.fetchArcGISServiceJSON)(r+\"/layers\",s);return n.layersJSON={layers:i.layers.filter(t),tables:i.tables},n}function t(e){return!e.type||\"Feature Layer\"===e.type}\n\n\n//# sourceURL=webpack://arcgis-starter/./node_modules/@arcgis/core/layers/support/fetchService.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/support/requestPresets.js":
/*!*************************************************************!*\
  !*** ./node_modules/@arcgis/core/support/requestPresets.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"fetchArcGISServiceJSON\": () => (/* binding */ t)\n/* harmony export */ });\n/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../request.js */ \"./node_modules/@arcgis/core/request.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nasync function t(t,o){const{data:r}=await (0,_request_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(t,{responseType:\"json\",query:{f:\"json\",...o?.customParameters,token:o?.apiKey}});return r}\n\n\n//# sourceURL=webpack://arcgis-starter/./node_modules/@arcgis/core/support/requestPresets.js?");

/***/ })

}]);