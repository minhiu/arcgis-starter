"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkarcgis_starter"] = self["webpackChunkarcgis_starter"] || []).push([["vendors-node_modules_arcgis_core_arcade_functions_featuresetbase_js"],{

/***/ "./node_modules/@arcgis/core/arcade/functions/featuresetbase.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@arcgis/core/arcade/functions/featuresetbase.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"registerFunctions\": () => (/* binding */ ie)\n/* harmony export */ });\n/* harmony import */ var _ArcadeDate_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../ArcadeDate.js */ \"./node_modules/@arcgis/core/arcade/ArcadeDate.js\");\n/* harmony import */ var _ArcadePortal_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ArcadePortal.js */ \"./node_modules/@arcgis/core/arcade/ArcadePortal.js\");\n/* harmony import */ var _Dictionary_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Dictionary.js */ \"./node_modules/@arcgis/core/arcade/Dictionary.js\");\n/* harmony import */ var _executionError_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../executionError.js */ \"./node_modules/@arcgis/core/arcade/executionError.js\");\n/* harmony import */ var _Feature_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../Feature.js */ \"./node_modules/@arcgis/core/arcade/Feature.js\");\n/* harmony import */ var _featureSetCollection_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../featureSetCollection.js */ \"./node_modules/@arcgis/core/arcade/featureSetCollection.js\");\n/* harmony import */ var _featureSetUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../featureSetUtils.js */ \"./node_modules/@arcgis/core/arcade/featureSetUtils.js\");\n/* harmony import */ var _ImmutableArray_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../ImmutableArray.js */ \"./node_modules/@arcgis/core/arcade/ImmutableArray.js\");\n/* harmony import */ var _chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../chunks/languageUtils.js */ \"./node_modules/@arcgis/core/chunks/languageUtils.js\");\n/* harmony import */ var _portalUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../portalUtils.js */ \"./node_modules/@arcgis/core/arcade/portalUtils.js\");\n/* harmony import */ var _featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../featureset/actions/Adapted.js */ \"./node_modules/@arcgis/core/arcade/featureset/actions/Adapted.js\");\n/* harmony import */ var _featureset_actions_AttributeFilter_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../featureset/actions/AttributeFilter.js */ \"./node_modules/@arcgis/core/arcade/featureset/actions/AttributeFilter.js\");\n/* harmony import */ var _featureset_actions_OrderBy_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../featureset/actions/OrderBy.js */ \"./node_modules/@arcgis/core/arcade/featureset/actions/OrderBy.js\");\n/* harmony import */ var _featureset_actions_Top_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../featureset/actions/Top.js */ \"./node_modules/@arcgis/core/arcade/featureset/actions/Top.js\");\n/* harmony import */ var _featureset_sources_Empty_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../featureset/sources/Empty.js */ \"./node_modules/@arcgis/core/arcade/featureset/sources/Empty.js\");\n/* harmony import */ var _featureset_sources_FeatureLayerMemory_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../featureset/sources/FeatureLayerMemory.js */ \"./node_modules/@arcgis/core/arcade/featureset/sources/FeatureLayerMemory.js\");\n/* harmony import */ var _featureset_support_OrderbyClause_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../featureset/support/OrderbyClause.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/OrderbyClause.js\");\n/* harmony import */ var _featureset_support_shared_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../featureset/support/shared.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/shared.js\");\n/* harmony import */ var _featureset_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../featureset/support/sqlUtils.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/sqlUtils.js\");\n/* harmony import */ var _fieldStats_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./fieldStats.js */ \"./node_modules/@arcgis/core/arcade/functions/fieldStats.js\");\n/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../core/promiseUtils.js */ \"./node_modules/@arcgis/core/core/promiseUtils.js\");\n/* harmony import */ var _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../core/sql/WhereClause.js */ \"./node_modules/@arcgis/core/core/sql/WhereClause.js\");\n/* harmony import */ var _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../layers/FeatureLayer.js */ \"./node_modules/@arcgis/core/layers/FeatureLayer.js\");\n/* harmony import */ var _layers_support_Field_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../layers/support/Field.js */ \"./node_modules/@arcgis/core/layers/support/Field.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nfunction Q(e,t,n,i){if(1===i.length){if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.m)(i[0]))return (0,_fieldStats_js__WEBPACK_IMPORTED_MODULE_19__.calculateStat)(e,i[0],-1);if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.x)(i[0]))return (0,_fieldStats_js__WEBPACK_IMPORTED_MODULE_19__.calculateStat)(e,i[0].toArray(),-1)}return (0,_fieldStats_js__WEBPACK_IMPORTED_MODULE_19__.calculateStat)(e,i,-1)}async function J(e,t,n){const i=e.getVariables();if(i.length>0){const a=[];for(let e=0;e<i.length;e++){const r={name:i[e]};a.push(await t.evaluateIdentifier(n,r))}const r={};for(let e=0;e<i.length;e++)r[i[e]]=a[e];return e.parameters=r,e}return e}function K(e,t,n=null){for(const i in e)if(i.toLowerCase()===t.toLowerCase())return e[i];return n}function X(e){if(null===e)return null;const t={type:K(e,\"type\",\"\"),name:K(e,\"name\",\"\")};if(\"range\"===t.type)t.range=K(e,\"range\",[]);else{t.codedValues=[];for(const n of K(e,\"codedValues\",[]))t.codedValues.push({name:K(n,\"name\",\"\"),code:K(n,\"code\",null)})}return t}function Y(e){if(null===e)return null;const t={},n=K(e,\"wkt\",null);null!==n&&(t.wkt=n);const i=K(e,\"wkid\",null);return null!==i&&(t.wkid=i),t}function ee(e){if(null===e)return null;const t={hasZ:K(e,\"hasz\",!1),hasM:K(e,\"hasm\",!1)},n=K(e,\"spatialreference\",null);n&&(t.spatialReference=Y(n));const i=K(e,\"x\",null);if(null!==i)return t.x=i,t.y=K(e,\"y\",null),t;const a=K(e,\"rings\",null);if(null!==a)return t.rings=a,t;const r=K(e,\"paths\",null);if(null!==r)return t.paths=r,t;const s=K(e,\"points\",null);if(null!==s)return t.points=s,t;for(const o of[\"xmin\",\"xmax\",\"ymin\",\"ymax\",\"zmin\",\"zmax\",\"mmin\",\"mmax\"]){const n=K(e,o,null);null!==n&&(t[o]=n)}return t}function te(e,t){for(const n of t)if(n===e)return!0;return!1}function ne(e){return!!e.layerDefinition&&(!!e.featureSet&&(!1!==te(e.layerDefinition.geometryType,[\"\",null,\"esriGeometryNull\",\"esriGeometryPoint\",\"esriGeometryPolyline\",\"esriGeometryPolygon\",\"esriGeometryMultipoint\",\"esriGeometryEnvelope\"])&&(null!==e.layerDefinition.objectIdField&&\"\"!==e.layerDefinition.objectIdField&&(!1!==(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.m)(e.layerDefinition.fields)&&!1!==(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.m)(e.featureSet.features)))))}function ie(_){\"async\"===_.mode&&(_.functions.timezone=function(t,r){return _.standardFunctionAsync(t,r,(async(s,o,l)=>{if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.y)(l,1,2,t,r),(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.T)(l[0])){if(await l[0].load(),1===l.length||null===l[1])return l[0].dateTimeReferenceFieldIndex.layerDateFieldsTimeZone;if(!(l[1]instanceof _Dictionary_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])||!1===l[1].hasField(\"type\"))throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(t,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,r);const e=l[1].field(\"type\");if(!1===(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.c)(e))throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(t,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,r);switch((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.j)(e).toLowerCase()){case\"preferredtimezone\":return l[0].dateTimeReferenceFieldIndex.layerPreferredTimeZone;case\"editfieldsinfo\":return l[0].dateTimeReferenceFieldIndex.layerEditFieldsTimeZone;case\"timeinfo\":return l[0].dateTimeReferenceFieldIndex.layerTimeInfoTimeZone;case\"field\":if(l[1].hasField(\"fieldname\")&&(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.c)(l[1].field(\"fieldname\")))return l[0].dateTimeReferenceFieldIndex.fieldTimeZone((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.j)(l[1].field(\"fieldname\")))}throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(t,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,r)}const f=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.l)(l[0],(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.C)(t));if(null===f)return null;const c=f.timeZone;return\"system\"===c?_ArcadeDate_js__WEBPACK_IMPORTED_MODULE_0__.ArcadeDate.systemTimeZoneCanonicalName:c}))},_.functions.sqltimestamp=function(e,t){return _.standardFunctionAsync(e,t,(async(n,r,s)=>{(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.y)(s,1,3,e,t);const o=s[0];if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.k)(o)){if(1===s.length)return o.toSQLString();if(2===s.length)return o.changeTimeZone((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.j)(s[1])).toSQLString();throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t)}if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.T)(o)){if(3!==s.length)throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t);await o.load();const n=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.j)(s[1]);if(!1===(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.k)(s[2]))throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t);const r=o.fieldTimeZone(n);return null===r?s[2].toSQLString():s[2].changeTimeZone(r).toSQLString()}throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t)}))},_.signatures.push({name:\"sqltimestamp\",min:2,max:4}),_.functions.featuresetbyid=function(e,t){return _.standardFunctionAsync(e,t,((n,r,o)=>{if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.y)(o,2,4,e,t),o[0]instanceof _featureSetCollection_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"]){const n=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.j)(o[1]);let r=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.A)(o[2],null);const s=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.h)((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.A)(o[3],!0));if(null===r&&(r=[\"*\"]),!1===(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.m)(r))throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t);return o[0].featureSetById(n,s,r)}throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t)}))},_.signatures.push({name:\"featuresetbyid\",min:2,max:4}),_.functions.getfeatureset=function(e,t){return _.standardFunctionAsync(e,t,((n,r,s)=>{if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.y)(s,1,2,e,t),(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.w)(s[0])){let t=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.A)(s[1],\"datasource\");return null===t&&(t=\"datasource\"),t=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.j)(t).toLowerCase(),(0,_featureSetUtils_js__WEBPACK_IMPORTED_MODULE_6__.convertToFeatureSet)(s[0].fullSchema(),t,e.lrucache,e.interceptor,e.spatialReference)}throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t)}))},_.signatures.push({name:\"getfeatureset\",min:1,max:2}),_.functions.featuresetbyportalitem=function(e,n){return _.standardFunctionAsync(e,n,((r,s,o)=>{if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.y)(o,2,5,e,n),null===o[0])throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.PortalRequired,n);if(o[0]instanceof _ArcadePortal_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]){const t=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.j)(o[1]),r=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.j)(o[2]);let s=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.A)(o[3],null);const f=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.h)((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.A)(o[4],!0));if(null===s&&(s=[\"*\"]),!1===(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.m)(s))throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,n);let c=null;return e.services&&e.services.portal&&(c=e.services.portal),c=(0,_portalUtils_js__WEBPACK_IMPORTED_MODULE_9__.getPortal)(o[0],c),(0,_featureSetUtils_js__WEBPACK_IMPORTED_MODULE_6__.constructFeatureSetFromPortalItem)(t,r,e.spatialReference,s,f,c,e.lrucache,e.interceptor)}if(!1===(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.c)(o[0]))throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.PortalRequired,n);const f=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.j)(o[0]),c=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.j)(o[1]);let u=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.A)(o[2],null);const d=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.h)((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.A)(o[3],!0));if(null===u&&(u=[\"*\"]),!1===(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.m)(u))throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,n);if(e.services&&e.services.portal)return (0,_featureSetUtils_js__WEBPACK_IMPORTED_MODULE_6__.constructFeatureSetFromPortalItem)(f,c,e.spatialReference,u,d,e.services.portal,e.lrucache,e.interceptor);throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.PortalRequired,n)}))},_.signatures.push({name:\"featuresetbyportalitem\",min:2,max:5}),_.functions.featuresetbyname=function(e,t){return _.standardFunctionAsync(e,t,((n,r,o)=>{if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.y)(o,2,4,e,t),o[0]instanceof _featureSetCollection_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"]){const n=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.j)(o[1]);let r=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.A)(o[2],null);const s=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.h)((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.A)(o[3],!0));if(null===r&&(r=[\"*\"]),!1===(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.m)(r))throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t);return o[0].featureSetByName(n,s,r)}throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t)}))},_.signatures.push({name:\"featuresetbyname\",min:2,max:4}),_.functions.featureset=function(e,t){return _.standardFunction(e,t,((r,s,o)=>{(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.y)(o,1,1,e,t);let l=o[0];const f={layerDefinition:{geometryType:\"\",objectIdField:\"\",globalIdField:\"\",typeIdField:\"\",fields:[]},featureSet:{geometryType:\"\",features:[]}};if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.c)(l))l=JSON.parse(l),void 0!==l.layerDefinition?(f.layerDefinition=l.layerDefinition,f.featureSet=l.featureSet,l.layerDefinition.spatialReference&&(f.layerDefinition.spatialReference=l.layerDefinition.spatialReference)):(f.featureSet.features=l.features,f.featureSet.geometryType=l.geometryType,f.layerDefinition.geometryType=f.featureSet.geometryType,f.layerDefinition.objectIdField=l.objectIdFieldName,f.layerDefinition.typeIdField=l.typeIdFieldName,f.layerDefinition.globalIdField=l.globalIdFieldName,f.layerDefinition.fields=l.fields,l.spatialReference&&(f.layerDefinition.spatialReference=l.spatialReference));else{if(!(o[0]instanceof _Dictionary_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"]))throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t);{l=JSON.parse(o[0].castToText(!0));const e=K(l,\"layerdefinition\");if(null!==e){f.layerDefinition.geometryType=K(e,\"geometrytype\",\"\"),f.featureSet.geometryType=f.layerDefinition.geometryType,f.layerDefinition.globalIdField=K(e,\"globalidfield\",\"\"),f.layerDefinition.objectIdField=K(e,\"objectidfield\",\"\"),f.layerDefinition.typeIdField=K(e,\"typeidfield\",\"\");const t=K(e,\"spatialreference\",null);t&&(f.layerDefinition.spatialReference=Y(t));for(const i of K(e,\"fields\",[])){const e={name:K(i,\"name\",\"\"),alias:K(i,\"alias\",\"\"),type:K(i,\"type\",\"\"),nullable:K(i,\"nullable\",!0),editable:K(i,\"editable\",!0),length:K(i,\"length\",null),domain:X(K(i,\"domain\"))};f.layerDefinition.fields.push(e)}const n=K(l,\"featureset\",null);if(n){const e={};for(const t of f.layerDefinition.fields)e[t.name.toLowerCase()]=t.name;for(const t of K(n,\"features\",[])){const n={},i=K(t,\"attributes\",{});for(const t in i)n[e[t.toLowerCase()]]=i[t];f.featureSet.features.push({attributes:n,geometry:ee(K(t,\"geometry\",null))})}}}else{f.layerDefinition.geometryType=K(l,\"geometrytype\",\"\"),f.featureSet.geometryType=f.layerDefinition.geometryType,f.layerDefinition.objectIdField=K(l,\"objectidfieldname\",\"\"),f.layerDefinition.typeIdField=K(l,\"typeidfieldname\",\"\");const e=K(l,\"spatialreference\",null);e&&(f.layerDefinition.spatialReference=Y(e));for(const n of K(l,\"fields\",[])){const e={name:K(n,\"name\",\"\"),alias:K(n,\"alias\",\"\"),type:K(n,\"type\",\"\"),nullable:K(n,\"nullable\",!0),editable:K(n,\"editable\",!0),length:K(n,\"length\",null),domain:X(K(n,\"domain\"))};f.layerDefinition.fields.push(e)}const t={};for(const n of f.layerDefinition.fields)t[n.name.toLowerCase()]=n.name;for(const n of K(l,\"features\",[])){const e={},i=K(n,\"attributes\",{});for(const n in i)e[t[n.toLowerCase()]]=i[n];f.featureSet.features.push({attributes:e,geometry:ee(K(n,\"geometry\",null))})}}}}if(!1===ne(f))throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t);return\"\"===(f?.layerDefinition?.geometryType||\"\")&&(f.layerDefinition.geometryType=\"esriGeometryNull\"),_featureset_sources_FeatureLayerMemory_js__WEBPACK_IMPORTED_MODULE_15__[\"default\"].create(f,e.spatialReference)}))},_.signatures.push({name:\"featureset\",min:1,max:1}),_.functions.filter=function(e,t){return _.standardFunctionAsync(e,t,(async(n,r,s)=>{if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.y)(s,2,2,e,t),(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.m)(s[0])||(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.x)(s[0])){const n=[];let r=s[0];r instanceof _ImmutableArray_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"]&&(r=r.toArray());let o=null;if(!(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.i)(s[1]))throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t);o=s[1].createFunction(e);for(const e of r){const t=o(e);(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_20__.isPromiseLike)(t)?!0===await t&&n.push(e):!0===t&&n.push(e)}return n}if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.T)(s[0])){const t=await s[0].load(),n=_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_21__.WhereClause.create(s[1],t.getFieldsIndex()),i=n.getVariables();if(i.length>0){const t=[];for(let n=0;n<i.length;n++){const a={name:i[n]};t.push(await _.evaluateIdentifier(e,a))}const a={};for(let e=0;e<i.length;e++)a[i[e]]=t[e];return n.parameters=a,new _featureset_actions_AttributeFilter_js__WEBPACK_IMPORTED_MODULE_11__[\"default\"]({parentfeatureset:s[0],whereclause:n})}return new _featureset_actions_AttributeFilter_js__WEBPACK_IMPORTED_MODULE_11__[\"default\"]({parentfeatureset:s[0],whereclause:n})}throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t)}))},_.signatures.push({name:\"filter\",min:2,max:2}),_.functions.orderby=function(e,t){return _.standardFunctionAsync(e,t,(async(n,r,s)=>{if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.y)(s,2,2,e,t),(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.T)(s[0])){const e=new _featureset_support_OrderbyClause_js__WEBPACK_IMPORTED_MODULE_16__[\"default\"](s[1]);return new _featureset_actions_OrderBy_js__WEBPACK_IMPORTED_MODULE_12__[\"default\"]({parentfeatureset:s[0],orderbyclause:e})}throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t)}))},_.signatures.push({name:\"orderby\",min:2,max:2}),_.functions.top=function(e,t){return _.standardFunctionAsync(e,t,(async(n,r,s)=>{if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.y)(s,2,2,e,t),(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.T)(s[0]))return new _featureset_actions_Top_js__WEBPACK_IMPORTED_MODULE_13__[\"default\"]({parentfeatureset:s[0],topnum:s[1]});if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.m)(s[0]))return (0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.g)(s[1])>=s[0].length?s[0].slice(0):s[0].slice(0,(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.g)(s[1]));if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.x)(s[0]))return (0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.g)(s[1])>=s[0].length()?s[0].slice(0):s[0].slice(0,(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.g)(s[1]));throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t)}))},_.signatures.push({name:\"top\",min:2,max:2}),_.functions.first=function(e,t){return _.standardFunctionAsync(e,t,(async(n,i,a)=>{if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.y)(a,1,1,e,t),(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.T)(a[0])){const t=await a[0].first(n.abortSignal);if(null!==t){const n=_Feature_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].createFromGraphicLikeObject(t.geometry,t.attributes,a[0],e.timeReference);return n._underlyingGraphic=t,n}return t}return (0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.m)(a[0])?0===a[0].length?null:a[0][0]:(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.x)(a[0])?0===a[0].length()?null:a[0].get(0):null}))},_.signatures.push({name:\"first\",min:1,max:1}),_.functions.attachments=function(e,t){return _.standardFunctionAsync(e,t,(async(r,s,o)=>{(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.y)(o,1,2,e,t);const l={minsize:-1,maxsize:-1,types:null,returnMetadata:!1};if(o.length>1)if(o[1]instanceof _Dictionary_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"]){if(o[1].hasField(\"minsize\")&&(l.minsize=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.g)(o[1].field(\"minsize\"))),o[1].hasField(\"metadata\")&&(l.returnMetadata=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.h)(o[1].field(\"metadata\"))),o[1].hasField(\"maxsize\")&&(l.maxsize=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.g)(o[1].field(\"maxsize\"))),o[1].hasField(\"types\")){const e=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.X)(o[1].field(\"types\"),!1);e.length>0&&(l.types=e)}}else if(null!==o[1])throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t);if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.w)(o[0])){let t=o[0]._layer;return t instanceof _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_22__[\"default\"]&&(t=(0,_featureSetUtils_js__WEBPACK_IMPORTED_MODULE_6__.constructFeatureSet)(t,e.spatialReference,[\"*\"],!0,e.lrucache,e.interceptor)),null===t?[]:!1===(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.T)(t)?[]:(await t.load(),t.queryAttachments(o[0].field(t.objectIdField),l.minsize,l.maxsize,l.types,l.returnMetadata))}if(null===o[0])return[];throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t)}))},_.signatures.push({name:\"attachments\",min:1,max:2}),_.functions.featuresetbyrelationshipname=function(e,t){return _.standardFunctionAsync(e,t,(async(n,r,s)=>{(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.y)(s,2,4,e,t);const o=s[0],l=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.j)(s[1]);let d=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.A)(s[2],null);const m=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.h)((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.A)(s[3],!0));if(null===d&&(d=[\"*\"]),!1===(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.m)(d))throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t);if(null===s[0])return null;if(!(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.w)(s[0]))throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t);let h=o._layer;if(h instanceof _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_22__[\"default\"]&&(h=(0,_featureSetUtils_js__WEBPACK_IMPORTED_MODULE_6__.constructFeatureSet)(h,e.spatialReference,[\"*\"],!0,e.lrucache,e.interceptor)),null===h)return null;if(!1===(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.T)(h))return null;h=await h.load();const g=h.relationshipMetaData().filter((e=>e.name===l));if(0===g.length)return null;if(void 0!==g[0].relationshipTableId&&null!==g[0].relationshipTableId&&g[0].relationshipTableId>-1)return (0,_featureSetUtils_js__WEBPACK_IMPORTED_MODULE_6__.constructFeatureSetFromRelationship)(h,g[0],o.field(h.objectIdField),h.spatialReference,d,m,e.lrucache,e.interceptor);let I=h.serviceUrl();if(!I)return null;I=\"/\"===I.charAt(I.length-1)?I+g[0].relatedTableId.toString():I+\"/\"+g[0].relatedTableId.toString();const F=await (0,_featureSetUtils_js__WEBPACK_IMPORTED_MODULE_6__.constructFeatureSetFromUrl)(I,h.spatialReference,d,m,e.lrucache,e.interceptor);await F.load();let A=F.relationshipMetaData();if(A=A.filter((e=>e.id===g[0].id)),!1===o.hasField(g[0].keyField)||null===o.field(g[0].keyField)){const e=await h.getFeatureByObjectId(o.field(h.objectIdField),[g[0].keyField]);if(e){const t=_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_21__.WhereClause.create(A[0].keyField+\"= @id\",F.getFieldsIndex());return t.parameters={id:e.attributes[g[0].keyField]},F.filter(t)}return new _featureset_sources_Empty_js__WEBPACK_IMPORTED_MODULE_14__[\"default\"]({parentfeatureset:F})}const N=_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_21__.WhereClause.create(A[0].keyField+\"= @id\",F.getFieldsIndex());return N.parameters={id:o.field(g[0].keyField)},F.filter(N)}))},_.signatures.push({name:\"featuresetbyrelationshipname\",min:2,max:4}),_.functions.featuresetbyassociation=function(e,t){return _.standardFunctionAsync(e,t,(async(n,r,s)=>{(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.y)(s,2,3,e,t);const o=s[0],l=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.j)((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.A)(s[1],\"\")).toLowerCase(),c=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.c)(s[2])?(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.j)(s[2]):null;if(null===s[0])return null;if(!(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.w)(s[0]))throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t);let u=o._layer;if(u instanceof _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_22__[\"default\"]&&(u=(0,_featureSetUtils_js__WEBPACK_IMPORTED_MODULE_6__.constructFeatureSet)(u,e.spatialReference,[\"*\"],!0,e.lrucache,e.interceptor)),null===u)return null;if(!1===(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.T)(u))return null;await u.load();const m=u.serviceUrl(),g=await (0,_featureSetUtils_js__WEBPACK_IMPORTED_MODULE_6__.constructAssociationMetaDataFeatureSetFromUrl)(m,e.spatialReference);let I=null,F=null,D=!1;if(null!==c&&\"\"!==c&&void 0!==c){for(const e of g.terminals)e.terminalName===c&&(F=e.terminalId);null===F&&(D=!0)}const b=g.associations.getFieldsIndex(),A=b.get(\"TOGLOBALID\").name,N=b.get(\"FROMGLOBALID\").name,S=b.get(\"TOTERMINALID\").name,T=b.get(\"FROMTERMINALID\").name,$=b.get(\"FROMNETWORKSOURCEID\").name,M=b.get(\"TONETWORKSOURCEID\").name,O=b.get(\"ASSOCIATIONTYPE\").name,k=b.get(\"ISCONTENTVISIBLE\").name,z=b.get(\"OBJECTID\").name;for(const e of u.fields)if(\"global-id\"===e.type){I=o.field(e.name);break}let H=null,G=new _featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.SqlExpressionAdapted(new _layers_support_Field_js__WEBPACK_IMPORTED_MODULE_23__[\"default\"]({name:\"percentalong\",alias:\"percentalong\",type:\"double\"}),_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_21__.WhereClause.create(\"0\",g.associations.getFieldsIndex())),W=new _featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.SqlExpressionAdapted(new _layers_support_Field_js__WEBPACK_IMPORTED_MODULE_23__[\"default\"]({name:\"side\",alias:\"side\",type:\"string\"}),_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_21__.WhereClause.create(\"''\",g.associations.getFieldsIndex()));const _=\"globalid\",U=\"globalId\",Q={};for(const e in g.lkp)Q[e]=g.lkp[e].sourceId;const J=new _featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.StringToCodeAdapted(new _layers_support_Field_js__WEBPACK_IMPORTED_MODULE_23__[\"default\"]({name:\"classname\",alias:\"classname\",type:\"string\"}),null,Q);let K=\"\";switch(l){case\"midspan\":{K=`((${A}='${I}') OR ( ${N}='${I}')) AND (${O} IN (5))`,J.codefield=_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_21__.WhereClause.create(`CASE WHEN (${A}='${I}') THEN ${$} ELSE ${M} END`,g.associations.getFieldsIndex());const e=(0,_featureset_support_shared_js__WEBPACK_IMPORTED_MODULE_17__.cloneField)(_featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.AdaptedFeatureSet.findField(g.associations.fields,N));e.name=_,e.alias=_,H=new _featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.SqlExpressionAdapted(e,_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_21__.WhereClause.create(`CASE WHEN (${N}='${I}') THEN ${A} ELSE ${N} END`,g.associations.getFieldsIndex())),G=g.unVersion>=4?new _featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.OriginalField(_featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.AdaptedFeatureSet.findField(g.associations.fields,b.get(\"PERCENTALONG\").name)):new _featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.SqlExpressionAdapted(new _layers_support_Field_js__WEBPACK_IMPORTED_MODULE_23__[\"default\"]({name:\"percentalong\",alias:\"percentalong\",type:\"double\"}),_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_21__.WhereClause.create(\"0\",g.associations.getFieldsIndex()));break}case\"junctionedge\":{K=`((${A}='${I}') OR ( ${N}='${I}')) AND (${O} IN (4,6))`,J.codefield=_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_21__.WhereClause.create(`CASE WHEN (${A}='${I}') THEN ${$} ELSE ${M} END`,g.associations.getFieldsIndex());const e=(0,_featureset_support_shared_js__WEBPACK_IMPORTED_MODULE_17__.cloneField)(_featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.AdaptedFeatureSet.findField(g.associations.fields,N));e.name=_,e.alias=_,H=new _featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.SqlExpressionAdapted(e,_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_21__.WhereClause.create(`CASE WHEN (${N}='${I}') THEN ${A} ELSE ${N} END`,g.associations.getFieldsIndex())),W=new _featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.SqlExpressionAdapted(new _layers_support_Field_js__WEBPACK_IMPORTED_MODULE_23__[\"default\"]({name:\"side\",alias:\"side\",type:\"string\"}),_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_21__.WhereClause.create(`CASE WHEN (${O}=4) THEN 'from' ELSE 'to' END`,g.associations.getFieldsIndex()));break}case\"connected\":{let e=`${A}='@T'`,t=`${N}='@T'`;null!==F&&(e+=` AND ${S}=@A`,t+=` AND ${T}=@A`),K=\"((\"+e+\") OR (\"+t+\"))\",K=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.L)(K,\"@T\",I??\"\"),e=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.L)(e,\"@T\",I??\"\"),null!==F&&(e=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.L)(e,\"@A\",F.toString()),K=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.L)(K,\"@A\",F.toString())),J.codefield=_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_21__.WhereClause.create(\"CASE WHEN \"+e+` THEN ${$} ELSE ${M} END`,g.associations.getFieldsIndex());const n=(0,_featureset_support_shared_js__WEBPACK_IMPORTED_MODULE_17__.cloneField)(_featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.AdaptedFeatureSet.findField(g.associations.fields,N));n.name=_,n.alias=_,H=new _featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.SqlExpressionAdapted(n,_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_21__.WhereClause.create(\"CASE WHEN \"+e+` THEN ${N} ELSE ${A} END`,g.associations.getFieldsIndex()));break}case\"container\":K=`${A}='${I}' AND ${O} = 2`,null!==F&&(K+=` AND ${S} = `+F.toString()),J.codefield=$,K=\"( \"+K+\" )\",H=new _featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.FieldRename(_featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.AdaptedFeatureSet.findField(g.associations.fields,N),_,_);break;case\"content\":K=`(${N}='${I}' AND ${O} = 2)`,null!==F&&(K+=` AND ${T} = `+F.toString()),J.codefield=M,K=\"( \"+K+\" )\",H=new _featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.FieldRename(_featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.AdaptedFeatureSet.findField(g.associations.fields,A),_,_);break;case\"structure\":K=`(${A}='${I}' AND ${O} = 3)`,null!==F&&(K+=` AND ${S} = `+F.toString()),J.codefield=$,K=\"( \"+K+\" )\",H=new _featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.FieldRename(_featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.AdaptedFeatureSet.findField(g.associations.fields,N),_,U);break;case\"attached\":K=`(${N}='${I}' AND ${O} = 3)`,null!==F&&(K+=` AND ${T} = `+F.toString()),J.codefield=M,K=\"( \"+K+\" )\",H=new _featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.FieldRename(_featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.AdaptedFeatureSet.findField(g.associations.fields,A),_,U);break;default:throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t)}D&&(K=\"1 <> 1\");return new _featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.AdaptedFeatureSet({parentfeatureset:g.associations,adaptedFields:[new _featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.OriginalField(_featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.AdaptedFeatureSet.findField(g.associations.fields,z)),new _featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.OriginalField(_featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.AdaptedFeatureSet.findField(g.associations.fields,k)),H,W,J,G],extraFilter:K?_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_21__.WhereClause.create(K,g.associations.getFieldsIndex()):null})}))},_.signatures.push({name:\"featuresetbyassociation\",min:2,max:6}),_.functions.groupby=function(e,t){return _.standardFunctionAsync(e,t,(async(r,s,o)=>{if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.y)(o,3,3,e,t),!(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.T)(o[0]))throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t);const l=await o[0].load(),f=[],c=[];let u=!1,d=[];if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.c)(o[1]))d.push(o[1]);else if(o[1]instanceof _Dictionary_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])d.push(o[1]);else if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.m)(o[1]))d=o[1];else{if(!(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.x)(o[1]))throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t);d=o[1].toArray()}for(const m of d)if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.c)(m)){const e=_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_21__.WhereClause.create((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.j)(m),l.getFieldsIndex()),t=!0===(0,_featureset_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_18__.isSingleField)(e)?(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.j)(m):\"%%%%FIELDNAME\";f.push({name:t,expression:e}),\"%%%%FIELDNAME\"===t&&(u=!0)}else{if(!(m instanceof _Dictionary_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"]))throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t);{const n=m.hasField(\"name\")?m.field(\"name\"):\"%%%%FIELDNAME\",r=m.hasField(\"expression\")?m.field(\"expression\"):\"\";if(\"%%%%FIELDNAME\"===n&&(u=!0),!n)throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t);f.push({name:n,expression:_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_21__.WhereClause.create(r||n,l.getFieldsIndex())})}}if(d=[],(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.c)(o[2]))d.push(o[2]);else if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.m)(o[2]))d=o[2];else if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.x)(o[2]))d=o[2].toArray();else{if(!(o[2]instanceof _Dictionary_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"]))throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t);d.push(o[2])}for(const m of d){if(!(m instanceof _Dictionary_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"]))throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t);{const n=m.hasField(\"name\")?m.field(\"name\"):\"\",r=m.hasField(\"statistic\")?m.field(\"statistic\"):\"\",s=m.hasField(\"expression\")?m.field(\"expression\"):\"\";if(!n||!r||!s)throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t);c.push({name:n,statistic:r.toLowerCase(),expression:_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_21__.WhereClause.create(s,l.getFieldsIndex())})}}if(u){const e={};for(const n of l.fields)e[n.name.toLowerCase()]=1;for(const n of f)\"%%%%FIELDNAME\"!==n.name&&(e[n.name.toLowerCase()]=1);for(const n of c)\"%%%%FIELDNAME\"!==n.name&&(e[n.name.toLowerCase()]=1);let t=0;for(const n of f)if(\"%%%%FIELDNAME\"===n.name){for(;1===e[\"field_\"+t.toString()];)t++;e[\"field_\"+t.toString()]=1,n.name=\"FIELD_\"+t.toString()}}for(const t of f)await J(t.expression,_,e);for(const t of c)await J(t.expression,_,e);return o[0].groupby(f,c)}))},_.signatures.push({name:\"groupby\",min:3,max:3}),_.functions.distinct=function(e,t){return _.standardFunctionAsync(e,t,(async(r,s,o)=>{if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.T)(o[0])){(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.y)(o,2,2,e,t);const r=await o[0].load(),s=[];let l=[];if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.c)(o[1]))l.push(o[1]);else if(o[1]instanceof _Dictionary_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])l.push(o[1]);else if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.m)(o[1]))l=o[1];else{if(!(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.x)(o[1]))throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t);l=o[1].toArray()}let f=!1;for(const o of l)if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.c)(o)){const e=_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_21__.WhereClause.create((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.j)(o),r.getFieldsIndex()),t=!0===(0,_featureset_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_18__.isSingleField)(e)?(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.j)(o):\"%%%%FIELDNAME\";s.push({name:t,expression:e}),\"%%%%FIELDNAME\"===t&&(f=!0)}else{if(!(o instanceof _Dictionary_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"]))throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t);{const n=o.hasField(\"name\")?o.field(\"name\"):\"%%%%FIELDNAME\",l=o.hasField(\"expression\")?o.field(\"expression\"):\"\";if(\"%%%%FIELDNAME\"===n&&(f=!0),!n)throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t);s.push({name:n,expression:_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_21__.WhereClause.create(l||n,r.getFieldsIndex())})}}if(f){const e={};for(const n of r.fields)e[n.name.toLowerCase()]=1;for(const n of s)\"%%%%FIELDNAME\"!==n.name&&(e[n.name.toLowerCase()]=1);let t=0;for(const n of s)if(\"%%%%FIELDNAME\"===n.name){for(;1===e[\"field_\"+t.toString()];)t++;e[\"field_\"+t.toString()]=1,n.name=\"FIELD_\"+t.toString()}}for(const t of s)await J(t.expression,_,e);return o[0].groupby(s,[])}return Q(\"distinct\",r,s,o)}))})}\n\n\n//# sourceURL=webpack://arcgis-starter/./node_modules/@arcgis/core/arcade/functions/featuresetbase.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/arcade/portalUtils.js":
/*!*********************************************************!*\
  !*** ./node_modules/@arcgis/core/arcade/portalUtils.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getPortal\": () => (/* binding */ t),\n/* harmony export */   \"lookupUser\": () => (/* binding */ s)\n/* harmony export */ });\n/* harmony import */ var _kernel_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../kernel.js */ \"./node_modules/@arcgis/core/kernel.js\");\n/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../request.js */ \"./node_modules/@arcgis/core/request.js\");\n/* harmony import */ var _portal_Portal_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../portal/Portal.js */ \"./node_modules/@arcgis/core/portal/Portal.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nfunction t(r,e){if(null===r)return e;return new _portal_Portal_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"]({url:r.field(\"url\")})}async function s(n,t,s){const u=_kernel_js__WEBPACK_IMPORTED_MODULE_0__.id?.findCredential(n.restUrl);if(!u)return null;if(\"loaded\"===n.loadStatus&&\"\"===t&&n.user&&n.user.sourceJSON&&!1===s)return n.user.sourceJSON;if(\"\"===t){const r=await (0,_request_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(n.restUrl+\"/community/self\",{responseType:\"json\",query:{f:\"json\",...!1===s?{}:{returnUserLicenseTypeExtensions:!0}}});if(r.data){const e=r.data;if(e&&e.username)return e}return null}const o=await (0,_request_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(n.restUrl+\"/community/users/\"+t,{responseType:\"json\",query:{f:\"json\"}});if(o.data){const r=o.data;return r.error?null:r}return null}\n\n\n//# sourceURL=webpack://arcgis-starter/./node_modules/@arcgis/core/arcade/portalUtils.js?");

/***/ })

}]);